"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8801],{18801:function(a,e,t){t.d(e,{SolanaWalletConnectStandardWallet:function(){return SolanaWalletConnectStandardWallet}});var n,l,s,i,r,o,c,d,M,h,u,w,S,W,f,v,D,g,T,p,N,A,C,_,j,y=t(48281),__classPrivateFieldGet=function(a,e,t,n){if("a"===t&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof e?a!==e||!n:!e.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===t?n:"a"===t?n.call(a):n?n.value:e.get(a)},__classPrivateFieldSet=function(a,e,t,n,l){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!l)throw TypeError("Private accessor was defined without a setter");if("function"==typeof e?a!==e||!l:!e.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?l.call(a,t):l?l.value=t:e.set(a,t),t};function registerWallet(a){let callback=({register:e})=>e(a);try{window.dispatchEvent(new RegisterWalletEvent(callback))}catch(a){console.error("wallet-standard:register-wallet event could not be dispatched\n",a)}try{window.addEventListener("wallet-standard:app-ready",({detail:a})=>callback(a))}catch(a){console.error("wallet-standard:app-ready event listener could not be added\n",a)}}let RegisterWalletEvent=class RegisterWalletEvent extends Event{get detail(){return __classPrivateFieldGet(this,n,"f")}get type(){return"wallet-standard:register-wallet"}constructor(a){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),n.set(this,void 0),__classPrivateFieldSet(this,n,a,"f")}preventDefault(){throw Error("preventDefault cannot be called")}stopImmediatePropagation(){throw Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw Error("stopPropagation cannot be called")}};n=new WeakMap;var P=t(77191),E=t(50738),z=t(4511);let F={ton:["ton_sendMessage","ton_signData"],solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},L={mainnet:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedMainnet:"4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",devnet:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedDevnet:"8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"};var m=t(22830);let G=["solana:mainnet","solana:devnet","solana:testnet","solana:localnet"];var WalletConnectAccount_classPrivateFieldGet=function(a,e,t,n){if("a"===t&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof e?a!==e||!n:!e.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===t?n:"a"===t?n.call(a):n?n.value:e.get(a)},WalletConnectAccount_classPrivateFieldSet=function(a,e,t,n,l){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!l)throw TypeError("Private accessor was defined without a setter");if("function"==typeof e?a!==e||!l:!e.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?l.call(a,t):l?l.value=t:e.set(a,t),t};let WalletConnectAccount=class WalletConnectAccount{get address(){return WalletConnectAccount_classPrivateFieldGet(this,l,"f")}get publicKey(){return WalletConnectAccount_classPrivateFieldGet(this,s,"f").slice()}get chains(){return WalletConnectAccount_classPrivateFieldGet(this,i,"f").slice()}get features(){return WalletConnectAccount_classPrivateFieldGet(this,r,"f").slice()}get label(){return WalletConnectAccount_classPrivateFieldGet(this,o,"f")}get icon(){return WalletConnectAccount_classPrivateFieldGet(this,c,"f")}constructor({address:a,publicKey:e,label:t,icon:n}){l.set(this,void 0),s.set(this,void 0),i.set(this,void 0),r.set(this,void 0),o.set(this,void 0),c.set(this,void 0),WalletConnectAccount_classPrivateFieldSet(this,l,a,"f"),WalletConnectAccount_classPrivateFieldSet(this,s,e,"f"),WalletConnectAccount_classPrivateFieldSet(this,i,G,"f"),WalletConnectAccount_classPrivateFieldSet(this,r,["solana:signAndSendTransaction","solana:signTransaction","solana:signMessage"],"f"),WalletConnectAccount_classPrivateFieldSet(this,o,t,"f"),WalletConnectAccount_classPrivateFieldSet(this,c,n,"f")}};function isSolanaChain(a){return G.includes(a)}function isVersionedTransaction(a){return"version"in a}l=new WeakMap,s=new WeakMap,i=new WeakMap,r=new WeakMap,o=new WeakMap,c=new WeakMap;var I=t(48764).Buffer,SolanaWalletConnectStandardWallet_classPrivateFieldGet=function(a,e,t,n){if("a"===t&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof e?a!==e||!n:!e.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===t?n:"a"===t?n.call(a):n?n.value:e.get(a)},SolanaWalletConnectStandardWallet_classPrivateFieldSet=function(a,e,t,n,l){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!l)throw TypeError("Private accessor was defined without a setter");if("function"==typeof e?a!==e||!l:!e.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?l.call(a,t):l?l.value=t:e.set(a,t),t};let SolanaWalletConnectStandardWallet=class SolanaWalletConnectStandardWallet{static register(a){let e=new SolanaWalletConnectStandardWallet(a);registerWallet(e)}get version(){return SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,h,"f")}get name(){return SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,w,"f")}get icon(){return SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,S,"f")}get chains(){return G.slice()}get features(){return{"standard:connect":{version:"1.0.0",connect:SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,N,"f")},"standard:disconnect":{version:"1.0.0",disconnect:SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,A,"f")},"standard:events":{version:"1.0.0",on:SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,f,"f")},"solana:signAndSendTransaction":{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,C,"f")},"solana:signTransaction":{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,_,"f")},"solana:signMessage":{version:"1.0.0",signMessage:SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,j,"f")}}}get accounts(){let a=SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,u,"f").session?.namespaces?.solana,e=a?.chains?.map(a=>({"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"solana:mainnet","solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ":"solana:mainnet","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"solana:testnet","solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K":"solana:devnet","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1":"solana:devnet"})[a]);return a?.accounts.map(a=>{let{address:t}=E.u.parseCaipAddress(a),n=new y.nh(P.decode(t));return{address:t,publicKey:n.toBytes(),chains:e,features:["solana:signAndSendTransaction","solana:signTransaction","solana:signMessage"]}})||[]}constructor(a){d.add(this),M.set(this,{}),h.set(this,"1.0.0"),u.set(this,void 0),w.set(this,"WalletConnect"),S.set(this,"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE4NSIgdmlld0JveD0iMCAwIDMwMCAxODUiIHdpZHRoPSIzMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTYxLjQzODU0MjkgMzYuMjU2MjYxMmM0OC45MTEyMjQxLTQ3Ljg4ODE2NjMgMTI4LjIxMTk4NzEtNDcuODg4MTY2MyAxNzcuMTIzMjA5MSAwbDUuODg2NTQ1IDUuNzYzNDE3NGMyLjQ0NTU2MSAyLjM5NDQwODEgMi40NDU1NjEgNi4yNzY1MTEyIDAgOC42NzA5MjA0bC0yMC4xMzY2OTUgMTkuNzE1NTAzYy0xLjIyMjc4MSAxLjE5NzIwNTEtMy4yMDUzIDEuMTk3MjA1MS00LjQyODA4MSAwbC04LjEwMDU4NC03LjkzMTE0NzljLTM0LjEyMTY5Mi0zMy40MDc5ODE3LTg5LjQ0Mzg4Ni0zMy40MDc5ODE3LTEyMy41NjU1Nzg4IDBsLTguNjc1MDU2MiA4LjQ5MzYwNTFjLTEuMjIyNzgxNiAxLjE5NzIwNDEtMy4yMDUzMDEgMS4xOTcyMDQxLTQuNDI4MDgwNiAwbC0yMC4xMzY2OTQ5LTE5LjcxNTUwMzFjLTIuNDQ1NTYxMi0yLjM5NDQwOTItMi40NDU1NjEyLTYuMjc2NTEyMiAwLTguNjcwOTIwNHptMjE4Ljc2Nzc5NjEgNDAuNzczNzQ0OSAxNy45MjE2OTcgMTcuNTQ2ODk3YzIuNDQ1NTQ5IDIuMzk0Mzk2OSAyLjQ0NTU2MyA2LjI3NjQ3NjkuMDAwMDMxIDguNjcwODg5OWwtODAuODEwMTcxIDc5LjEyMTEzNGMtMi40NDU1NDQgMi4zOTQ0MjYtNi40MTA1ODIgMi4zOTQ0NTMtOC44NTYxNi4wMDAwNjItLjAwMDAxLS4wMDAwMS0uMDAwMDIyLS4wMDAwMjItLjAwMDAzMi0uMDAwMDMybC01Ny4zNTQxNDMtNTYuMTU0NTcyYy0uNjExMzktLjU5ODYwMi0xLjYwMjY1LS41OTg2MDItMi4yMTQwNCAwLS4wMDAwMDQuMDAwMDA0LS4wMDAwMDcuMDAwMDA4LS4wMDAwMTEuMDAwMDExbC01Ny4zNTI5MjEyIDU2LjE1NDUzMWMtMi40NDU1MzY4IDIuMzk0NDMyLTYuNDEwNTc1NSAyLjM5NDQ3Mi04Ljg1NjE2MTIuMDAwMDg3LS4wMDAwMTQzLS4wMDAwMTQtLjAwMDAyOTYtLjAwMDAyOC0uMDAwMDQ0OS0uMDAwMDQ0bC04MC44MTI0MTk0My03OS4xMjIxODVjLTIuNDQ1NTYwMjEtMi4zOTQ0MDgtMi40NDU1NjAyMS02LjI3NjUxMTUgMC04LjY3MDkxOTdsMTcuOTIxNzI5NjMtMTcuNTQ2ODY3M2MyLjQ0NTU2MDItMi4zOTQ0MDgyIDYuNDEwNTk4OS0yLjM5NDQwODIgOC44NTYxNjAyIDBsNTcuMzU0OTc3NSA1Ni4xNTUzNTdjLjYxMTM5MDguNTk4NjAyIDEuNjAyNjQ5LjU5ODYwMiAyLjIxNDAzOTggMCAuMDAwMDA5Mi0uMDAwMDA5LjAwMDAxNzQtLjAwMDAxNy4wMDAwMjY1LS4wMDAwMjRsNTcuMzUyMTAzMS01Ni4xNTUzMzNjMi40NDU1MDUtMi4zOTQ0NjMzIDYuNDEwNTQ0LTIuMzk0NTUzMSA4Ljg1NjE2MS0uMDAwMi4wMDAwMzQuMDAwMDMzNi4wMDAwNjguMDAwMDY3My4wMDAxMDEuMDAwMTAxbDU3LjM1NDkwMiA1Ni4xNTU0MzJjLjYxMTM5LjU5ODYwMSAxLjYwMjY1LjU5ODYwMSAyLjIxNDA0IDBsNTcuMzUzOTc1LTU2LjE1NDMyNDljMi40NDU1NjEtMi4zOTQ0MDkyIDYuNDEwNTk5LTIuMzk0NDA5MiA4Ljg1NjE2IDB6IiBmaWxsPSIjM2I5OWZjIi8+PC9zdmc+"),W.set(this,null),f.set(this,(a,e)=>(SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,M,"f")[a]||(SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,M,"f")[a]=[]),SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,M,"f")[a].push(e),()=>SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,d,"m",D).call(this,a,e))),g.set(this,()=>{let a=this.accounts[0],e=a?.publicKey;e&&(SolanaWalletConnectStandardWallet_classPrivateFieldSet(this,W,new WalletConnectAccount(a),"f"),SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,d,"m",v).call(this,"change",{accounts:this.accounts}))}),T.set(this,()=>{SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,W,"f")&&(SolanaWalletConnectStandardWallet_classPrivateFieldSet(this,W,null,"f"),SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,d,"m",v).call(this,"change",{accounts:this.accounts}))}),p.set(this,()=>{SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,u,"f").session?.namespaces?.solana?.accounts.length?SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,g,"f").call(this):SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,T,"f").call(this)}),N.set(this,async()=>(SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,W,"f")||(z.RouterController.push("ConnectingWalletConnect"),await SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,u,"f").connect({namespaces:[m.G.DEFAULT_CHAIN].reduce((a,e)=>{let{id:t,chainNamespace:n,rpcUrls:l}=e,s=l.default.http[0];a[n]||(a[n]={methods:F[n]||[],events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}});let i=`${n}:${t}`,r=a[n];switch(r?.chains.push(i),i){case L.mainnet:r.chains.push(L.deprecatedMainnet);break;case L.devnet:r.chains.push(L.deprecatedDevnet)}return r?.rpcMap&&s&&(r.rpcMap[t]=s),a},{})})),SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,g,"f").call(this),{accounts:this.accounts})),A.set(this,async()=>{await SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,u,"f").disconnect()}),C.set(this,async(...a)=>{if(!SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,W,"f"))throw Error("not connected");let e=[];if(1===a.length){let{transaction:t,account:n,chain:l,options:s}=a[0]||{},{minContextSlot:i,preflightCommitment:r,skipPreflight:o,maxRetries:c}=s||{};if(n?.address!==SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,W,"f")?.address)throw Error("invalid account");if(!isSolanaChain(l||":"))throw Error("invalid chain");if(!t)throw Error("invalid transaction");let d=await SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,u,"f").request({method:"solana_signAndSendTransaction",params:{transaction:t,pubkey:SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,W,"f").address,sendOptions:{preflightCommitment:r,minContextSlot:i,maxRetries:c,skipPreflight:o}}});e.push({signature:P.decode(d.signature)})}else if(a.length>1){let t=await Promise.all(a.map(a=>SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,C,"f").call(this,a)));for(let a of t)e.push(...a)}return e}),_.set(this,async(...a)=>{if(!SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,W,"f"))throw Error("not connected");let e=[];if(1===a.length){let t;let{transaction:n,account:l,chain:s}=a[0]||{};if(l?.address!==SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,W,"f").address)throw Error("invalid account");if(s&&!isSolanaChain(s))throw Error("invalid chain");if(!n)throw Error("invalid transaction");let i=y.YW.from(n),r=await SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,u,"f").request({method:"solana_signTransaction",params:{transaction:n,pubkey:SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,W,"f").address}});if("signature"in r){let a=P.decode(r.signature);i.addSignature(new y.nh(SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,W,"f").publicKey),I.from(a)),t=i}else{let a=I.from(r.transaction,"base64");isVersionedTransaction(i)&&(t=y.GS.deserialize(new Uint8Array(a))),t=y.YW.from(a)}if(!t)throw Error("invalid transaction");let o=isVersionedTransaction(t)?t.serialize():new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}));e.push({signedTransaction:o})}else if(a.length>1){let t;for(let e of a){if(e.account?.address!==SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,W,"f").address)throw Error("invalid account");if(e.chain){if(!isSolanaChain(e.chain))throw Error("invalid chain");if(t&&e.chain!==t)throw Error("conflicting chain");t=e.chain}}let n=a.map(({transaction:a})=>y.GS.deserialize(a)),l=await SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,u,"f").request({method:"solana_signAllTransactions",params:{transactions:n}}),s=l.transactions.map((a,e)=>{let t=n[e];if(!t)throw Error("Invalid transactions response");let l=I.from(a,"base64");return isVersionedTransaction(t)?y.GS.deserialize(new Uint8Array(l)):y.YW.from(l)});e.push(...s.map(a=>{let e=isVersionedTransaction(a)?a.serialize():new Uint8Array(a.serialize({requireAllSignatures:!1,verifySignatures:!1}));return{signedTransaction:e}}))}return e}),j.set(this,async(...a)=>{if(!SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,W,"f"))throw Error("not connected");let e=[];if(1===a.length){let{message:t,account:n}=a[0]||{};if(n?.address!==SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,W,"f").address)throw Error("invalid account");if(!t)throw Error("invalid message");let l=await SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,u,"f").request({method:"solana_signMessage",params:{message:t,pubkey:SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,W,"f").address}});e.push({signedMessage:t,signature:P.decode(l.signature)})}else if(a.length>1){let t=await Promise.all(a.map(a=>SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,j,"f").call(this,a)));for(let a of t)e.push(...a)}return e}),SolanaWalletConnectStandardWallet_classPrivateFieldSet(this,u,a,"f"),this.setProvider(a),registerWallet(this)}setProvider(a){SolanaWalletConnectStandardWallet_classPrivateFieldSet(this,u,a,"f"),SolanaWalletConnectStandardWallet_classPrivateFieldSet(this,w,"WalletConnect","f"),a.on("connect",()=>SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,g,"f").call(this)),a.on("disconnect",()=>SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,T,"f").call(this)),a.on("accountsChanged",()=>SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,p,"f").call(this)),a.on("chainChanged",()=>SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,p,"f").call(this)),SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,g,"f").call(this)}};M=new WeakMap,h=new WeakMap,u=new WeakMap,w=new WeakMap,S=new WeakMap,W=new WeakMap,f=new WeakMap,g=new WeakMap,T=new WeakMap,p=new WeakMap,N=new WeakMap,A=new WeakMap,C=new WeakMap,_=new WeakMap,j=new WeakMap,d=new WeakSet,v=function(a,...e){SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,M,"f")[a]?.forEach(a=>a.apply(null,e))},D=function(a,e){SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,M,"f")[a]=SolanaWalletConnectStandardWallet_classPrivateFieldGet(this,M,"f")[a]?.filter(a=>e!==a)}}}]);