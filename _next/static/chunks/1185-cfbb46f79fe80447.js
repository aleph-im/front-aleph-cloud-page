"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1185],{35616:function(e,t,n){n.d(t,{Z:function(){return LogsFeed}});var r=n(85893),a=n(19521),i=n(79632),o=n(77541),l=n(45866);function LogsFeed(e){let{logs:t}=e,n=!(null==t?void 0:t.stdout)&&!(null==t?void 0:t.stderr);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.DU,{type:"h7",as:"h2",color:"main0",children:"Stdout"}),(0,r.jsxs)(s,{children:[(0,r.jsx)(l.Z,{show:n,color:"white"}),(0,r.jsx)(u,{readOnly:!0,name:"stdout",placeholder:n?"Loading logs...":"No Stdout logs found",value:null==t?void 0:t.stdout,variant:"code"})]}),(0,r.jsx)(o.Z,{}),(0,r.jsx)(i.DU,{type:"h7",as:"h2",color:"main0",children:"Stderr"}),(0,r.jsxs)(c,{children:[(0,r.jsx)(l.Z,{show:n,color:"white"}),(0,r.jsx)(d,{readOnly:!0,name:"stderr",placeholder:n?"Loading logs...":"No Stderr logs found",value:null==t?void 0:t.stderr,variant:"code"})]})]})}var s=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1x5rn77-0"})({position:"relative",borderRadius:"0.75rem"}),u=(0,a.ZP)(i.Kx).withConfig({displayName:"cmp___StyledTextArea",componentId:"sc-1x5rn77-1"})({height:"30rem"}),c=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-1x5rn77-2"})({position:"relative",borderRadius:"0.75rem"}),d=(0,a.ZP)(i.Kx).withConfig({displayName:"cmp___StyledTextArea2",componentId:"sc-1x5rn77-3"})({height:"30rem"})},45866:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(85893),a=n(67294),i=n(79632),o=n(19521);let l=o.ZP.div.withConfig({displayName:"styles__StyledSpinnerContainer",componentId:"sc-1ktdfah-0"})(["",""],e=>{let{theme:t,$fullScreen:n,$show:r,$center:a}=e;return(0,o.iv)([""," position:",";backdrop-filter:blur(3px);border-radius:inherit;opacity:",";align-items:",";padding-top:",";z-index:99;transition:all ease-in-out 250ms 250ms;background-color:","0C;"],{inset:"0px",display:"flex",height:"100%",minHeight:"11rem",justifyContent:"center",paddingTop:"2.5rem",paddingBottom:"2.5rem"},n?"fixed":"absolute",r?"1":"0",a?"center":"flex-start",a?"2.5rem":"6rem",t.color.contentBackground)});var s=n(73935);let SpinnerOverlay=e=>{let{show:t,center:n=!1,fullScreen:a=!1,color:u="main0",...c}=e,{shouldMount:d,stage:h}=(0,i.Yz)(t,500),m=(0,o.Fg)();u=m.color[u]||u;let v=(0,r.jsx)(r.Fragment,{children:d&&(0,r.jsx)(l,{$show:"enter"===h,$center:n,$fullScreen:a,children:(0,r.jsx)(i.$j,{color:u,...c})})});return(0,r.jsx)(r.Fragment,{children:a&&"object"==typeof document?(0,s.createPortal)(v,document.body):v})};SpinnerOverlay.displayName="SpinnerOverlay";var u=(0,a.memo)(SpinnerOverlay)},57125:function(e,t,n){n.d(t,{y:function(){return useExecutableActions}});var r=n(67294),a=n(79632),i=n(68885),o=n(50586),l=n(36286),s=n(25819),u=n(9754),c=n(72036),d=n(49107),h=n(99978),m=n(86780),v=n(9324),f=n(36541),p=n(11163),y=n(85704),g=n(62283),w=n(82169);let StaticEVMAccount=class StaticEVMAccount extends g.TM{getChainMetadata(){let e=this.chain===s.Ek.AVAX?g.Nd.AVAX:this.chain===s.Ek.BASE?g.Nd.BASE:void 0;if(!e)throw Error("Invalid RPC network");return g.l2[e]}async getChainId(){let e=this.getChain();return s.DR[e].chainId}getChain(){return this.chain}async askPubKey(){}async sign(){return""}constructor(e,t){super(e),this.address=e,this.chain=t,this.wallet=Object.create(g.u6.prototype),this.wallet.connect=async()=>void 0,this.wallet.getCurrentChainId=async()=>this.getChainId();let{rpcUrls:n,chainName:r,chainId:a}=this.getChainMetadata(),i=new w.r(n.at(0),{name:r,chainId:(0,g.RW)(a)});this.wallet.provider=i}};var S=n(9911);function useExecutableActions(e){var t,n;let{manager:g,executable:w,subscribeLogs:x}=e,b=(null==w?void 0:null===(t=w.payment)||void 0===t?void 0:t.type)===l.uG.superfluid,C=null==w?void 0:w.id,k=function(e){let{executable:t,manager:n}=e,[a,i]=(0,r.useState)(void 0);return(0,r.useEffect)(()=>{if(!n||!t||a)return;async function request(){if(!n||!t)return;let e=await n.checkStatus(t);console.log("useExecutableStatus - status",e),i(e)}a||request();let e=setInterval(request,1e4);return()=>clearInterval(e)},[a,t,n]),a}({executable:w,manager:g}),[N,Z]=(0,u.mr)(),{account:j,blockchain:I}=N.connection,{dispatchDeleteEntity:E}=(0,f.w)({entityName:(null==w?void 0:w.type)||""}),M=(0,a.lm)(),[_,A]=(0,r.useState)();(0,r.useEffect)(()=>{let e=!1;return async function(){if(A(void 0),!g||!w)return;let t=await g.getAllocationCRN(w);e||A(t)}(),()=>{e=!0}},[w,g]);let P=(0,r.useMemo)(()=>{if(_)return{name:_.name||_.hash,url:_.address||""}},[_]),R=(0,r.useMemo)(()=>{let{url:e=""}=P||{};return i.B.normalizeUrl(e)},[P]),D=(0,r.useCallback)(e=>{if(!e||e===I)return;let t=s.DR[e];return(null==t?void 0:t.name)||e.toString()},[I]),F=(0,r.useCallback)(async e=>{try{if(!g)throw o.Z.ConnectYourWallet;if(!R||!C)throw o.Z.InvalidNode;await g.sendPostOperation({hostname:R,operation:e,vmId:C})}catch(e){null==M||M.add({variant:"error",title:"Error",text:null==e?void 0:e.message})}},[g,R,M,C]),O=(0,r.useCallback)(async()=>{if(!g)throw o.Z.ConnectYourWallet;if(!w)throw o.Z.InstanceNotFound;if(!b)throw o.Z.StreamNotSupported;try{var e;let t=null===(e=w.payment)||void 0===e?void 0:e.chain,n=D(t);if(n)throw o.Z.NetworkMismatch(n);if(b&&!(0,y.G)(j)||!_)throw o.Z.ConnectYourPaymentWallet;b&&await g.notifyCRNAllocation(_,w.id)}catch(e){null==M||M.add({variant:"error",title:"Error",text:null==e?void 0:e.message})}},[_,w,b,g,M,D,j]),K=!!(null==k?void 0:k.ipv6Parsed),W=!b||!K||!_,q=!b||K||!_,H=!K||!_,Y=!w,$=(0,r.useCallback)(()=>F("stop"),[F]),B=(0,r.useCallback)(()=>F("reboot"),[F]),G=function(e){let{nodeUrl:t,vmId:n,tail:i=100,subscribe:o=!0}=e,l=(0,h.U)(),[s,u]=(0,r.useState)([]),[c,m]=(0,r.useState)([]),v=(0,a.$P)(s,200),f=(0,a.$P)(c,200),p=(0,r.useMemo)(()=>v.join("\n"),[v]),y=(0,r.useMemo)(()=>f.join("\n"),[f]),g=(0,r.useMemo)(()=>!l||!t||!n,[l,t,n]);return(0,r.useEffect)(()=>{let e=new d.ol,subscribeFeed=async()=>{if(!o||!l||!t||!n)return;let r=l.subscribeLogs({abort:e.promise,vmId:n,hostname:t});try{for await(let e of r){let t="stdout"===e.type?u:m;t(t=>{let n=t.concat(e.message);return n.slice(Math.max(n.length-i,0))})}}catch(e){console.error(e)}};return subscribeFeed(),()=>e.resolve()},[l,t,n,i,o]),g?void 0:{stdout:p,stderr:y}}({nodeUrl:R,vmId:C,subscribe:x}),L=(0,p.useRouter)(),{next:U,stop:T}=(0,m.A)({}),V=(0,r.useCallback)(async()=>{if(!g)throw o.Z.ConnectYourWallet;if(!w)throw o.Z.InstanceNotFound;try{var e,t;let n=w.chain||(null===(e=w.payment)||void 0===e?void 0:e.chain),r=(null===(t=w.payment)||void 0===t?void 0:t.type)===l.uG.superfluid,a=D(n);if(a)throw o.Z.NetworkMismatch(a);if(r&&!(0,y.G)(j))throw o.Z.ConnectYourPaymentWallet;let i=r?await (0,c.OH)(j):void 0;E(w.id);try{let e=await g.getDelSteps(w),t=e.map(e=>m.n[e]),n=g.delSteps(w,i);for(;;){let{done:e}=await n.next();if(e)break;await U(t)}}catch(e){throw Z(new v.Wy({name:w.type,entities:[w]})),e}await L.replace(S.cr.console.home)}catch(r){console.error(r);let e=r.message,t=null==r?void 0:r.cause,n="string"==typeof t?t:null==t?void 0:t.message;null==M||M.add({variant:"error",title:"Error",text:e,detail:n})}finally{await T()}},[E,Z,w,g,U,L,T,M,j,D]),z=null==w?void 0:w.address,X=null==w?void 0:null===(n=w.payment)||void 0===n?void 0:n.chain,{data:J}=(0,a.GO)({doRequest:async()=>{if(!g||!w||!b||!z||!X)return;let e=new StaticEVMAccount(z,X);return g.getStreamPaymentDetails(w,e)},onSuccess:()=>null,flushData:!0,triggerOnMount:!0,triggerDeps:[null==w?void 0:w.id,b,z,X]});return{logs:G,nodeDetails:P,streamDetails:J,status:k,isAllocated:K,stopDisabled:W,startDisabled:q,rebootDisabled:H,deleteDisabled:Y,logsDisabled:!G,handleStop:$,handleStart:O,handleReboot:B,handleDelete:V}}},99978:function(e,t,n){n.d(t,{U:function(){return useInstanceManager}});var r=n(9754);function useInstanceManager(){let[e]=(0,r.mr)(),{instanceManager:t}=e.manager;return t}},18395:function(e,t,n){n.d(t,{p:function(){return useSSHKeyManager}});var r=n(9754);function useSSHKeyManager(){let[e]=(0,r.mr)(),{sshKeyManager:t}=e.manager;return t}},68091:function(e,t,n){n.d(t,{X:function(){return useRequestSSHKeys}});var r=n(18395),a=n(77205);function useRequestSSHKeys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.p)();return(0,a.F)({...e,manager:t,name:"ssh"})}}}]);