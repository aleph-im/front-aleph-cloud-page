"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1514],{32424:function(e,n,i){i.d(n,{Z:function(){return j}});var t=i(85893),r=i(57833),l=i(67294),s=i(73899),a=i(28540),o=i(76696),d=i(77541),c=i(14685),u=i(11163),m=i(18395),p=i(68091),x=i(36541),h=i(50586),v=i(86780),f=i(9911),y=i(47104);let SSHKeyDetail=e=>{let{sshKeyId:n,showDelete:i=!1}=e,{sshKey:j,theme:F,handleCopyKey:T,handleCopyLabel:_,handleDelete:H}=function(e){let{sshKeyId:n}=e,i=(0,r.Fg)(),t=(0,u.useRouter)(),{dispatchDeleteEntity:a}=(0,x.w)({entityName:"ssh"}),{entities:o}=(0,p.X)({ids:n}),[d]=o||[],c=(0,s.vx)((null==d?void 0:d.label)||""),f=(0,s.vx)((null==d?void 0:d.key)||""),y=(0,m.p)(),{next:j,stop:g,noti:P}=(0,v.A)({}),Z=(0,l.useCallback)(async()=>{if(!y)throw h.Z.ConnectYourWallet;if(!d)throw h.Z.SSHKeyNotFound;let e=await y.getDelSteps(d),n=e.map(e=>v.n[e]),i=y.delSteps(d);try{for(;;){let{done:e}=await i.next();if(e)break;await j(n)}a(d.id),await t.replace("/console")}catch(t){console.error(t);let e=t.message,n=null==t?void 0:t.cause,i="string"==typeof n?n:null==n?void 0:n.message;null==P||P.add({variant:"error",title:"Error",text:e,detail:i})}finally{await g()}},[a,y,d,j,t,g,P]);return{sshKey:d,theme:i,handleCopyLabel:c,handleCopyKey:f,handleDelete:Z}}({sshKeyId:n});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(g,{children:[(0,t.jsxs)(P,{children:[(0,t.jsx)(Z,{name:"key",className:"text-main0"}),(0,t.jsx)("div",{className:"tp-body2",children:j?j.label||(0,c.zN)(j.id):(0,t.jsx)(y.Z,{width:"10rem"})}),(0,t.jsx)(S,{kind:"secondary",variant:(null==j?void 0:j.confirmed)?"success":"warning",children:j?j.confirmed?"READY":(0,t.jsxs)(w,{children:[(0,t.jsx)(b,{children:"CONFIRMING"}),(0,t.jsx)(a.s5,{strokeColor:F.color.base2,width:".8rem"})]}):"LOADING"})]}),(0,t.jsx)("div",{children:i&&(0,t.jsx)(s.zx,{kind:"functional",variant:"error",size:"md",onClick:H,children:(0,t.jsx)(s.JO,{name:"trash"})})})]}),(0,t.jsxs)(s.Jy,{children:[(0,t.jsxs)(C,{children:[(0,t.jsx)(k,{variant:"accent",children:j?f.K_[j.type]:(0,t.jsx)(y.Z,{width:"5rem",height:"1.3rem"})}),(0,t.jsxs)(N,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"KEY"}),(0,t.jsx)(o.Z,{iconName:"copy",onClick:T,children:j?j.key:(0,t.jsx)(y.Z,{width:"12rem"})})]})]}),(0,t.jsx)(d.Z0,{}),(null==j?void 0:j.label)&&(0,t.jsxs)(E,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"LABEL"}),(0,t.jsx)("div",{children:(0,t.jsx)(o.Z,{iconName:"copy",onClick:_,children:(0,t.jsx)(d.xv,{children:null==j?void 0:j.label})})})]}),(0,t.jsxs)(I,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"EXPLORER"}),(0,t.jsx)("div",{children:j?(0,t.jsx)("a",{className:"tp-body1 fs-16",href:j.url,target:"_blank",referrerPolicy:"no-referrer",children:(0,t.jsx)(o.Z,{iconName:"square-up-right",children:(0,t.jsx)(d.xv,{children:(0,c.bs)(j.url,80)})})}):(0,t.jsx)(y.Z,{width:"10rem"})})]}),(0,t.jsxs)(D,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"CREATED ON"}),(0,t.jsx)("div",{children:(0,t.jsx)(d.xv,{className:"fs-10 tp-body1",children:j?j.date:(0,t.jsx)(y.Z,{width:"4rem"})})})]})]})]})};SSHKeyDetail.displayName="SSHKeyDetail";var j=(0,l.memo)(SSHKeyDetail),g=(0,r.ZP)("div")({display:"flex",justifyContent:"space-between",paddingBottom:"1.25rem"}),P=(0,r.ZP)("div")({display:"flex",alignItems:"center"}),Z=(0,r.ZP)(s.JO)({marginRight:"1rem"}),S=(0,r.ZP)(s.__)({marginLeft:"1rem"}),w=(0,r.ZP)("div")({display:"flex",alignItems:"center"}),b=(0,r.ZP)("div")({marginRight:"0.5rem"}),C=(0,r.ZP)("div")({display:"flex",alignItems:"center",justifyContent:"flex-start",overflow:"hidden"}),k=(0,r.ZP)(s.Vp)({marginRight:"1rem",whiteSpace:"nowrap"}),N=(0,r.ZP)("div")({flex:"1 1 auto"}),E=(0,r.ZP)("div")({marginTop:"1.25rem",marginBottom:"1.25rem"}),I=(0,r.ZP)("div")({marginTop:"1.25rem",marginBottom:"1.25rem"}),D=(0,r.ZP)("div").withConfig({displayName:"cmp___StyledDiv9",componentId:"sc-1leuqyp-0"})({marginTop:"1.25rem",marginBottom:"1.25rem"})},45806:function(e,n,i){i.d(n,{Z:function(){return u}});var t=i(85893),r=i(57833),l=i(67294),s=i(73899),a=i(47104),o=i(77541),d=i(76696),c=i(33697);let EntityConnectionMethods=e=>{let{executableStatus:n,sshForwardedPort:i}=e,{isLoading:r,formattedIPv4:u,formattedIPv6:h,formattedIpv4SSHCommand:v,formattedIpv6SSHCommand:f,handleCopyIpv4:y,handleCopyIpv6:j,handleCopyIpv4Command:g,handleCopyIpv6Command:P}=function(e){let{executableStatus:n,sshForwardedPort:i="????"}=e,t=!n,r=(0,l.useMemo)(()=>(null==n?void 0:n.ipv6Parsed)||"",[null==n?void 0:n.ipv6Parsed]),a=(0,l.useMemo)(()=>(null==n?void 0:n.hostIpv4)||"",[null==n?void 0:n.hostIpv4]),o=(0,l.useMemo)(()=>"ssh root@".concat(a," -p ").concat(i),[a,i]),d=(0,l.useMemo)(()=>"ssh root@".concat(r),[r]),c=(0,s.vx)(a),u=(0,s.vx)(r),m=(0,s.vx)(o),p=(0,s.vx)(d);return{isLoading:t,formattedIPv6:r,formattedIPv4:a,formattedIpv4SSHCommand:o,formattedIpv6SSHCommand:d,handleCopyIpv6:u,handleCopyIpv4:c,handleCopyIpv4Command:m,handleCopyIpv6Command:p}}({executableStatus:n,sshForwardedPort:i}),[Z,S]=l.useState("ipv4");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m,{className:"tp-h7 fs-24",children:"CONNECTION METHODS"}),(0,t.jsx)(s.Jy,{children:(0,t.jsxs)(p,{children:[(0,t.jsx)(x,{selected:Z,onTabChange:()=>{S("ipv4"===Z?"ipv6":"ipv4")},align:"left",tabs:[{id:"ipv4",name:"ipv4"},{id:"ipv6",name:"ipv6"}]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Z,{children:"SSH COMMAND"}),(0,t.jsx)("div",{children:r?(0,t.jsx)(a.Z,{width:"20rem"}):(0,t.jsx)(d.Z,{iconName:"copy",onClick:()=>{"ipv4"===Z?g():P()},children:(0,t.jsxs)(o.xv,{children:[">_"," ","ipv4"===Z?v:f]})})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Z,{children:"ipv4"===Z?"IPV4":"IPV6"}),(0,t.jsx)("div",{children:r?(0,t.jsx)(a.Z,{width:"10rem"}):(0,t.jsx)(d.Z,{iconName:"copy",onClick:()=>{"ipv4"===Z?y():j()},children:(0,t.jsx)(o.xv,{children:"ipv4"===Z?u:h})})})]})]})})]})};EntityConnectionMethods.displayName="EntityConnectionMethods";var u=(0,l.memo)(EntityConnectionMethods),m=(0,r.ZP)("div")({marginBottom:"0.5rem",textTransform:"uppercase"}),p=(0,r.ZP)("div")({display:"flex",flexDirection:"column",gap:"1rem"}),x=(0,r.ZP)(s.mQ).withConfig({displayName:"cmp___StyledTabs",componentId:"sc-1tccgtt-0"})({marginTop:"-0.75rem",overflow:"hidden"})},88246:function(e,n,i){i.d(n,{Z:function(){return I}});var t=i(85893),r=i(57833),l=i(67294),s=i(73899),a=i(77541),o=i(33697),d=i(68885),c=i(27664),u=i(9754),m=i(71251),p=i(87536),x=i(45901),h=i(56312),v=i(24959);let f={ports:[{port:"",udp:!1,tcp:!1}]},y=x.Ry({port:x.Z_().min(1,"Port is required").refine(e=>{let n=parseInt(e,10);return!isNaN(n)&&n>0&&n<=65535},"Port must be between 1 and 65535"),tcp:x.O7(),udp:x.O7()}).refine(e=>e.tcp||e.udp,"At least one protocol (TCP or UDP) must be selected"),j=x.Ry({ports:x.IX(y).min(1,"At least one port is required")}),g=l.memo(e=>{let{portCtrl:n,tcpCtrl:i,udpCtrl:r,handleRemove:o}=function(e){let{name:n="ports",index:i,control:t,onRemove:r}=e,s=(0,p.bc)({control:t,name:"".concat(n,".").concat(i,".port")}),a=(0,p.bc)({control:t,name:"".concat(n,".").concat(i,".tcp")}),o=(0,p.bc)({control:t,name:"".concat(n,".").concat(i,".udp")}),d=(0,l.useCallback)(()=>{r(i)},[i,r]);return{portCtrl:s,tcpCtrl:a,udpCtrl:o,handleRemove:d}}(e);return(0,t.jsxs)(Z,{children:[(0,t.jsxs)(S,{children:[(0,t.jsx)(a.xv,{children:"Port"}),(0,t.jsx)(s.oi,{...n.field,...n.fieldState,placeholder:"8080",required:!0,width:"6em",textAlign:"center"})]}),(0,t.jsxs)(w,{children:[(0,t.jsx)(a.xv,{children:"TCP"}),(0,t.jsx)(s.XZ,{...i.field,...i.fieldState})]}),(0,t.jsxs)(b,{children:[(0,t.jsx)(a.xv,{children:"UDP"}),(0,t.jsx)(s.XZ,{...r.field,...r.fieldState})]}),(0,t.jsx)(C,{children:(0,t.jsx)(s.zx,{type:"button",variant:"warning",kind:"functional",onClick:o,children:(0,t.jsx)(s.JO,{name:"trash-xmark"})})})]})});g.displayName="PortItem";let AddPortForm=e=>{let{onSubmit:n,onCancel:i}=e,{name:r,control:a,handleSubmit:o,fields:d,addPortField:c,removePortField:u}=function(e){let{onSubmit:n,onCancel:i}=e,t="ports",r=(0,l.useCallback)(async e=>{n(e.ports)},[n]),{control:s,handleSubmit:a}=(0,v.c)({defaultValues:f,resolver:(0,h.F)(j),onSubmit:r}),{fields:o,append:d,remove:c}=(0,p.Dq)({control:s,name:t,shouldUnregister:!0}),u=(0,l.useCallback)(()=>{d({port:"",tcp:!1,udp:!1})},[d]),m=(0,l.useCallback)(e=>{o.length>1?c(e):i()},[c,o.length,i]);return{name:t,control:s,fields:o,handleSubmit:a,addPortField:u,removePortField:m}}({onSubmit:n,onCancel:i});return(0,t.jsxs)(k,{onSubmit:o,children:[d.map((e,n)=>(0,t.jsx)(g,{name:r,index:n,control:a,onRemove:u},e.id)),(0,t.jsxs)(N,{children:[(0,t.jsx)(s.zx,{type:"button",variant:"secondary",kind:"gradient",onClick:c,children:"Add Port"}),(0,t.jsx)(s.zx,{type:"submit",variant:"primary",kind:"gradient",children:"Save"})]})]})};AddPortForm.displayName="AddPortForm";var P=(0,l.memo)(AddPortForm),Z=(0,r.ZP)("div")({display:"flex",flexWrap:"wrap",alignItems:"center",gap:"1.5rem"}),S=(0,r.ZP)("div")({display:"flex",flexDirection:"column",gap:"0.75rem"}),w=(0,r.ZP)("div")({display:"flex",flexDirection:"column",gap:"0.75rem"}),b=(0,r.ZP)("div")({display:"flex",flexDirection:"column",gap:"0.75rem"}),C=(0,r.ZP)("div")({alignSelf:"flex-end"}),k=(0,r.ZP)("form")({display:"flex",flexDirection:"column",rowGap:"1rem"}),N=(0,r.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-25x9d1-0"})({marginTop:"1rem",display:"flex",gap:"0.5rem"}),E=i(21836);let EntityPortForwarding=e=>{let{entityHash:n,executableStatus:i,executableManager:r,ports:p,onPortsChange:x}=e,{showPortForm:h,handleAddPort:v,handleCancelAddPort:f,handleRemovePort:y,handleSubmitNewPorts:j}=function(e){let{entityHash:n,executableStatus:i,executableManager:t,ports:r,onPortsChange:s}=e,[a]=(0,u.mr)(),{account:o}=a.connection,p=null==o?void 0:o.address,[x,h]=(0,l.useState)(!1),[v,f]=(0,l.useState)(!1),[y,j]=(0,l.useState)(null),g=(0,l.useCallback)(e=>{let n=[...r,...e];null==s||s(n),h(!1),j(null)},[r,s]),P=(0,l.useCallback)(e=>{let n=r.filter(n=>n.source!==e);null==s||s(n),j(null)},[r,s]),Z=(0,l.useCallback)((e,n)=>{let i=r.map(i=>i.source===e?{...i,isRemoving:n}:i);null==s||s(i)},[r,s]),S=(0,l.useCallback)(e=>{let n=e(r);null==s||s(n)},[r,s]),w=(0,l.useCallback)(e=>{h(void 0!==e?e:e=>!e)},[]),{notifyCRNUpdate:b,scheduleNotifyCRNUpdate:C}=function(e,n,i){let t=(0,l.useRef)(),r=(0,l.useCallback)(async()=>{if(i&&e&&(null==n?void 0:n.node))try{let t=d.B.normalizeUrl(n.node.address||"");if(!t)return;await i.sendPostOperation({hostname:t,operation:"update",vmId:e,requireSignature:!1})}catch(e){console.error("Failed to notify CRN about port changes:",e)}},[i,e,null==n?void 0:n.node]),s=(0,l.useCallback)(()=>{t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{r()},m.If)},[r]);return(0,l.useEffect)(()=>()=>{t.current&&clearTimeout(t.current)},[]),{notifyCRNUpdate:r,scheduleNotifyCRNUpdate:s}}(n,i,t),{addPorts:k,removePort:N}=function(e,n,i,t,r,s,a,o,d){let u=(0,c.C)(),p=(0,l.useCallback)(async l=>{if(!e||!n||!u||i)return;let o=(0,m.FM)(l);if(0===o.length){null==r||r("No valid ports to add (system ports are reserved)");return}let d=await u.getByEntityHash(e),c=(null==d?void 0:d.ports)?Object.keys(d.ports).length:0,p=(0,m.EJ)(o,c);if(!p.isValid){null==r||r(p.errors.join(", "));return}let x=await u.validatePortConflicts(e,o),h=(0,m.z0)(e,n),v=x.conflicts.filter(e=>{let n=parseInt(e,10);return!h.includes(n)});if(v.length>0){null==r||r("Ports already exist: ".concat(v.join(", ")));return}null==s||s(!0);try{await u.addMultiplePorts(e,o);let i=(0,m.Nw)(o);(0,m.Lx)(e,n,i);let r=o.map(e=>({source:e.port,destination:void 0,tcp:e.tcp,udp:e.udp,isDeletable:!0}));null==a||a(r),null==t||t()}catch(e){console.error("Failed to add ports:",e),null==r||r("Failed to add ports")}finally{null==s||s(!1)}},[e,n,u,i,t,r,s,a]),x=(0,l.useCallback)(async l=>{if(e&&n&&u&&!i){if((0,m.MH)(l)){null==r||r("Cannot remove system port ".concat(l));return}null==d||d(l,!0);try{await u.removePort(e,l),(0,m.Ln)(e,n,parseInt(l,10)),null==o||o(l),null==t||t()}catch(e){console.error("Failed to remove port:",e),null==r||r("Failed to remove port")}finally{null==d||d(l,!1)}}},[e,n,u,i,t,r,o,d]);return{addPorts:p,removePort:x}}(n,p,v,C,j,f,g,P,Z);!function(e,n,i,t,r,s){let a=(0,l.useRef)();(0,l.useEffect)(()=>{if(a.current&&clearInterval(a.current),!i||!e||!(null==n?void 0:n.node))return;let checkForUnmappedPorts=async()=>{try{if(!t||!(0,m.Fo)(t))return;await (null==r?void 0:r());let l=d.B.normalizeUrl(n.node.address||"");if(!l)return;let a={id:e,payment:n.node},o=await i.checkStatus(a);(null==o?void 0:o.mappedPorts)&&(null==s||s(e=>e.map(e=>{var n;let i=null===(n=o.mappedPorts)||void 0===n?void 0:n[e.source];return{...e,destination:null==i?void 0:i.host.toString()}})))}catch(e){console.error("Failed to poll for unmapped ports:",e)}};return a.current=setInterval(checkForUnmappedPorts,m.g_),()=>{a.current&&clearInterval(a.current)}},[i,e,null==n?void 0:n.node,t,r,s])}(n,i,t,r,b,S);let E=(0,l.useCallback)(()=>{w(!0)},[w]),I=(0,l.useCallback)(()=>{w(!1),j(null)},[w]),D=(0,l.useCallback)(async e=>{await N(e)},[N]),F=(0,l.useCallback)(async e=>{await k(e),y||w(!1)},[k,y,w]);return{showPortForm:x,isLoading:v,error:y,handleAddPort:E,handleCancelAddPort:I,handleRemovePort:D,handleSubmitNewPorts:F}}({entityHash:n,executableStatus:i,executableManager:r,ports:p,onPortsChange:x}),g=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D,{className:"tp-body3 fs-18 text-base2",children:"IPv4 Port Forwarding Details"}),(0,t.jsx)("p",{className:"tp-body2 fs-14",children:"Randomized Source Ports:"}),(0,t.jsx)("p",{className:"tp-body1 fs-14",children:"Source (external) ports are automatically assigned and may change whenever the instance or function is reallocated. Always refer to the instance detail page to verify current mappings."}),(0,t.jsx)(F,{className:"tp-body2 fs-14",children:"Port Limits:"}),(0,t.jsx)("p",{className:"tp-body1 fs-14",children:"You can specify up to 20 internal ports per instance or function. Ensure you enter ports relevant to your service to maintain effective network security and performance."})]});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T,{className:"tp-h7 fs-24",children:(0,t.jsx)(E.Z,{plain:!0,my:"top-right",at:"top-right",vAlign:"bottom",iconSize:"0.9em",tooltipContent:g,children:"IPV4 PORT FORWARDING"})}),(0,t.jsx)(s.Jy,{children:(0,t.jsxs)(_,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Z,{children:"CONFIGURED PORTS"}),(0,t.jsx)(a.xv,{children:"Maximum 20 ports allowed"})]}),p.map(e=>{let{source:n,destination:i,tcp:r,udp:l,isDeletable:o,isRemoving:d}=e;return(0,t.jsxs)(H,{children:[(0,t.jsxs)(M,{children:[(0,t.jsxs)(O,{children:[(0,t.jsx)(a.xv,{children:"Source"}),(0,t.jsx)(s.oi,{name:"source-port",dataView:!0,defaultValue:n,required:!0,width:"6em",textAlign:"center"})]}),(0,t.jsx)(A,{className:"text-main0 fs-18",children:"-"}),(0,t.jsxs)(R,{children:[(0,t.jsx)(a.xv,{children:"Destination"}),(0,t.jsx)(s.oi,{name:"destination-port",dataView:!0,defaultValue:i,required:!0,width:"6em",textAlign:"center",loading:!i})]})]}),(0,t.jsxs)(K,{children:[(0,t.jsxs)(z,{children:[(0,t.jsx)(a.xv,{children:"TCP"}),(0,t.jsx)(s.XZ,{disabled:!0,checked:r})]}),(0,t.jsxs)(B,{children:[(0,t.jsx)(a.xv,{children:"UDP"}),(0,t.jsx)(s.XZ,{disabled:!0,checked:l})]}),o&&(0,t.jsx)(G,{children:(0,t.jsx)(s.zx,{variant:"warning",kind:"functional",onClick:()=>y(n),disabled:!!d,children:(0,t.jsx)(s.JO,{name:d?"spinner":"trash-xmark",spin:d})})})]})]},"port-".concat(n))}),(0,t.jsx)(X,{children:h?(0,t.jsx)(P,{onSubmit:j,onCancel:f}):(0,t.jsx)(q,{children:(0,t.jsx)(s.zx,{variant:"secondary",kind:"gradient",onClick:v,children:"Add"})})})]})})]})};EntityPortForwarding.displayName="EntityPortForwarding";var I=(0,l.memo)(EntityPortForwarding),D=(0,r.ZP)("p")({marginBottom:"1rem"}),F=(0,r.ZP)("p")({marginTop:"1rem"}),T=(0,r.ZP)("div")({marginBottom:"0.5rem",display:"flex",alignItems:"center",textTransform:"uppercase"}),_=(0,r.ZP)("div")({display:"flex",flexDirection:"column",rowGap:"1rem"}),H=(0,r.ZP)("div")({display:"flex",flexWrap:"wrap",alignItems:"center",columnGap:"1.5rem",rowGap:"0.25rem"}),M=(0,r.ZP)("div")({display:"flex",alignItems:"center",gap:"1rem"}),O=(0,r.ZP)("div")({display:"flex",flexDirection:"column",gap:"0.75rem"}),A=(0,r.ZP)("div")({marginBottom:"0.75rem",alignSelf:"flex-end",fontWeight:"700"}),R=(0,r.ZP)("div")({display:"flex",flexDirection:"column",gap:"0.75rem"}),K=(0,r.ZP)("div")({display:"flex",alignItems:"center",gap:"1.5rem"}),z=(0,r.ZP)("div")({display:"flex",flexDirection:"column",gap:"0.75rem"}),B=(0,r.ZP)("div")({display:"flex",flexDirection:"column",gap:"0.75rem"}),G=(0,r.ZP)("div")({alignSelf:"flex-end"}),X=(0,r.ZP)("div")({marginTop:"0.5rem"}),q=(0,r.ZP)("div").withConfig({displayName:"cmp___StyledDiv11",componentId:"sc-12viyya-0"})({marginTop:"0.5rem"})},1131:function(e,n,i){i.d(n,{Z:function(){return m}});var t=i(85893),r=i(57833),l=i(67294),s=i(73899),a=i(47104),o=i(77541),d=i(29159),c=i(9911),u=i(33697);let EntitySSHKeys=e=>{let{sshKeys:n,onSSHKeyClick:i}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p,{className:"tp-h7 fs-24",children:"SSH KEYS"}),(0,t.jsx)(s.Jy,{children:(0,t.jsx)(x,{children:n.length?n.map(e=>e&&(0,t.jsxs)(d.Z,{onClick:()=>{i(e)},children:[(0,t.jsx)(h,{id:c.DA[c.py.SSHKey],color:"base2",size:"2.5rem"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Z,{children:"SSH KEY NAME"}),(0,t.jsx)(o.xv,{children:e.label})]}),(0,t.jsx)(v,{name:"eye",className:"openEntityIcon"})]},null==e?void 0:e.id)):(0,t.jsxs)(f,{children:[(0,t.jsx)(y,{id:c.DA[c.py.SSHKey],color:"main0",size:"2.5rem"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Z,{children:"SSH KEY NAME"}),(0,t.jsx)(o.xv,{children:(0,t.jsx)(a.Z,{width:"9rem"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Z,{children:"CREATED ON"}),(0,t.jsx)(o.xv,{children:(0,t.jsx)(a.Z,{width:"14rem"})})]})]})})})]})};EntitySSHKeys.displayName="EntitySSHKeys";var m=(0,l.memo)(EntitySSHKeys),p=(0,r.ZP)("div")({marginBottom:"0.5rem",textTransform:"uppercase"}),x=(0,r.ZP)("div")({display:"flex",flexWrap:"wrap",gap:"1rem"}),h=(0,r.ZP)(s._7)({minHeight:"3rem",minWidth:"3rem"}),v=(0,r.ZP)(s.JO)({position:"absolute",right:"0.5rem",top:"0.5rem"}),f=(0,r.ZP)("div")({display:"flex",alignItems:"center",gap:"1.5rem"}),y=(0,r.ZP)(s._7).withConfig({displayName:"cmp___StyledObjectImg2",componentId:"sc-1wen0ti-0"})({minHeight:"3rem",minWidth:"3rem"})},84427:function(e,n,i){i.d(n,{Z:function(){return p}});var t=i(85893),r=i(57833),l=i(67294),s=i(73899),a=i(47104),o=i(76696),d=i(77541),c=i(14685),u=i(9911),m=i(33697);let InstanceEntityDetails=e=>{let{entity:n,title:i="INSTANCE"}=e,r=(0,s.vx)((null==n?void 0:n.id)||"");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(x,{className:"tp-h7 fs-24",children:[i," DETAILS"]}),(0,t.jsx)(s.Jy,{children:(0,t.jsxs)(h,{children:[(0,t.jsx)(v,{id:u.DA[u.py.Instance],color:"main0",size:"6rem"}),(0,t.jsxs)(f,{children:[(0,t.jsxs)(y,{children:[(0,t.jsx)(m.Z,{children:"ITEM HASH"}),n?(0,t.jsx)(o.Z,{iconName:"copy",onClick:r,children:n.id}):(0,t.jsx)(a.Z,{width:"100%"})]}),(0,t.jsxs)(j,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Z,{children:"CORES"}),(0,t.jsx)("div",{children:(0,t.jsx)(g,{children:(null==n?void 0:n.resources)?"".concat(n.resources.vcpus," x86 64bit"):(0,t.jsx)(a.Z,{width:"7rem"})})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Z,{children:"RAM"}),(0,t.jsx)("div",{children:(0,t.jsx)(d.xv,{children:(null==n?void 0:n.resources)?(0,c.Fx)(n.resources.memory,{from:"MiB",to:"GiB",displayUnit:!0}):(0,t.jsx)(a.Z,{width:"4rem"})})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Z,{children:"HDD"}),(0,t.jsx)("div",{children:(0,t.jsx)(d.xv,{children:n?(0,c.Fx)(n.size,{from:"MiB",to:"GiB",displayUnit:!0}):(0,t.jsx)(a.Z,{width:"6rem"})})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Z,{children:"EXPLORER"}),(0,t.jsx)("div",{children:n?(0,t.jsx)("a",{className:"tp-body1 fs-16",href:n.url,target:"_blank",referrerPolicy:"no-referrer",children:(0,t.jsx)(o.Z,{iconName:"square-up-right",children:(0,t.jsx)(d.xv,{children:(0,c.bs)(n.url,80)})})}):(0,t.jsx)(a.Z,{width:"20rem"})})]})]})]})})]})};InstanceEntityDetails.displayName="InstanceEntityDetails";var p=(0,l.memo)(InstanceEntityDetails),x=(0,r.ZP)("div")({marginBottom:"0.5rem",textTransform:"uppercase"}),h=(0,r.ZP)("div")({display:"flex",gap:"1rem"}),v=(0,r.ZP)(s._7)({minHeight:"7rem",minWidth:"7rem"}),f=(0,r.ZP)("div")({display:"flex",width:"100%",flexDirection:"column",gap:"1rem"}),y=(0,r.ZP)("div")({width:"100%"}),j=(0,r.ZP)("div")({display:"flex",flexWrap:"wrap",gap:"1rem"}),g=(0,r.ZP)(d.xv).withConfig({displayName:"cmp___StyledText",componentId:"sc-nylz7s-0"})({display:"flex",alignItems:"center",gap:"0.25rem"})},98897:function(e,n,i){i.d(n,{a:function(){return useManageInstanceEntity}});var t=i(11163),r=i(67294),l=i(57125),s=i(60566),a=i(14685),o=i(37850),d=i(50090),c=i(63831),u=i(68091);function useManageInstanceEntity(e){let{entity:n,entityManager:i}=e,m=(0,t.useRouter)(),[p,x]=(0,r.useState)("detail"),h=(0,l.y)({executable:n,manager:i,subscribeLogs:"log"===p}),{streamDetails:v,logs:f}=h,y=(0,r.useMemo)(()=>{var e;return n?(null==n?void 0:null===(e=n.metadata)||void 0===e?void 0:e.name)||(0,a.zN)(n.id):""},[n]),j=(0,r.useMemo)(()=>(null==n?void 0:n.time)?Math.floor(Date.now()-1e3*n.time)/1e3:void 0,[null==n?void 0:n.time]),{handleDownloadLogs:g,isDownloadingLogs:P}=(0,o.Z)({fileName:y,logs:f}),Z=(0,r.useCallback)(()=>{m.push(".")},[m]),{entities:S}=(0,u.X)(),w=(0,r.useMemo)(()=>(null==n?void 0:n.authorized_keys)&&S?n.authorized_keys.map(e=>S.find(n=>n.key===e)):[],[n,S]),{persistentVolumes:b,immutableVolumes:C}=(0,d.Z)({volumes:null==n?void 0:n.volumes}),{customDomains:k,isLoading:N}=(0,c.Z)({entityId:null==n?void 0:n.id}),E=(0,r.useCallback)(e=>{O({isOpen:!0,type:"domain",selectedDomain:e})},[]),I=(0,r.useCallback)(()=>{O({isOpen:!0,type:"newDomain"})},[]),[D,F]=(0,r.useState)(),[T,_]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let fetchCost=async()=>{if((null==n?void 0:n.payment)&&i){_(!0);try{let e=await i.getTotalCostByHash(n.payment.type,n.id);F(e)}catch(e){console.error("Error fetching cost:",e)}finally{_(!1)}}};fetchCost()},[n,i]);let H=(0,r.useMemo)(()=>{var e,i;switch(null==n?void 0:null===(e=n.payment)||void 0===e?void 0:e.type){case s.uG.hold:return[{cost:D,paymentType:s.uG.hold,runningTime:j,startTime:n.time,blockchain:n.payment.chain,loading:T}];case s.uG.superfluid:if(null==v?void 0:null===(i=v.streams)||void 0===i?void 0:i.length)return v.streams.map(e=>{var i;return{cost:e.flow,paymentType:s.uG.superfluid,runningTime:j,startTime:null==n?void 0:n.time,blockchain:null==n?void 0:null===(i=n.payment)||void 0===i?void 0:i.chain,loading:!1,receiver:e.receiver}});default:return[{paymentType:s.uG.hold,loading:!0}]}},[D,null==n?void 0:n.payment,j,null==n?void 0:n.time,null==v?void 0:v.streams,T]),[M,O]=(0,r.useState)({isOpen:!1}),A=(0,r.useCallback)(e=>{O({isOpen:!0,type:"volume",selectedVolume:e})},[]),R=(0,r.useCallback)(e=>{O({isOpen:!0,type:"sshKey",selectedSSHKey:e})},[]),K=(0,r.useCallback)(()=>{x("log"),O({isOpen:!0,type:"logs"})},[]),z=(0,r.useCallback)(()=>{O(e=>({...e,isOpen:!1}))},[]);return{...h,mappedKeys:w,customDomains:k,isLoadingCustomDomains:N,handleCustomDomainClick:E,handleAddDomain:I,handleBack:Z,handleDownloadLogs:g,isDownloadingLogs:P,paymentData:H,immutableVolumes:C,persistentVolumes:b,name:y,sidePanel:M,handleImmutableVolumeClick:A,handleSSHKeyClick:R,handleViewLogs:K,closeSidePanel:z}}},27744:function(e,n,i){i.d(n,{P:function(){return useForwardedPorts}});var t=i(67294),r=i(27664),l=i(9754),s=i(71251);function useForwardedPorts(){let{entityHash:e,executableStatus:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[i]=(0,l.mr)(),{account:a}=i.connection,o=null==a?void 0:a.address,[d,c]=(0,t.useState)((0,s.yX)()),[u,m]=(0,t.useState)(!1),[p,x]=(0,t.useState)(null),h=(0,r.C)(),v=(0,t.useCallback)(async()=>{if(!e||!o||!h){c((0,s.yX)()),m(!1);return}m(!0);try{let n=await h.getByEntityHash(e),i=(null==n?void 0:n.ports)||{},t=(0,s.gy)(e,o,i),r=(0,s.CH)(e,o,t),l=(0,s.$g)(r),a=[...(0,s.yX)(),...l];c(a),x(null)}catch(e){console.error("Failed to load ports:",e),x("Failed to load ports"),c((0,s.yX)())}finally{m(!1)}},[e,o,h]);return(0,t.useEffect)(()=>{v()},[v]),(0,t.useEffect)(()=>{(null==n?void 0:n.mappedPorts)&&c(e=>(0,s.Ph)(e,n.mappedPorts))},[null==n?void 0:n.mappedPorts]),{ports:d,isLoading:u,error:p,reloadPorts:v}}},27664:function(e,n,i){i.d(n,{C:function(){return useForwardedPortsManager}});var t=i(9754);function useForwardedPortsManager(){let[e]=(0,t.mr)(),{forwardedPortsManager:n}=e.manager;return n}},18395:function(e,n,i){i.d(n,{p:function(){return useSSHKeyManager}});var t=i(9754);function useSSHKeyManager(){let[e]=(0,t.mr)(),{sshKeyManager:n}=e.manager;return n}},68091:function(e,n,i){i.d(n,{X:function(){return useRequestSSHKeys}});var t=i(18395),r=i(77205);function useRequestSSHKeys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,t.p)();return(0,r.F)({...e,manager:n,name:"ssh"})}}}]);