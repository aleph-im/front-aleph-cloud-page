"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1424],{34517:function(e,r,a){a.d(r,{Z:function(){return m}});var o=a(85893),l=a(67294),u=a(41664),d=a.n(u),c=a(73899);let ButtonLink=e=>{let{href:r,variant:a="secondary",color:l="main0",kind:u="default",size:m="md",disabled:f,children:g,...p}=e,h=(0,o.jsx)(c.zx,{as:f?void 0:"a",variant:a,color:l,kind:u,size:m,disabled:f,...p,children:g});return f?h:(0,o.jsx)(d(),{href:r,passHref:!0,legacyBehavior:!0,children:h})};ButtonLink.displayName="ButtonLink";var m=(0,l.memo)(ButtonLink)},49531:function(e,r,a){a.d(r,{N:function(){return d}});var o=a(85893),l=a(67294),u=a(73899);let SectionTitle=e=>{let{forwardedAs:r,...a}=e;return(0,o.jsx)(u.NP,{as:"h2",color:"main0",numberColor:"main0",...a})};SectionTitle.displayName="SectionTitle";var d=(0,l.memo)(SectionTitle)},57740:function(e,r,a){a.d(r,{Z:function(){return c}});var o=a(85893),l=a(57833),u=a(67294),d=a(73899);let ExternalLinkButton=e=>{let{children:r,href:a,size:l="md",variant:u="textOnly",forwardedAs:c,...f}=e;return(0,o.jsxs)(d.zx,{as:"a",href:a,size:l,kind:"default",variant:u,color:"main0",target:"_blank",rel:"noopener noreferrer",...f,children:[r||a,(0,o.jsx)(m,{name:"square-up-right"})]})};ExternalLinkButton.displayName="ExternalLinkButton";var c=(0,u.memo)(ExternalLinkButton),m=(0,l.ZP)(d.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-7jgrdd-0"})({marginLeft:"0.625rem"})},61424:function(e,r,a){a.d(r,{I3:function(){return NewDomainForm},ZP:function(){return M}});var o=a(85893),l=a(57833),u=a(67294),d=a(73899),c=a(75650),m=a(11163),f=a(24959),g=a(80380),p=a(57966),h=a(96370),v=a(16368),y=a(30716),x=a(75899),b=a(25093),w=a(11525),j=a(9911),P=a(87536),I=a(56312),S=a(53424),C=a(86780),k=a(9324),F=a(50586);let E={...S.Pg};var N=a(99983),Y=a(49531),Z=a(57740),T=a(34517),D=a(77541);let _=l.ZP.section.withConfig({displayName:"styles__StyledSection",componentId:"sc-byjtw6-0"})([""," ",""],{padding:"0px"},e=>{let{$isEmbedded:r}=e;return!r&&{paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}}),NewDomainForm=e=>{let{name:r,entityId:a,entityType:l,onSuccess:S,variant:M="embedded",showResourceSelection:$=!1}=e,{entities:K,nameCtrl:X,targetCtrl:ee,refCtrl:et,rules:en,errors:er,handleSubmit:ei,setTarget:ea,setRef:eo,initialTarget:es}=function(e){let{name:r,entityId:a,entityType:o,onSuccess:l}=e,d=(0,m.useRouter)(),[,c]=(0,b.mr)(),{entities:S}=(0,h.u)(),{entities:N}=(0,v.n)(),{entities:Y}=(0,y.p)(),{entities:Z}=(0,x.x)(),T=(0,g.A)(),{next:D,stop:_}=(0,C.A)({}),M=(0,u.useMemo)(()=>({...E,...r?{name:r}:{},...o?{target:o}:{},...a?{ref:a}:{}}),[r,o,a]),q=(0,u.useCallback)(async e=>{if(!T)throw F.Z.ConnectYourWallet;let r=await T.getAddSteps(e,"override"),a=r.map(e=>C.n[e]),o=T.addSteps(e,"override");try{let e;for(;!e;){let{value:r,done:l}=await o.next();if(l){e=r[0];break}await D(a)}c(new k.Wy({name:"domain",entities:e})),console.log("accountDomain",e),null==l||l(e)}finally{await _()}},[c,T,D,l,_]),{control:A,handleSubmit:B,setValue:R,reset:L,formState:{errors:V}}=(0,f.c)({defaultValues:M,onSubmit:q,resolver:(0,I.F)(w.Y.addSchema)}),z=(0,u.useRef)(!1);(0,u.useEffect)(()=>{!z.current&&(o||a)&&(z.current=!0,L({name:r||"",target:o||E.target,ref:a||""}))},[o,a,r,L]);let U=(0,u.useRef)(!1);(0,u.useEffect)(()=>{if(U.current)return;U.current=!0;let e=window.location.pathname+window.location.hash;window.history.replaceState(window.history.state,"",e)},[d.isReady,d.asPath]);let O=(0,P.bc)({control:A,name:"name"}),W=(0,P.bc)({control:A,name:"target",rules:{onChange(e){R("ref","")}}}),J=(0,P.bc)({control:A,name:"ref"}),Q=W.field.value,G=(0,u.useMemo)(()=>{if(!Q)return[];if(Q!==j.sY.IPFS){let e=Q===j.sY.Instance?S:Q===j.sY.Confidential?Z:N;return(e||[]).map(e=>{let{id:r,metadata:a}=e;return{label:(null==a?void 0:a.name)||r,value:r,type:Q}})}return(Y||[]).map(e=>{let{id:r,volume_id:a}=e;return{label:r,value:a,type:Q}})},[Q,S,N,Y,Z]),H=(0,u.useMemo)(()=>!!(null==S?void 0:S.length),[S]),$=(0,u.useMemo)(()=>!!(null==N?void 0:N.length),[N]),K=(0,u.useMemo)(()=>!!(null==Y?void 0:Y.length),[Y]),X=(0,u.useMemo)(()=>!!(null==Z?void 0:Z.length),[Z]);(0,u.useEffect)(()=>{Q===j.sY.Instance&&H?R("target",j.sY.Instance):Q===j.sY.Confidential&&X?R("target",j.sY.Confidential):Q===j.sY.Program&&$?R("target",j.sY.Program):Q===j.sY.IPFS&&R("target",j.sY.IPFS)},[Q,$,H,X,K,R]);let ee=O.field.value,et=W.field.value,en=(0,u.useMemo)(()=>ee&&et?{name:ee,target:et}:void 0,[ee,et]),er=(0,p.w)(en);return{entities:G,nameCtrl:O,targetCtrl:W,refCtrl:J,rules:er,errors:V,handleSubmit:B,setTarget:e=>{R("target",e)},setRef:e=>{R("ref",e)},initialTarget:o}}({name:r,entityId:a,entityType:l,onSuccess:S}),getTabIdFromTarget=e=>{switch(e){case j.sY.Instance:case j.sY.Program:case j.sY.Confidential:return"compute";case j.sY.IPFS:return"ipfs";default:return"website"}},[el,eu]=(0,u.useState)(()=>getTabIdFromTarget(es));(0,u.useEffect)(()=>{es&&eu(getTabIdFromTarget(es))},[es]);let ed=(0,u.useMemo)(()=>{switch(ee.field.value){case j.sY.Instance:return"instance";case j.sY.Confidential:return"confidential";default:return"function"}},[ee.field.value]),ec=!!r,em="embedded"===M,ef=em?u.Fragment:N.F;return(0,o.jsx)(ef,{children:(0,o.jsxs)(c.Z,{onSubmit:ei,errors:er,children:[(0,o.jsxs)(_,{$isEmbedded:em,children:[(0,o.jsx)(Y.N,{number:1,children:"Custom domain"}),(0,o.jsx)(q,{children:"Assign a user-friendly domain to your website, instance or function to not only simplify access to your web3 application but also enhance its professional appearance. This is an effective way to elevate user experience, establish brand identity or streamline the navigation process within your application."}),(0,o.jsx)(d.Jy,{children:(0,o.jsx)(d.oi,{...X.field,...X.fieldState,required:!0,label:"Enter your desired custom domain in the field below",placeholder:"yourdomain.io"})}),(0,o.jsx)(A,{children:(0,o.jsx)(Z.Z,{href:j.cr.docs.customDomains,children:"Learn more"})}),!$&&(0,o.jsx)(B,{children:(0,o.jsx)(d.zx,{type:"submit",color:"main0",kind:"default",size:"md",variant:"primary",children:ec?"Update domain":"Create domain"})})]}),$&&(0,o.jsxs)(_,{$isEmbedded:em,children:[(0,o.jsx)(Y.N,{number:2,children:"Select Resource"}),(0,o.jsx)(R,{children:"You'll need to specify the resource your custom domain will be associated with. This could either be a website, an instance or a function, depending on what you want your custom domain to point to."}),(0,o.jsx)(L,{children:(0,o.jsx)(d.mQ,{align:"left",selected:el,onTabChange:e=>{eo(""),eu(e),["website","ipfs"].includes(e)?ea(j.sY.IPFS):ea(j.sY.Program)},tabs:[{id:"website",name:"Website"},{id:"compute",name:"Compute"},{id:"ipfs",name:"IPFS"}]})}),(0,o.jsx)("div",{role:"tabpanel",children:"website"===el?(0,o.jsx)(V,{children:K.length>0?(0,o.jsx)(d.Lt,{...et.field,...et.fieldState,required:!0,label:"Link your custom domain to a specific website",children:K.map(e=>{let{label:r,value:a}=e;return(0,o.jsx)(d.Qr,{value:a,children:r},a)})}):(0,o.jsxs)("div",{children:[(0,o.jsx)(z,{children:"If you want to link a domain to a website, you need to deploy one first *"}),(0,o.jsx)(T.Z,{type:"button",kind:"functional",size:"md",variant:"warning",href:j.cr.console.web3Hosting.website.new,children:"Create your first website"})]})}):"compute"===el?(0,o.jsxs)(U,{children:[(0,o.jsxs)(d.Ee,{...ee.field,...ee.fieldState,required:!0,label:"Choose resource type",direction:"row",children:[(0,o.jsx)(d.Y8,{label:j.Ni[j.sY.Program],value:j.sY.Program}),(0,o.jsx)(d.Y8,{label:j.Ni[j.sY.Instance],value:j.sY.Instance}),(0,o.jsx)(d.Y8,{label:j.Ni[j.sY.Confidential],value:j.sY.Confidential})]}),K.length>0?(0,o.jsx)(O,{children:(0,o.jsx)(d.Lt,{...et.field,...et.fieldState,required:!0,label:"Select the specific resource",children:K.map(e=>{let{label:r,value:a}=e;return(0,o.jsx)(d.Qr,{value:a,children:r},a)})})}):(0,o.jsxs)("div",{children:[(0,o.jsxs)(W,{children:["If you want to link a domain to a ",ed,", you need to deploy one first *"]}),(0,o.jsx)(T.Z,{type:"button",kind:"functional",size:"md",variant:"warning",href:"/console/computing/".concat(ed,"/new"),children:"Create your first ".concat(ed)})]})]}):"ipfs"===el?(0,o.jsx)(d.Jy,{children:(0,o.jsx)(d.oi,{...et.field,...et.fieldState,required:!0,label:"Link your custom domain to an Aleph Message ID",placeholder:"Paste your IPFS Aleph Message ID"})}):(0,o.jsx)(o.Fragment,{})}),en&&en.length>0&&(0,o.jsxs)(J,{children:[(0,o.jsx)("div",{className:"tp-info text-main0",children:"DNS CONFIGURATION"}),(0,o.jsx)(Q,{children:"Configure these DNS records before creating the domain for instant detection:"}),en.map(e=>(0,o.jsx)(D.xv,{children:(0,o.jsxs)(G,{children:[(0,o.jsx)(d.vo,{kind:"warning",title:""}),(0,o.jsx)("div",{children:e.info})]})},e.name))]}),(0,o.jsx)(H,{children:(0,o.jsx)(d.zx,{type:"submit",color:"main0",kind:"default",size:"md",variant:"primary",children:ec?"Update domain":"Create domain"})})]})]})})};NewDomainForm.displayName="NewDomainForm";var M=(0,u.memo)(NewDomainForm),q=(0,l.ZP)("p")({marginBottom:"1.5rem"}),A=(0,l.ZP)("div")({marginTop:"1.5rem",textAlign:"right"}),B=(0,l.ZP)("div")({zIndex:"0",marginTop:"2.5rem",textAlign:"center"}),R=(0,l.ZP)("p")({marginBottom:"1.5rem"}),L=(0,l.ZP)("div")({marginTop:"2.5rem",marginBottom:"2.5rem"}),V=(0,l.ZP)(d.Jy)({zIndex:"10 !important"}),z=(0,l.ZP)("p")({marginBottom:"0.75rem",marginTop:"0.125rem","--tw-text-opacity":"1",color:"rgb(0 0 0 / var(--tw-text-opacity, 1))"}),U=(0,l.ZP)(d.Jy)({zIndex:"10 !important"}),O=(0,l.ZP)("div")({marginTop:"2.5rem"}),W=(0,l.ZP)("p")({marginBottom:"0.75rem",marginTop:"1.5rem","--tw-text-opacity":"1",color:"rgb(0 0 0 / var(--tw-text-opacity, 1))"}),J=(0,l.ZP)(d.Jy)({marginTop:"1.5rem"}),Q=(0,l.ZP)("p")({marginBottom:"1rem",marginTop:"0.5rem"}),G=(0,l.ZP)("div")({marginTop:"0.5rem",display:"flex"}),H=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-iaqpgs-0"})({zIndex:"0",marginTop:"2.5rem",textAlign:"center"})},75650:function(e,r,a){a.d(r,{Z:function(){return cmp}});var o=a(85893),l=a(57833);let u=l.ZP.form.withConfig({displayName:"styles__StyledForm",componentId:"sc-faebcb-0"})(["",""],{display:"flex",flex:"1 1 0%",flexDirection:"column"});var d=a(73899),c=a(99983),cmp=e=>{let{children:r,onSubmit:a,errors:l,id:d}=e;return(0,o.jsxs)(u,{id:d,onSubmit:a,noValidate:!0,children:[r,(null==l?void 0:l.root)&&(0,o.jsx)(c.F,{children:Object.values(l.root).map(e=>(0,o.jsx)(m,{error:e},e+""))})]})},m=(0,l.ZP)(d.Xq).withConfig({displayName:"cmp___StyledFormError",componentId:"sc-tai6p3-0"})({wordBreak:"break-all"})},57966:function(e,r,a){a.d(r,{w:function(){return useDomainRules}});var o=a(67294),l=a(80380);function useDomainRules(e){let[r,a]=(0,o.useState)(void 0),u=(0,l.A)(),d=null==e?void 0:e.name,c=null==e?void 0:e.target;return(0,o.useEffect)(()=>{if(u){if(!d||!c){a(void 0);return}request()}async function request(){if(!u||!d||!c)return;let e=await u.getRules({name:d,target:c});a(e)}},[d,c,u]),r}},24959:function(e,r,a){a.d(r,{c:function(){return useForm}});var o=a(73899),l=a(67294),u=a(87536),d=a(79711),c=a(50586);function useForm(e){let{onSubmit:r,onSuccess:a,onError:m,readyDeps:f=[],...g}=e,p=(0,u.cI)(g);(0,l.useEffect)(()=>{"object"==typeof g.defaultValues&&p.reset(g.defaultValues)},[...f]);let[h,v]=(0,l.useState)({data:void 0,error:void 0,loading:!1}),[y,{onLoad:x,onSuccess:b,onError:w}]=(0,o.g7)({flushData:!0,state:h,setState:v,onSuccess:a,onError:m}),j=(0,l.useCallback)(async e=>{try{x();let a=await r(e);b(a)}catch(r){let e=r instanceof d.jm?c.Z.ValidationError:(null==r?void 0:r.cause)||r;p.setError("root.serverError",{...e,message:null==e?void 0:e.message}),w(e)}},[p,w,x,r,b]),P=(0,l.useCallback)(async e=>{let r;if(console.log(e),!r){let a=function getFirstError(e){let[r]=Object.entries(e);if(!r)return;let[a,o]=r;if(Array.isArray(o)){let e=o[o.length-1];return getFirstError(e)}return[a,o]}(e);if(a){let[e,o]=a,l="string"==typeof o?o:(null==o?void 0:o.message)?": ".concat(o.message):(null==o?void 0:o.type)?': "'.concat(null==o?void 0:o.type,'" validation not satisfied'):"";r=c.Z.FieldError(e,l)}}r||(r=c.Z.ValidationError),w(r)},[w]),I=(0,l.useMemo)(()=>p.handleSubmit(j,P),[p,j,P]);return{...p,requestState:y,handleSubmit:I}}},57261:function(e,r,a){a.d(r,{G:function(){return useConfidentialManager}});var o=a(25093);function useConfidentialManager(){let[e]=(0,o.mr)(),{confidentialManager:r}=e.manager;return r}},80380:function(e,r,a){a.d(r,{A:function(){return useDomainManager}});var o=a(25093);function useDomainManager(){let[e]=(0,o.mr)(),{domainManager:r}=e.manager;return r}},99978:function(e,r,a){a.d(r,{U:function(){return useInstanceManager}});var o=a(25093);function useInstanceManager(){let[e]=(0,o.mr)(),{instanceManager:r}=e.manager;return r}},33223:function(e,r,a){a.d(r,{k:function(){return useProgramManager}});var o=a(25093);function useProgramManager(){let[e]=(0,o.mr)(),{programManager:r}=e.manager;return r}},8758:function(e,r,a){a.d(r,{e:function(){return useWebsiteManager}});var o=a(25093);function useWebsiteManager(){let[e]=(0,o.mr)(),{websiteManager:r}=e.manager;return r}},75899:function(e,r,a){a.d(r,{x:function(){return useRequestConfidentials}});var o=a(77205),l=a(57261);function useRequestConfidentials(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,l.G)();return(0,o.F)({...e,manager:r,name:"confidential"})}},96370:function(e,r,a){a.d(r,{u:function(){return useRequestInstances}});var o=a(99978),l=a(77205);function useRequestInstances(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,o.U)();return(0,l.F)({...e,manager:r,name:"instance"})}},16368:function(e,r,a){a.d(r,{n:function(){return useRequestPrograms}});var o=a(33223),l=a(77205);function useRequestPrograms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,o.k)();return(0,l.F)({...e,manager:r,name:"program"})}},30716:function(e,r,a){a.d(r,{p:function(){return useRequestWebsites}});var o=a(8758),l=a(77205);function useRequestWebsites(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,o.e)();return(0,l.F)({...e,manager:r,name:"website"})}},53424:function(e,r,a){a.d(r,{Pg:function(){return d},Q1:function(){return useDomainItem},Qd:function(){return useAddDomains}});var o=a(9911),l=a(67294),u=a(87536);let d={name:"",ref:"",target:o.sY.IPFS};function useDomainItem(e){let{name:r="domains",index:a,control:o,defaultValue:d,onRemove:c}=e,m=(0,u.bc)({control:o,name:"".concat(r,".").concat(a,".name"),defaultValue:null==d?void 0:d.name}),f=(0,l.useCallback)(()=>{c(a)},[a,c]);return{nameCtrl:m,handleRemove:f}}function useAddDomains(e){let{name:r="domains",control:a,entityType:o}=e,c=(0,u.Dq)({control:a,name:r,shouldUnregister:!0}),{fields:m,remove:f,append:g}=c,p=(0,l.useCallback)(()=>{g({...d,target:o})},[g,o]);return{name:r,control:a,fields:m,handleAdd:p,handleRemove:f}}},56312:function(e,r,a){a.d(r,{F:function(){return t}});var o=a(87536);let s=(e,r,a)=>{if(e&&"reportValidity"in e){let l=(0,o.U2)(a,r);e.setCustomValidity(l&&l.message||""),e.reportValidity()}},resolvers_o=(e,r)=>{for(let a in r.fields){let o=r.fields[a];o&&o.ref&&"reportValidity"in o.ref?s(o.ref,a,e):o.refs&&o.refs.forEach(r=>s(r,a,e))}},resolvers_r=(e,r)=>{r.shouldUseNativeValidation&&resolvers_o(e,r);let a={};for(let l in e){let u=(0,o.U2)(r.fields,l),d=Object.assign(e[l]||{},{ref:u&&u.ref});if(i(r.names||Object.keys(e),l)){let e=Object.assign({},(0,o.U2)(a,l));(0,o.t8)(e,"root",d),(0,o.t8)(a,l,e)}else(0,o.t8)(a,l,d)}return a},i=(e,r)=>e.some(e=>e.startsWith(r+"."));var n=function(e,r){for(var a={};e.length;){var l=e[0],u=l.code,d=l.message,c=l.path.join(".");if(!a[c]){if("unionErrors"in l){var m=l.unionErrors[0].errors[0];a[c]={message:m.message,type:m.code}}else a[c]={message:d,type:u}}if("unionErrors"in l&&l.unionErrors.forEach(function(r){return r.errors.forEach(function(r){return e.push(r)})}),r){var f=a[c].types,g=f&&f[l.code];a[c]=(0,o.KN)(c,r,a,u,g?[].concat(g,l.message):l.message)}e.shift()}return a},t=function(e,r,a){return void 0===a&&(a={}),function(o,l,u){try{return Promise.resolve(function(l,d){try{var c=Promise.resolve(e["sync"===a.mode?"parse":"parseAsync"](o,r)).then(function(e){return u.shouldUseNativeValidation&&resolvers_o({},u),{errors:{},values:a.raw?o:e}})}catch(e){return d(e)}return c&&c.then?c.then(void 0,d):c}(0,function(e){if(Array.isArray(null==e?void 0:e.errors))return{values:{},errors:resolvers_r(n(e.errors,!u.shouldUseNativeValidation&&"all"===u.criteriaMode),u)};throw e}))}catch(e){return Promise.reject(e)}}}}}]);