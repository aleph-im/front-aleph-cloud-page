"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4215],{14215:function(e,n,i){i.d(n,{Z:function(){return N}});var t=i(85893),a=i(19521),s=i(67294),r=i(79632),d=i(76696),c=i(77541),o=i(49107),l=i(11163),m=i(80380),p=i(28417),g=i(36924),h=i(9324),u=i(50586),f=i(86780),x=i(64688),v=i(9911),y=i(47104),_=i(41664),j=i.n(_);let DomainDetail=e=>{let{domainId:n,showDelete:i=!1}=e,{domain:a,status:_,refEntity:N,account:X,handleDelete:Q,disabledDelete:ee,handleUpdate:en,disabledUpdate:ei,handleRetry:et,handleCopyHash:ea,handleCopyRef:es}=function(e){let{domainId:n}=e,i=(0,l.useRouter)(),[{connection:{account:t}},a]=(0,p.mr)(),{entities:d}=(0,g.d)({ids:n}),[c]=d||[],o=(0,x.S)(null==c?void 0:c.ref),v=function(e){let[n,i]=(0,s.useState)(void 0),t=(0,m.A)();return(0,s.useEffect)(()=>{if(!t||!e)return;async function request(){if(!t||!e)return;let n=await t.checkStatus(e);i(n)}request();let n=setInterval(request,1e4);return()=>clearInterval(n)},[e,t]),n}(c),y=(0,m.A)(),{next:_,stop:j,noti:N}=(0,f.A)({}),w=(0,s.useMemo)(()=>!c,[c]),S=(0,s.useCallback)(async()=>{if(!y)throw u.Z.ConnectYourWallet;if(!c)throw u.Z.DomainNotFound;let e=await y.getDelSteps(c),n=e.map(e=>f.n[e]),t=y.delSteps(c);try{for(;;){let{done:e}=await t.next();if(e)break;await _(n)}a(new h.gg({name:"domain",keys:[c.id]})),await i.replace("/console")}catch(t){console.error(t);let e=t.message,n=null==t?void 0:t.cause,i="string"==typeof n?n:null==n?void 0:n.message;null==N||N.add({variant:"error",title:"Error",text:e,detail:i})}finally{await j()}},[a,y,c,_,i,j,N]),C=(0,s.useMemo)(()=>!c,[c]),Z=(0,s.useCallback)(()=>{if(!c)throw u.Z.DomainNotFound;i.push("/console/settings/domain/new/?name=".concat(c.id))},[i,c]),D=(0,s.useCallback)(async()=>{if(!y)throw u.Z.ConnectYourWallet;if(!c)throw u.Z.DomainNotFound;try{await y.retry(c),await i.replace("/")}catch(e){}},[c,y,i]),I=(0,r.vx)((null==o?void 0:o.id)||""),k=(0,r.vx)((null==c?void 0:c.ref)||"");return{domain:c,status:v,refEntity:o,account:t,handleDelete:S,disabledDelete:w,handleUpdate:Z,disabledUpdate:C,handleRetry:D,handleCopyHash:I,handleCopyRef:k}}({domainId:n});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(w,{children:[(0,t.jsxs)(S,{children:[(0,t.jsx)(C,{name:"input-text",className:"text-main0"}),(0,t.jsx)("div",{className:"tp-body2",children:a?a.name||(0,o.zN)(a.id):(0,t.jsx)(y.Z,{width:"10rem"})}),(0,t.jsx)(Z,{kind:"secondary",variant:(null==_?void 0:_.status)?"success":"error",children:(null==_?void 0:_.status)?"DOMAIN RECORDS CONFIGURED":"DOMAIN RECORDS NOT CONFIGURED"})]}),(0,t.jsxs)(D,{children:[(0,t.jsx)(r.zx,{kind:"default",variant:"tertiary",size:"md",onClick:()=>en(),disabled:ei,children:"Update"}),i&&(0,t.jsx)(r.zx,{kind:"functional",variant:"error",size:"md",onClick:Q,disabled:ee,children:(0,t.jsx)(r.JO,{name:"trash"})})]})]}),(0,t.jsxs)(r.Jy,{children:[(0,t.jsxs)(I,{children:[(0,t.jsx)(k,{variant:"accent",children:a?v.K_[a.type]:(0,t.jsx)(y.Z,{width:"5rem",height:"1.3rem"})}),(0,t.jsxs)(P,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"NAME"}),a?(0,t.jsx)("a",{className:"tp-body1 fs-16",href:"https://".concat(a.name),target:"_blank",referrerPolicy:"no-referrer",children:(0,t.jsx)(d.Z,{iconName:"square-up-right",children:(0,t.jsx)(c.x,{children:a.name})})}):(0,t.jsx)(c.x,{children:(0,t.jsx)(y.Z,{width:"12rem"})})]})]}),(0,t.jsx)(c.Z,{}),(0,t.jsxs)(T,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"TARGET"}),(0,t.jsx)("div",{children:(0,t.jsx)(c.x,{children:a?a.target&&v.Ni[a.target]||"-":(0,t.jsx)(y.Z,{width:"5rem"})})})]}),(0,t.jsxs)(b,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"UPDATED ON"}),(0,t.jsx)("div",{children:a?(0,t.jsx)(c.x,{className:"fs-10 tp-body1",children:a.date}):(0,t.jsx)(y.Z,{width:"5rem"})})]})]}),(0,t.jsxs)(R,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"REF"}),(0,t.jsx)("div",{children:(0,t.jsx)(d.Z,{iconName:"copy",onClick:es,children:(0,t.jsx)(c.x,{children:a?a.ref:(0,t.jsx)(y.Z,{width:"12rem"})})})})]}),_&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Z,{}),(0,t.jsx)(r.DU,{type:"h7",as:"h2",color:"main0",children:"Status"}),(0,t.jsxs)(E,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"STATUS"}),(0,t.jsx)(c.x,{children:(0,t.jsxs)(M,{children:[(0,t.jsx)(r.vo,{kind:_.status?"success":"warning",title:""}),_.status?"Properly configured":"Manual configuration is required"]})})]}),a&&(!_.tasks_status.cname||!_.tasks_status.owner_proof)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(A,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"PENDING STEPS"}),(0,t.jsx)(c.x,{children:(0,t.jsxs)(F,{children:[(0,t.jsx)(r.vo,{kind:_.tasks_status.cname?"success":"warning",title:""}),(0,t.jsxs)("div",{children:["Create a CNAME record",(0,t.jsx)(L,{className:"text-main0",children:a.name}),"with value",a.target==v.sY.Program&&(0,t.jsxs)(O,{className:"text-main0",children:[a.name,".program.public.aleph.sh."]}),[v.sY.Instance,v.sY.Confidential].includes(a.target)&&(0,t.jsxs)(B,{className:"text-main0",children:[a.name,".instance.public.aleph.sh."]}),a.target==v.sY.IPFS&&(0,t.jsx)(q,{className:"text-main0",children:"ipfs.public.aleph.sh."})]})]})}),a.target==v.sY.IPFS&&(0,t.jsx)(c.x,{children:(0,t.jsxs)(z,{children:[(0,t.jsx)(r.vo,{kind:_.tasks_status.delegation?"success":"warning",title:""}),(0,t.jsxs)("div",{children:["Create a CNAME record",(0,t.jsxs)(U,{className:"text-main0",children:["_dnslink.",a.name]}),"with value",(0,t.jsxs)(Y,{className:"text-main0",children:["_dnslink.",a.name,".static.public.aleph.sh."]})]})]})}),(0,t.jsx)(c.x,{children:(0,t.jsxs)(G,{children:[(0,t.jsx)(r.vo,{kind:_.tasks_status.owner_proof?"success":"warning",title:""}),(0,t.jsxs)("div",{children:["Create a TXT owner proof record",(0,t.jsxs)(H,{className:"text-main0",children:["_control.",a.name]}),"with value",(0,t.jsx)(W,{className:"text-main0",children:null==X?void 0:X.address})]})]})})]}),(0,t.jsxs)(J,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"FINAL STEP"}),(0,t.jsx)(c.x,{children:"After configuring the domain records you can retry to link them again here"})]}),(0,t.jsx)(K,{children:(0,t.jsx)(r.zx,{onClick:et,size:"md",variant:"secondary",color:"main0",kind:"default",children:"Retry"})})]})]}),a&&N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Z,{}),(0,t.jsxs)(r.DU,{type:"h7",as:"h2",color:"main0",children:["Linked ",v.Ni[a.target]]}),(0,t.jsxs)(V,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"Target Resource"}),(0,t.jsx)(j(),{className:"tp-body1 fs-16",href:("instance"===a.target?"/console/computing/instance/":"confidential"===a.target?"/console/computing/confidential/":"program"===a.target?"/console/computing/function/":"/console/storage/volume/")+N.id,children:(0,t.jsx)(d.Z,{iconName:"square-up-right",children:"Details"})})]}),(0,t.jsxs)($,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"ITEM HASH"}),(0,t.jsx)(d.Z,{iconName:"copy",onClick:ea,children:N.id})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Z,{}),(0,t.jsx)(r.DU,{type:"h7",as:"h2",color:"main0",children:"Linked Resource"}),(0,t.jsx)(c.x,{children:"The target resource is missing or has been deleted. "})]})]})]})};DomainDetail.displayName="DomainDetail";var N=(0,s.memo)(DomainDetail),w=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1nvdr5g-0"})({display:"flex",justifyContent:"space-between",paddingBottom:"1.25rem"}),S=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-1nvdr5g-1"})({display:"flex",flexWrap:"wrap",alignItems:"center"}),C=(0,a.ZP)(r.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-1nvdr5g-2"})({marginRight:"1rem"}),Z=(0,a.ZP)(r.__).withConfig({displayName:"cmp___StyledLabel",componentId:"sc-1nvdr5g-3"})({marginLeft:"1rem",marginTop:"0.25rem"}),D=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-1nvdr5g-4"})({marginLeft:"0.5rem",display:"flex",flexWrap:"wrap",justifyContent:"flex-end",gap:"0.5rem","@media (min-width: 36rem)":{gap:"1rem"}}),I=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-1nvdr5g-5"})({display:"flex",alignItems:"center",justifyContent:"flex-start",overflow:"hidden"}),k=(0,a.ZP)(r.Vp).withConfig({displayName:"cmp___StyledTag",componentId:"sc-1nvdr5g-6"})({marginRight:"1rem",whiteSpace:"nowrap"}),P=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-1nvdr5g-7"})({flex:"1 1 auto"}),T=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-1nvdr5g-8"})({marginTop:"1.25rem",marginBottom:"1.25rem",display:"flex",flexDirection:"row"}),b=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv7",componentId:"sc-1nvdr5g-9"})({paddingLeft:"3rem"}),R=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv8",componentId:"sc-1nvdr5g-10"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),E=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv9",componentId:"sc-1nvdr5g-11"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),M=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv10",componentId:"sc-1nvdr5g-12"})({marginTop:"0.5rem",display:"flex"}),A=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv11",componentId:"sc-1nvdr5g-13"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),F=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv12",componentId:"sc-1nvdr5g-14"})({marginTop:"0.5rem",display:"flex"}),L=(0,a.ZP)("span").withConfig({displayName:"cmp___StyledSpan",componentId:"sc-1nvdr5g-15"})({marginLeft:"0.5rem",marginRight:"0.5rem"}),O=(0,a.ZP)("span").withConfig({displayName:"cmp___StyledSpan2",componentId:"sc-1nvdr5g-16"})({marginLeft:"0.5rem",marginRight:"0.5rem"}),B=(0,a.ZP)("span").withConfig({displayName:"cmp___StyledSpan3",componentId:"sc-1nvdr5g-17"})({marginLeft:"0.5rem",marginRight:"0.5rem"}),q=(0,a.ZP)("span").withConfig({displayName:"cmp___StyledSpan4",componentId:"sc-1nvdr5g-18"})({marginLeft:"0.5rem",marginRight:"0.5rem"}),z=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv13",componentId:"sc-1nvdr5g-19"})({marginTop:"0.5rem",display:"flex"}),U=(0,a.ZP)("span").withConfig({displayName:"cmp___StyledSpan5",componentId:"sc-1nvdr5g-20"})({marginLeft:"0.5rem",marginRight:"0.5rem"}),Y=(0,a.ZP)("span").withConfig({displayName:"cmp___StyledSpan6",componentId:"sc-1nvdr5g-21"})({marginLeft:"0.5rem",marginRight:"0.5rem"}),G=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv14",componentId:"sc-1nvdr5g-22"})({marginTop:"0.5rem",display:"flex"}),H=(0,a.ZP)("span").withConfig({displayName:"cmp___StyledSpan7",componentId:"sc-1nvdr5g-23"})({marginLeft:"0.5rem",marginRight:"0.5rem"}),W=(0,a.ZP)("span").withConfig({displayName:"cmp___StyledSpan8",componentId:"sc-1nvdr5g-24"})({marginLeft:"0.5rem",marginRight:"0.5rem"}),J=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv15",componentId:"sc-1nvdr5g-25"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),K=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv16",componentId:"sc-1nvdr5g-26"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),V=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv17",componentId:"sc-1nvdr5g-27"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),$=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv18",componentId:"sc-1nvdr5g-28"})({marginTop:"1.25rem",marginBottom:"1.25rem"})},47104:function(e,n,i){i.d(n,{Z:function(){return d}});var t=i(85893),a=i(67294),s=i(19521);let r=s.ZP.div.withConfig({displayName:"styles__StyledSkeleton",componentId:"sc-1mb8lh3-0"})([""," ",""],{"@keyframes pulse":{"50%":{opacity:".5"}},animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite",borderRadius:"0.375rem"},e=>{let{theme:n,$width:i,$height:t}=e;return(0,s.iv)(["background:",";width:",";height:",";"],n.color.purple3,i,t)}),Skeleton=e=>{let{width:n,height:i="1.1em"}=e;return(0,t.jsx)(r,{$width:n,$height:i})};Skeleton.displayName="Skeleton";var d=(0,a.memo)(Skeleton)},64688:function(e,n,i){i.d(n,{S:function(){return useHashToEntity}});var t=i(67294),a=i(28417),s=i(9911),r=i(49107),d=i(1801);function useHashToEntity(e){let[n,i]=(0,t.useState)(void 0),c=function(e){let[n,i]=(0,t.useState)(void 0),a=(0,d.c)();return(0,t.useEffect)(()=>{if(!e){i(void 0);return}async function fetchMessage(e){if(!a)return;let n=await a.get(e),t=(0,r.gE)(n);i(t)}(async function(e){!function(e){let[,n,t]=e.split("/");return!!("string"==typeof n&&"string"==typeof t&&Object.values(s.py).includes(n))&&(i(n),!0)}(e)&&fetchMessage(e)})(e)},[e,a]),n}(e),o=function(e){let[n]=(0,a.mr)(),{domainManager:i,sshKeyManager:r,volumeManager:d,programManager:c,instanceManager:o,gpuInstanceManager:l,websiteManager:m,confidentialManager:p}=n.manager,g=(0,t.useMemo)(()=>({[s.py.Domain]:i,[s.py.SSHKey]:r,[s.py.Volume]:d,[s.py.Instance]:o,[s.py.GpuInstance]:l,[s.py.Program]:c,[s.py.Website]:m,[s.py.Confidential]:p}),[i,r,d,o,l,c,m,p]);if(e)return g[e]}(c);return(0,t.useEffect)(()=>{if(!e){i(void 0);return}(async function(e){if(!o)return;let n=await o.get(e);i(n)})(e)},[e,o]),n}},80380:function(e,n,i){i.d(n,{A:function(){return useDomainManager}});var t=i(28417);function useDomainManager(){let[e]=(0,t.mr)(),{domainManager:n}=e.manager;return n}},1801:function(e,n,i){i.d(n,{c:function(){return useMessageManager}});var t=i(28417);function useMessageManager(){let[e]=(0,t.mr)(),{messageManager:n}=e.manager;return n}},36924:function(e,n,i){i.d(n,{d:function(){return useRequestDomains}});var t=i(80380),a=i(77205);function useRequestDomains(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,t.A)();return(0,a.F)({...e,manager:n,name:"domain"})}}}]);