"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6946],{34517:function(e,r,a){a.d(r,{Z:function(){return m}});var o=a(85893),l=a(67294),d=a(41664),c=a.n(d),u=a(31515);let ButtonLink=e=>{let{href:r,variant:a="secondary",color:l="main0",kind:d="default",size:m="md",disabled:p,children:f,...h}=e,v=(0,o.jsx)(u.zx,{as:p?void 0:"a",variant:a,color:l,kind:d,size:m,disabled:p,...h,children:f});return p?v:(0,o.jsx)(c(),{href:r,passHref:!0,legacyBehavior:!0,children:v})};ButtonLink.displayName="ButtonLink";var m=(0,l.memo)(ButtonLink)},72882:function(e,r,a){a.d(r,{ZP:function(){return f}});var o=a(85893),l=a(67294),d=a(31515),c=a(43251),u=a(57833);let m=(0,u.ZP)(d.JO).attrs(e=>{let{buttonSize:r}=e;return{size:(()=>{switch(r){case"xs":return"xs";case"sm":return"sm";case"lg":return"md-lg";case"xl":return"lg";default:return"md"}})()}}).withConfig({displayName:"styles__InfoIcon",componentId:"sc-15zds0b-0"})(["opacity:0.8;"]),p=(0,l.forwardRef)((e,r)=>{let{tooltipContent:a,tooltipPosition:u,children:p,disabled:f,size:h,...v}=e,[y,g]=(0,l.useState)(!1);(0,l.useEffect)(()=>{g(!0)},[]);let x=(0,l.useRef)(null),w=r||x;return(0,o.jsxs)("div",{className:"inline-flex relative",children:[(0,o.jsx)(d.zx,{ref:w,disabled:f,size:h,...v,children:(0,o.jsxs)(o.Fragment,{children:[p,f&&a&&(0,o.jsx)(m,{name:"info-circle",buttonSize:h})]})}),y&&f&&a&&(0,o.jsx)(c.Z,{my:(null==u?void 0:u.my)||"bottom-center",at:(null==u?void 0:u.at)||"top-center",targetRef:w,content:a})]})});p.displayName="ButtonWithInfoTooltip";var f=p},90255:function(e,r,a){a.d(r,{HC:function(){return f},ZP:function(){return h}});var o=a(85893),l=a(57833),d=a(67294),c=a(31515);let u=(0,l.ZP)(c.Jy).attrs({type:"grain-3"}).withConfig({displayName:"styles__StyledContainer",componentId:"sc-1yk7f0v-0"})(["",""],{position:"relative",display:"flex",flexDirection:"column",gap:"1.5rem",padding:"1.5rem"}),m=l.ZP.div.attrs((0,c.PT)("tp-info text-main0")).withConfig({displayName:"styles__StyledTitle",componentId:"sc-1yk7f0v-1"})(["",""],{textTransform:"uppercase"});var p=a(28540);let Card2Field=e=>{let{name:r,value:a,big:d=!1,...c}=e,u=(0,l.Fg)();return(0,o.jsxs)(v,{...c,children:[(0,o.jsx)(y,{className:"tp-body3 fs-10",children:r}),(0,o.jsx)(g,{className:"".concat(d?"tp-body3 fs-16":"tp-body fs-12"),children:a||(0,o.jsx)(p.g4,{width:"1em",height:"1em",color:u.color.info})})]})};Card2Field.displayName="Card2Field";let Card2=e=>{let{title:r,children:a,...l}=e;return(0,o.jsxs)(u,{...l,children:[(0,o.jsx)(m,{children:r}),a]})};Card2.displayName="Card2";let f=(0,d.memo)(Card2Field);var h=(0,d.memo)(Card2),v=(0,l.ZP)("div")({display:"flex",alignItems:"center"}),y=(0,l.ZP)("div")({marginRight:"1rem",whiteSpace:"nowrap",textTransform:"uppercase",opacity:"0.6"}),g=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-dwnz0o-0"})({marginLeft:"auto",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})},99983:function(e,r,a){a.d(r,{F:function(){return c}});var o=a(57833);let l={xl:90,lg:60.0625,md:44.6875},d=o.ZP.div.withConfig({displayName:"styles__StyledContainer",componentId:"sc-1bpjbi2-0"})(["",""],e=>{let{$variant:r="lg"}=e;return(0,o.iv)([""," max-width:","rem;"],{marginLeft:"auto",marginRight:"auto",width:"100%",paddingLeft:"1.5rem",paddingRight:"1.5rem","@media (min-width: 62rem)":{paddingLeft:"4rem",paddingRight:"4rem"}},l[r])});var c=d},64885:function(e,r,a){a.d(r,{Z:function(){return m}});var o=a(82729),l=a(85893),d=a(57833),c=a(67294),u=a(31515);function _templateObject(){let e=(0,o._)(["",""]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,o._)(["",""]);return _templateObject1=function(){return e},e}function _templateObject2(){let e=(0,o._)(["",""]);return _templateObject2=function(){return e},e}let NodeDetailEditableField=e=>{let{children:r,isOwner:a,value:o,onChange:d,onBlur:u,onKeyDown:m,wrap:g=!1,...x}=e,[w,N]=(0,c.useState)(),b=(0,c.useRef)(null),k=(0,c.useCallback)(()=>{N(e=>e||!e)},[]),j=(0,c.useCallback)(e=>{N(!1),u&&u(e)},[u]),C=(0,c.useCallback)(e=>{["Escape","Enter","NumpadEnter"].includes(e.code)&&(N(!1),m&&m(e))},[m]),_=(0,c.useCallback)(e=>{var r;let a=null===(r=e.currentTarget)||void 0===r?void 0:r.textContent;d&&d(a)},[d]);return(0,c.useEffect)(()=>{if(!b.current)return;let e=o+"";b.current.textContent!==e&&(b.current.textContent=e||null)},[o,w]),(0,c.useEffect)(()=>{b.current&&(b.current.focus(),function(e){if(!document.createRange)return;let r=document.createRange();r.selectNodeContents(e),r.collapse(!1);let a=window.getSelection();null==a||a.removeAllRanges(),null==a||a.addRange(r)}(b.current),b.current.scrollLeft=b.current.scrollWidth)},[w]),(0,l.jsxs)(p,{...x,children:[w?(0,l.jsx)(f,{ref:b,type:"text",disabled:!a,contentEditable:!0,onInput:_,onBlur:j,onKeyDown:C,suppressContentEditableWarning:!0,...x,$_css:[{minWidth:"1px",borderStyle:"none",outline:"2px solid transparent",outlineOffset:"2px"},!g&&{maxWidth:"100%",overflow:"hidden",whiteSpace:"nowrap"}]}):(0,l.jsx)(h,{$_css2:[!g&&{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}],children:r||o||"NONE"}),a&&(0,l.jsx)(v,{$_css3:[{display:"flex",flexShrink:"0",alignItems:"center",justifyContent:"flex-end",overflow:"hidden"},{maxWidth:w?"0":"1.75rem",transition:"max-width ease-in-out 0.25s 0s"}],children:(0,l.jsx)(y,{name:"edit",onClick:k})})]})};NodeDetailEditableField.displayName="NodeDetailEditableField";var m=(0,c.memo)(NodeDetailEditableField),p=(0,d.ZP)("div")({display:"flex",alignItems:"baseline",overflow:"hidden"}),f=(0,d.ZP)("div")(_templateObject(),e=>e.$_css),h=(0,d.ZP)("div")(_templateObject1(),e=>e.$_css2),v=(0,d.ZP)("div")(_templateObject2(),e=>e.$_css3),y=(0,d.ZP)(u.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-1usbvk1-0"})({marginLeft:"0.75rem",height:"0.875rem",width:"0.875rem",cursor:"pointer"})},84550:function(e,r,a){a.d(r,{Z:function(){return _}});var o=a(85893),l=a(67294),d=a(31515),c=a(57833);let u=c.ZP.input.attrs({type:"file"}).withConfig({displayName:"styles__StyledHiddenFileInput",componentId:"sc-vome1k-0"})(["display:none;"]),m=(0,l.forwardRef)((e,r)=>{let{value:a,onChange:c,accept:m,children:p,error:f,label:h,resetValue:v="",...y}=e,g=(0,l.useRef)(null),x=(0,l.useCallback)(()=>{if(g.current){if(void 0!==v&&a&&a!==v){g.current.value="",c(v);return}g.current.click()}},[c,v,a]),w=(0,l.useCallback)(e=>{let r=e.target,{files:a}=r;if(a){let e=a[0];c(e)}},[c]);return(0,o.jsxs)("div",{tabIndex:-1,ref:r,onClick:x,...y,children:[h&&(0,o.jsx)(d.lX,{label:h,error:f,required:!0}),p,f&&(0,o.jsx)(d.Xq,{error:f}),(0,o.jsx)(u,{type:"file",ref:g,onChange:w,accept:m})]})});m.displayName="HiddenFileInput";var p=(0,l.memo)(m),f=a(25675),h=a.n(f);let v=(0,c.ZP)(p).attrs(e=>({accept:"*.png,*.jpg,*.jpeg,*.svg",...e})).withConfig({displayName:"styles__StyledBackgroundEditInput",componentId:"sc-h8kwva-0"})(["",";"],e=>{let{theme:r}=e;return(0,c.iv)([""," transition:all ease-in-out 0.25s 0s;background-color:","66;border-bottom-left-radius:100%;"],{position:"absolute",right:"-1rem",top:"-1rem",display:"flex",height:"3.5rem",width:"5rem",cursor:"pointer",alignItems:"center",justifyContent:"center",paddingBottom:"1.25rem",paddingLeft:"1.5rem",opacity:"0"},r.color.base1)}),y=c.ZP.div.withConfig({displayName:"styles__StyledContainer",componentId:"sc-h8kwva-1"})(["",""],e=>{let{$backgroundUrl:r,$hash:a,theme:o}=e,l=Object.keys(o.gradient),d=(a||"").split("").reduce((e,r)=>r.charCodeAt(0)+e,0)%l.length,[u,m]=o.gradient[l[d]].colors,p=r?"url(".concat(r,")"):"linear-gradient(90deg, ".concat(u,"cc 0%, ").concat(m,"cc 100%)");return(0,c.iv)([""," background-image:",";background-position:center;background-size:cover;&:before{"," content:'';background:inherit;transition:transform 0.4s ease-in-out;}&:hover{&:before{","}& > ","{","}}"],{position:"relative",zIndex:"0",display:"flex",height:"12.5rem",flexDirection:"column",justifyContent:"flex-end",overflow:"hidden"},p,{position:"absolute",inset:"0px",transformOrigin:"center","--tw-scale-x":"1","--tw-scale-y":"1",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))"},{"--tw-scale-x":"1.1","--tw-scale-y":"1.1",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))"},v,{right:"0px",top:"0px",opacity:"1"})}),g=c.ZP.h1.attrs((0,d.PT)("tp-h5")).withConfig({displayName:"styles__StyledTitle",componentId:"sc-h8kwva-2"})(["",";"],e=>{let{theme:r}=e;return(0,c.iv)([""," color:",";background-color:","E5;"],{zIndex:"10",margin:"0px",paddingLeft:"1.5rem",paddingRight:"1.5rem",paddingTop:"0.125rem",paddingBottom:"0.125rem"},r.color.text,r.color.base1)}),x=c.ZP.h2.attrs((0,d.PT)("tp-body3")).withConfig({displayName:"styles__StyledDescription",componentId:"sc-h8kwva-3"})(["",";"],e=>{let{theme:r}=e;return(0,c.iv)([""," color:",";"],{margin:"0px",paddingLeft:"1.5rem",paddingRight:"1.5rem",paddingTop:"0.75rem",paddingBottom:"0.75rem"},r.color.text)}),w=(0,c.ZP)(p).attrs(e=>({accept:"*.png,*.jpg,*.jpeg,*.svg",...e})).withConfig({displayName:"styles__StyledNodeAvatarEditInput",componentId:"sc-h8kwva-4"})(["",";"],e=>{let{theme:r}=e;return(0,c.iv)([""," transition:all ease-in-out 0.25s 0s;background-color:","66;border-radius:50%;"],{position:"absolute",inset:"0px",display:"flex",cursor:"pointer",alignItems:"center",justifyContent:"center",opacity:"0"},r.color.base1)}),N=c.ZP.div.withConfig({displayName:"styles__StyledNodeAvatarContainer",componentId:"sc-h8kwva-5"})([""," &:hover > ","{","}"],{position:"relative",zIndex:"10",marginLeft:"1.5rem",marginRight:"1.5rem",marginTop:"1rem",marginBottom:"1rem",display:"inline-flex",overflow:"hidden"},w,{opacity:"1"}),b=(0,c.ZP)(d.pN).attrs(e=>({size:"lg",Image:h(),...e})).withConfig({displayName:"styles__StyledNodeAvatar",componentId:"sc-h8kwva-6"})([""]);var k=a(64885),j=a(14685),C=a(16451);function useFileToImg(e){let{file:r}=e,{apiServer:a}=(0,C.r)(),[o,d]=(0,l.useState)();return(0,l.useEffect)(()=>{(async function(){let e;if(!r){d(void 0);return}r instanceof File&&(e=await (0,j.s5)(r)),"string"==typeof r&&((e=new Image).src="".concat(a,"/api/v0/storage/raw/").concat(r)),e&&d(e)})()},[r,a]),{img:o}}let NodeDetailHeader=e=>{let{nameCtrl:r,descriptionCtrl:a,bannerCtrl:l,pictureCtrl:c,isOwner:u,node:m,...p}=e,{img:f}=useFileToImg({file:c.field.value}),{img:h}=useFileToImg({file:l.field.value});return(0,o.jsxs)("div",{...p,children:[(0,o.jsxs)(y,{$hash:null==m?void 0:m.hash,$backgroundUrl:null==h?void 0:h.src,children:[u&&(0,o.jsx)(v,{...l.field,...l.fieldState,resetValue:null==m?void 0:m.banner,children:l.field.value!==(null==m?void 0:m.banner)?(0,o.jsx)(d.JO,{name:"trash"}):(0,o.jsx)(d.JO,{name:"edit"})}),(0,o.jsx)("div",{children:(0,o.jsxs)(N,{children:[(0,o.jsx)(b,{src:null==f?void 0:f.src}),u&&(0,o.jsx)(w,{...c.field,...c.fieldState,resetValue:null==m?void 0:m.picture,children:c.field.value!==(null==m?void 0:m.picture)?(0,o.jsx)(d.JO,{name:"trash"}):(0,o.jsx)(d.JO,{name:"edit"})})]})}),(0,o.jsx)(g,{children:(0,o.jsx)(k.Z,{...r.field,...r.fieldState,placeholder:"name",isOwner:u})})]}),(a.field.value||u)&&(0,o.jsx)(x,{children:(0,o.jsx)(k.Z,{...a.field,...a.fieldState,placeholder:"description",isOwner:u,wrap:!0})})]})};NodeDetailHeader.displayName="NodeDetailHeader";var _=(0,l.memo)(NodeDetailHeader)},44270:function(e,r,a){a.d(r,{Z:function(){return h}});var o=a(85893),l=a(57833),d=a(67294),c=a(41664),u=a.n(c),m=a(31515);let p=(0,l.ZP)(m.JO).withConfig({displayName:"styles__StyledCopytoClipboardIcon",componentId:"sc-6b2rpy-0"})(["",""],e=>{let{theme:r}=e;return(0,l.iv)([""," transition-property:color;transition-duration:","ms;transition-timing-function:",";&:hover{color:",";}"],{cursor:"pointer"},r.transition.duration.fast,r.transition.timing,r.color.main0)}),CopytoClipboardIcon=e=>{let{text:r}=e,a=(0,m.vx)(r||"");return(0,o.jsx)(p,{name:"copy",onClick:a})};CopytoClipboardIcon.displayName="CopytoClipboardIcon";var f=(0,d.memo)(CopytoClipboardIcon);let NodeDetailLink=e=>{let{href:r,children:a,isOwner:l,textToCopy:d,...c}=e,u=(0,o.jsx)(v,{children:a||"NONE"});return(0,o.jsxs)(y,{children:[r?(0,o.jsxs)(g,{href:r,target:"_blank",...c,children:[u,!l&&(0,o.jsx)(x,{name:"external-link-square-alt"})]}):(0,o.jsx)(w,{children:u}),d&&(0,o.jsx)(f,{text:d})]})};NodeDetailLink.displayName="NodeDetailLink";var h=(0,d.memo)(NodeDetailLink),v=(0,l.ZP)("span")({flex:"1 1 0%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),y=(0,l.ZP)("div")({display:"flex",alignItems:"center",gap:"0.5rem"}),g=(0,l.ZP)(u())({display:"flex",width:"100%",minWidth:"0px",alignItems:"center",gap:"0.5rem"}),x=(0,l.ZP)(m.JO)({height:"0.875rem",width:"0.875rem"}),w=(0,l.ZP)("span").withConfig({displayName:"cmp___StyledSpan2",componentId:"sc-1fri0r3-0"})({display:"flex",width:"100%",alignItems:"center"})},16434:function(e,r,a){a.d(r,{Z:function(){return v}});var o=a(85893),l=a(57833),d=a(67294),c=a(31515);let u=(0,l.ZP)(c.cu).attrs(e=>{let{$status:r,...a}=e;return{$color:"active"===r||"linked"===r?"main0":"main1",...a}}).withConfig({displayName:"styles__StyledStatusIcon",componentId:"sc-23wgwz-0"})([""]),NodeStatus=e=>{let{status:r,...a}=e;return(0,o.jsxs)(p,{...a,children:[(0,o.jsx)(u,{$status:r}),(0,o.jsx)(f,{className:"tp-body3",children:r})]})};NodeStatus.displayName="NodeStatus";var m=(0,d.memo)(NodeStatus),p=(0,l.ZP)("div")({display:"flex",alignItems:"center",gap:"0.375rem",paddingTop:"0.375rem"}),f=(0,l.ZP)("span").withConfig({displayName:"cmp___StyledSpan",componentId:"sc-18kkg70-0"})({textTransform:"capitalize"});let h=l.ZP.div.withConfig({displayName:"styles__StyledContainer",componentId:"sc-akpept-0"})(["",""],e=>{let{theme:r}=e;return(0,l.iv)([""," background:","10;"],{paddingLeft:"0.75rem",paddingRight:"0.75rem",paddingTop:"0.375rem",paddingBottom:"0.375rem"},r.color.main0)});l.ZP.div.withConfig({displayName:"styles__StyledContent",componentId:"sc-akpept-1"})([""," ",""],{maxWidth:"100%"},e=>{let{$disabled:r}=e;return r&&(0,l.iv)(["opacity:0.4;filter:grayscale(100%);"])});let NodeDetailStatus=e=>{let{status:r,score:a,...l}=e,d=void 0!==a?"".concat((100*a).toFixed(2),"%"):void 0;return(0,o.jsxs)(h,{...l,children:[(0,o.jsx)("div",{className:"tp-body fs-10",children:"STATUS"}),(0,o.jsxs)(y,{children:[(0,o.jsx)(m,{status:r||"waiting"}),d&&(0,o.jsx)("span",{className:"tp-body3 fs-16",children:d})]})]})};NodeDetailStatus.displayName="NodeDetailStatus";var v=(0,d.memo)(NodeDetailStatus),y=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-53c1rx-0"})({display:"flex",alignItems:"flex-end",justifyContent:"space-between"})},33910:function(e,r,a){a.d(r,{Rr:function(){return c},ZP:function(){return m}});var o=a(85893),l=a(57833),d=a(67294);let c=l.ZP.div.withConfig({displayName:"styles__StyledDotIcon",componentId:"sc-aeyx1g-0"})(e=>{let{theme:r,$score:a}=e,o=void 0===a?r.color.disabled2:a>=.8?r.color.success:a>=.5?r.color.info:r.color.error;return[{height:"0.75rem",width:"0.5rem"},(0,l.iv)(["background-color:",";"],o)]});var u=a(68885);let NodeLinkedNodes=e=>{let{nodes:r,subfix:a,...l}=e,d=u.B.maxLinkedPerNode;return(0,o.jsxs)(p,{...l,children:[(0,o.jsx)(f,{children:Array.from({length:d},(e,a)=>{var l;return(0,o.jsx)(c,{$score:null==r?void 0:null===(l=r[a])||void 0===l?void 0:l.score},a)})}),(0,o.jsxs)(h,{className:"fs-10",children:[null==r?void 0:r.length," ",(0,o.jsxs)(v,{children:["of ",d,a]})]})]})};NodeLinkedNodes.displayName="NodeLinkedNodes";var m=(0,d.memo)(NodeLinkedNodes),p=(0,l.ZP)("div")({display:"inline-flex",alignItems:"center",gap:"0.75rem"}),f=(0,l.ZP)("div")({display:"flex",alignItems:"stretch",gap:"0.125rem"}),h=(0,l.ZP)("div")({whiteSpace:"nowrap",lineHeight:"1rem"}),v=(0,l.ZP)("span").withConfig({displayName:"cmp___StyledSpan",componentId:"sc-1umj7n-0"})({opacity:"0.2"})},29039:function(e,r,a){a.d(r,{t:function(){return Price},Z:function(){return p}});var o=a(85893),l=a(67294),d=a(57833);let c=d.ZP.span.withConfig({displayName:"styles__StyledPrice",componentId:"sc-tdptuh-0"})(["",""],{display:"inline-flex",alignItems:"center",gap:"0.25rem",whiteSpace:"nowrap"});var u=a(31515),m=a(14685);let Price=e=>{let{value:r,duration:a,iconSize:l="0.75em",...d}=e;return(0,o.jsxs)(c,{...d,children:[(0,m.RK)(r),(0,o.jsx)(u.TR,{color:"currentColor",img:"aleph",size:l}),a&&(0,o.jsxs)("span",{children:["/ ",a]})]})};Price.displayName="Price";var p=(0,l.memo)(Price)},91489:function(e,r,a){a.d(r,{Z:function(){return o.Z}});var o=a(29039)},43251:function(e,r,a){a.d(r,{Z:function(){return u}});var o=a(85893),l=a(57833),d=a(67294),c=a(31515);let ResponsiveTooltip=e=>{let{forwardedAs:r,as:a,...l}=e,d=(0,c._K)("md");return(0,o.jsx)(m,{...l,$_css:d?{position:"fixed !important",left:"0px !important",top:"0px !important",zIndex:"20 !important",margin:"1.5rem",height:"calc(100% - 3rem) !important",width:"calc(100% - 3rem) !important",maxWidth:"100% !important",transform:"none !important"}:""})};ResponsiveTooltip.displayName="ResponsiveTooltip";var u=(0,d.memo)(ResponsiveTooltip),m=(0,l.ZP)(c.u).withConfig({displayName:"cmp___StyledTooltip",componentId:"sc-vdmo8c-0"})(["",""],e=>e.$_css)},81990:function(e,r,a){a.d(r,{P:function(){return unsupportedNetworkDisabledMessage}});var o=a(85893);function unsupportedNetworkDisabledMessage(e){return function(e){let{title:r,description:a}=e;return(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"tp-body3 fs-18 text-base2",children:r}),(0,o.jsx)("p",{className:"tp-body1 fs-14 text-base2",children:a})]})}({title:"Ethereum network required",description:(0,o.jsxs)(o.Fragment,{children:[e," doesn't support this action. Please switch to the"," ",(0,o.jsx)("strong",{children:"Ethereum"})," chain using the dropdown at the top of the page."]})})}a(67294)},68518:function(e,r,a){a.d(r,{i:function(){return useLinking}});var o=a(9754),l=a(9324),d=a(31515),c=a(67294),u=a(93787),m=a(37940);function useLinking(){let[e,r]=(0,o.mr)(),{entities:a}=e.crns,{entities:p}=e.ccns,f=(0,u.z)(),{isEthereumNetwork:h,getEthereumNetworkTooltip:v}=(0,m.Y)(),y=(0,d.lm)(),g=(0,c.useCallback)(e=>"string"==typeof e?null==a?void 0:a.find(r=>r.hash===e):e,[a]),x=(0,c.useCallback)(e=>"string"==typeof e?null==p?void 0:p.find(r=>r.hash===e):e,[p]),w=(0,c.useCallback)(e=>{let r=g(e);return!!r&&f.isLinked(r)},[g,f]),N=(0,c.useCallback)((e,r)=>{let a=g(e),o=x(r);return!!a&&!!o&&f.isLinkableBy(a,o)[0]},[x,g,f]),b=(0,c.useCallback)(e=>{let r=g(e);if(!r)return!1;let a=x(r.parentData||r.parent||"");return!!a&&f.isUnlinkableBy(r,a)},[x,g,f]),k=(0,c.useCallback)(async(e,a)=>{try{if(!y)throw Error("Notification not ready");let o=g(e);if(!o)throw Error("Invalid CRN node");let d=x(a);if(!d)throw Error("Invalid CCN node");if(!N(o,d))throw Error("Not linkable node");await f.linkComputeResourceNode(o.hash),y.add({variant:"success",title:"Success",text:'Linked resource node "'.concat(o.hash,'" successfully.')});let[c,u]=function(e,r){let a={...r,virtual:Date.now()},o={...e,virtual:Date.now()};a.parent=o.hash,a.parentData=o;let l=o.crnsData.reduce((e,r)=>(e[r.hash]=r,e),{});return l[a.hash]=a,o.crnsData=Object.values(l),o.resource_nodes=Object.keys(l),[o,a]}(d,o);return r(new l.Wy({name:"ccns",entities:[c]})),r(new l.Wy({name:"crns",entities:[u]})),!0}catch(e){null==y||y.add({variant:"error",title:"Error",text:e.message})}return!1},[r,x,g,N,f,y]),j=(0,c.useCallback)(async e=>{try{if(!y)throw Error("Notification not ready");let a=g(e);if(!a)throw Error("Invalid CRN node");let o=x(a.parentData||a.parent||"");if(!o)throw Error("Invalid CCN node");if(!b(a))throw Error("Not unlinkable node");await f.unlinkComputeResourceNode(a.hash),y.add({variant:"success",title:"Success",text:'Unlinked resource node "'.concat(a.hash,'" successfully.')});let[d,c]=function(e,r){let a={...r,virtual:Date.now()},o={...e,virtual:Date.now()};a.parent="",a.parentData=void 0;let l=o.crnsData.filter(e=>e.hash!==a.hash);return o.crnsData=l,o.resource_nodes=l.map(e=>e.hash),[o,a]}(o,a);return r(new l.Wy({name:"ccns",entities:[d]})),r(new l.Wy({name:"crns",entities:[c]})),!0}catch(e){null==y||y.add({variant:"error",title:"Error",text:e.message})}return!1},[r,x,g,b,f,y]);return{isLinked:w,isLinkableByUser:N,isUnlinkableByUser:b,isEthereumNetwork:h,getEthereumNetworkTooltip:v,handleLink:k,handleUnlink:j}}},50721:function(e,r,a){a.d(r,{_:function(){return useNodeDetail}});var o=a(67294),l=a(11163),d=a(31515),c=a(9754),u=a(93787),m=a(36541);function useNodeDetail(e){var r;let{node:a}=e,p=(0,l.useRouter)(),f=(0,d.lm)(),[{connection:{account:h}}]=(0,c.mr)(),v=(0,u.z)(),y=(0,o.useMemo)(()=>a?v.isCRN(a):void 0,[v,a]),{dispatchDeleteEntity:g}=(0,m.w)({entityName:"crns"}),{dispatchDeleteEntity:x}=(0,m.w)({entityName:"ccns"}),w=(0,o.useCallback)(async()=>{if(a){if(!f)throw Error("Notification not ready");try{let e=null==a?void 0:a.hash;await v.removeNode(e),f.add({variant:"success",title:"Success",text:'Your node "'.concat(a.hash,'" was deleted successfully.')}),y?g(e):x(e),p.replace("/account/earn/".concat(y?"crn":"ccn"))}catch(e){null==f||f.add({variant:"error",title:"Error",text:e.message})}}},[g,x,y,a,v,f,p]),{nodes_with_identical_asn:N}=(null==a?void 0:null===(r=a.scoreData)||void 0===r?void 0:r.measurements)||{},{base_latency:b,measured_at:k}=(null==a?void 0:a.metricsData)||{},j=(0,o.useMemo)(()=>b?"".concat(Number(1e3*(b||0)).toFixed(0)," ms"):void 0,[b]),C=(0,o.useMemo)(()=>{if(!k)return;let e=new Date(1e3*k);return"".concat(e.toLocaleDateString()," (").concat(e.toLocaleTimeString(),")")},[k]),_=(0,o.useMemo)(()=>{if(!a)return;let e=new Date((null==a?void 0:a.time)*1e3);return"".concat(e.toLocaleDateString())},[a]),I=(0,o.useMemo)(()=>a&&v.isUserNode(a),[v,a]);return{account:h,node:a,nodesOnSameASN:N,baseLatency:j,lastMetricsCheck:C,creationDate:_,isOwner:I,handleRemove:w}}},36541:function(e,r,a){a.d(r,{w:function(){return useDispatchDeleteEntityAction}});var o=a(67294),l=a(9754),d=a(9324);function useDispatchDeleteEntityAction(e){let{entityName:r}=e,[,a]=(0,l.mr)(),c=(0,o.useCallback)(e=>{a(new d.gg({name:r,keys:e}));let o=(0,d.zG)(r);o.forEach(e=>a(e))},[a,r]);return{dispatchDeleteEntity:c}}},37940:function(e,r,a){a.d(r,{Y:function(){return useEthereumNetwork}});var o=a(67294),l=a(9754),d=a(72077),c=a(81990);function useEthereumNetwork(){let[e]=(0,l.mr)(),{blockchain:r}=e.connection,a=(0,o.useMemo)(()=>r===d.Ek.ETH,[r]),u=(0,o.useMemo)(()=>{var e;return r?null===(e=d.DR[r])||void 0===e?void 0:e.name:"Current network"},[r]),m=(0,o.useMemo)(()=>()=>a?void 0:(0,c.P)(u),[a,u]);return{isEthereumNetwork:a,blockchainName:u,getEthereumNetworkTooltip:m}}},24959:function(e,r,a){a.d(r,{c:function(){return useForm}});var o=a(31515),l=a(67294),d=a(87536),c=a(79711),u=a(50586);function useForm(e){let{onSubmit:r,onSuccess:a,onError:m,readyDeps:p=[],...f}=e,h=(0,d.cI)(f);(0,l.useEffect)(()=>{"object"==typeof f.defaultValues&&h.reset(f.defaultValues)},[...p]);let[v,y]=(0,l.useState)({data:void 0,error:void 0,loading:!1}),[g,{onLoad:x,onSuccess:w,onError:N}]=(0,o.g7)({flushData:!0,state:v,setState:y,onSuccess:a,onError:m}),b=(0,l.useCallback)(async e=>{try{x();let a=await r(e);w(a)}catch(r){let e=r instanceof c.jm?u.Z.ValidationError:(null==r?void 0:r.cause)||r;h.setError("root.serverError",{...e,message:null==e?void 0:e.message}),N(e)}},[h,N,x,r,w]),k=(0,l.useCallback)(async e=>{let r;if(console.log(e),!r){let a=function getFirstError(e){let[r]=Object.entries(e);if(!r)return;let[a,o]=r;if(Array.isArray(o)){let e=o[o.length-1];return getFirstError(e)}return[a,o]}(e);if(a){let[e,o]=a,l="string"==typeof o?o:(null==o?void 0:o.message)?": ".concat(o.message):(null==o?void 0:o.type)?': "'.concat(null==o?void 0:o.type,'" validation not satisfied'):"";r=u.Z.FieldError(e,l)}}r||(r=u.Z.ValidationError),N(r)},[N]),j=(0,l.useMemo)(()=>h.handleSubmit(b,k),[h,b,k]);return{...h,requestState:g,handleSubmit:j}}},56312:function(e,r,a){a.d(r,{F:function(){return t}});var o=a(87536);let s=(e,r,a)=>{if(e&&"reportValidity"in e){let l=(0,o.U2)(a,r);e.setCustomValidity(l&&l.message||""),e.reportValidity()}},resolvers_o=(e,r)=>{for(let a in r.fields){let o=r.fields[a];o&&o.ref&&"reportValidity"in o.ref?s(o.ref,a,e):o.refs&&o.refs.forEach(r=>s(r,a,e))}},resolvers_r=(e,r)=>{r.shouldUseNativeValidation&&resolvers_o(e,r);let a={};for(let l in e){let d=(0,o.U2)(r.fields,l),c=Object.assign(e[l]||{},{ref:d&&d.ref});if(i(r.names||Object.keys(e),l)){let e=Object.assign({},(0,o.U2)(a,l));(0,o.t8)(e,"root",c),(0,o.t8)(a,l,e)}else(0,o.t8)(a,l,c)}return a},i=(e,r)=>e.some(e=>e.startsWith(r+"."));var n=function(e,r){for(var a={};e.length;){var l=e[0],d=l.code,c=l.message,u=l.path.join(".");if(!a[u]){if("unionErrors"in l){var m=l.unionErrors[0].errors[0];a[u]={message:m.message,type:m.code}}else a[u]={message:c,type:d}}if("unionErrors"in l&&l.unionErrors.forEach(function(r){return r.errors.forEach(function(r){return e.push(r)})}),r){var p=a[u].types,f=p&&p[l.code];a[u]=(0,o.KN)(u,r,a,d,f?[].concat(f,l.message):l.message)}e.shift()}return a},t=function(e,r,a){return void 0===a&&(a={}),function(o,l,d){try{return Promise.resolve(function(l,c){try{var u=Promise.resolve(e["sync"===a.mode?"parse":"parseAsync"](o,r)).then(function(e){return d.shouldUseNativeValidation&&resolvers_o({},d),{errors:{},values:a.raw?o:e}})}catch(e){return c(e)}return u&&u.then?u.then(void 0,c):u}(0,function(e){if(Array.isArray(null==e?void 0:e.errors))return{values:{},errors:resolvers_r(n(e.errors,!d.shouldUseNativeValidation&&"all"===d.criteriaMode),d)};throw e}))}catch(e){return Promise.reject(e)}}}}}]);