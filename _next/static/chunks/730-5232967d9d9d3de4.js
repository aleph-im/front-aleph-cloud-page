"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[730],{83842:function(e,i,n){n.d(i,{up:function(){return l},ZP:function(){return d}});var t=n(19521);let a=t.ZP.div.withConfig({displayName:"styles__StyledFlatCardContainer",componentId:"sc-atft2w-0"})(["",""],{display:"flex",flexWrap:"nowrap",alignItems:"center",justifyContent:"flex-start",gap:"1.5rem","@media (min-width: 48rem)":{flexWrap:"wrap",justifyContent:"space-evenly"}}),r=t.ZP.div.withConfig({displayName:"styles__StyledFlatCard",componentId:"sc-atft2w-1"})(["",""],e=>{let{theme:i,$selected:n,$disabled:a}=e;return(0,t.iv)([""," "," color:",";border:0.1875rem solid transparent;border-radius:1.5rem;background:linear-gradient( 118deg,"," 26.64%,#f4ecff66 118.38% );background-origin:border-box;"," &:hover{border-color:",";border-width:0.1875rem;box-shadow:0px 4px 24px 0px rgba(81,0,205,0.45);backdrop-filter:blur(50px);}",""],{position:"relative",display:"flex",flexShrink:"0",cursor:"pointer",flexDirection:"column",alignItems:"center",justifyContent:"center"},{transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"300ms"},i.color.main0,i.color.purple2,n&&(0,t.iv)(["border-color:",";border-width:0.1875rem;"],i.color.main0),i.color.main0,a&&(0,t.iv)(["filter:grayscale(1);"]))}),l=a;var d=r},48998:function(e,i,n){n.d(i,{Z:function(){return f}});var t=n(85893),a=n(19521),r=n(67294),l=n(72771),d=n(56258),c=n(87536);let o={key:"",isSelected:!0,isNew:!0},s=r.memo(e=>{let{keyCtrl:i,labelCtrl:n,isSelectedCtrl:a,allowRemove:d,isNew:o,handleRemove:s}=function(e){let{name:i="sshKeys",index:n,control:t,allowRemove:a,defaultValue:l,onRemove:d}=e,o=(0,c.bc)({control:t,name:"".concat(i,".").concat(n,".isSelected"),defaultValue:null==l?void 0:l.isSelected}),s=(0,c.bc)({control:t,name:"".concat(i,".").concat(n,".key"),defaultValue:null==l?void 0:l.key}),m=(0,c.bc)({control:t,name:"".concat(i,".").concat(n,".label"),defaultValue:null==l?void 0:l.label}),f=(0,c.bc)({control:t,name:"".concat(i,".").concat(n,".isNew"),defaultValue:(null==l?void 0:l.isNew)||!1}),u=f.field.value,p=(0,r.useCallback)(()=>{u&&d(n)},[n,u,d]);return{index:n,isSelectedCtrl:o,keyCtrl:s,labelCtrl:m,allowRemove:a,isNew:u,handleRemove:p}}(e);return(0,t.jsxs)(t.Fragment,{children:[a.fieldState.error&&(0,t.jsx)(l.Xq,{error:a.fieldState.error}),(0,t.jsxs)(u,{children:[(0,t.jsx)(p,{children:(0,t.jsx)(l.XZ,{...a.field,...a.fieldState,checked:!!a.field.value})}),(0,t.jsxs)(g,{children:[(0,t.jsx)(y,{children:(0,t.jsx)(l.oi,{...i.field,...i.fieldState,required:!0,label:"Key",placeholder:"AAAAB3NzaC1yc2EAAAAB ... B3NzaaC1==",disabled:!o})}),(0,t.jsx)(b,{children:(0,t.jsx)(l.oi,{...n.field,...n.fieldState,label:"Label",placeholder:"me@email.com",disabled:!o})}),d&&(0,t.jsx)(h,{children:o&&(0,t.jsx)(l.zx,{type:"button",kind:"functional",variant:"warning",size:"md",onClick:s,children:(0,t.jsx)(l.JO,{name:"trash"})})})]})]})]})});s.displayName="SSHKeyItem";let m=r.memo(e=>{let{name:i,control:n,fields:a,handleAdd:m,handleRemove:f,allowRemove:u}=function(e){let{name:i="sshKeys",control:n}=e,t=(0,c.Dq)({control:n,name:i}),{remove:a,append:l,replace:s,prepend:m}=t,f=t.fields,[u]=(0,d.S)(),p=(0,r.useMemo)(()=>(u||[]).map((e,i)=>{let{key:n,label:t=""}=e;return{key:n,label:t,isSelected:0===i,isNew:!1}}),[u]);(0,r.useEffect)(()=>{let e=p;if(0===e.length)return;if(0===f.length){s(e);return}let i=new Set(f.map(e=>e.key));0!==(e=p.filter(e=>!i.has(e.key))).length&&m(e)},[p,f,s,m]);let g=(0,r.useMemo)(()=>f.some(e=>e.isNew),[f]),y=(0,r.useCallback)(()=>{l({...o})},[l]);return{name:i,control:n,fields:f,handleAdd:y,handleRemove:a,allowRemove:g}}(e),p=a.map((e,i)=>({...e,index:i})).filter(e=>!e.isNew),g=a.map((e,i)=>({...e,index:i})).filter(e=>!!e.isNew);return(0,t.jsxs)(t.Fragment,{children:[a.length>0&&(0,t.jsx)(l.Jy,{children:(0,t.jsxs)(x,{children:[p.length>0&&(0,t.jsxs)(v,{children:[(0,t.jsx)(S,{forwardedAs:"h3",type:"h7",children:"Existing key list"}),p.map(e=>(0,t.jsx)(s,{name:i,index:e.index,control:n,allowRemove:!0,defaultValue:e,onRemove:f},e.id))]}),g.length>0&&(0,t.jsxs)(w,{children:[(0,t.jsx)(_,{forwardedAs:"h3",type:"h7",children:"New keys"}),g.map(e=>(0,t.jsx)(s,{name:i,index:e.index,control:n,allowRemove:u,defaultValue:e,onRemove:f},e.id))]})]})}),(0,t.jsx)(C,{children:(0,t.jsx)(l.zx,{type:"button",variant:"secondary",color:"main0",size:"md",onClick:m,children:"Add SSH key"})})]})});m.displayName="AddSSHKeys";var f=m,u=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1uniisg-0"})({display:"flex",gap:"1.5rem"}),p=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-1uniisg-1"})({display:"flex",alignItems:"flex-start",paddingTop:"2.75rem"}),g=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-1uniisg-2"})({display:"flex",flex:"1 1 auto",flexDirection:"column",gap:"1.5rem","@media (min-width: 48rem)":{flexDirection:"row"}}),y=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-1uniisg-3"})({flex:"1 1 auto"}),b=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-1uniisg-4"})({"@media (min-width: 48rem)":{width:"33.333333%"}}),h=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-1uniisg-5"})({display:"flex",width:"3.5rem",alignItems:"flex-end",paddingBottom:"0.5rem","@media (min-width: 48rem)":{justifyContent:"center"}}),x=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv7",componentId:"sc-1uniisg-6"})({display:"flex",flexDirection:"column",gap:"2.5rem",paddingBottom:"1.5rem"}),v=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv8",componentId:"sc-1uniisg-7"})({display:"flex",flexDirection:"column",gap:"1.5rem"}),S=(0,a.ZP)(l.DU).withConfig({displayName:"cmp___StyledTextGradient",componentId:"sc-1uniisg-8"})({marginBottom:"0px",alignSelf:"flex-start"}),w=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv9",componentId:"sc-1uniisg-9"})({display:"flex",flexDirection:"column",gap:"1.5rem"}),_=(0,a.ZP)(l.DU).withConfig({displayName:"cmp___StyledTextGradient2",componentId:"sc-1uniisg-10"})({marginBottom:"0px",alignSelf:"flex-start"}),C=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv10",componentId:"sc-1uniisg-11"})({marginLeft:"1.5rem",marginRight:"1.5rem",marginTop:"1.5rem"})},47465:function(e,i,n){n.d(i,{Z:function(){return u}});var t=n(85893),a=n(19521),r=n(67294),l=n(11163),d=n(31776),c=n(72771),o=n(83842);let s=(0,a.ZP)(o.ZP).withConfig({displayName:"styles__StyledFlatCardButton",componentId:"sc-17g2frl-0"})(["height:10.125rem;width:13.875rem;",""],(0,c.gn)("md",(0,a.iv)(["width:30%;"]))),m=(0,r.memo)((0,r.forwardRef)((e,i)=>{let{option:n,index:a,value:d,onChange:c}=e,o=d===n.id,m=function(){let{basePath:e}=(0,l.useRouter)();return e}(),f=(0,r.useCallback)(()=>{n.disabled||c(n.id)},[n,c]),u=(0,r.useCallback)(e=>{("Space"===e.code||"Enter"===e.code)&&(e.preventDefault(),c(n.id))},[n,c]);return(0,t.jsxs)(s,{onClick:f,$selected:o,$disabled:n.disabled,ref:0===a?i:void 0,tabIndex:0,onKeyDown:u,children:[(0,t.jsx)(p,{src:"".concat("".concat(m,"/img"),"/image/").concat(n.dist,".svg"),alt:"".concat(n.name," logo")}),(0,t.jsx)("span",{className:"tp-body1 fs-10",children:n.name})]})}));m.displayName="SelectInstanceImageItem";let f=(0,r.memo)(e=>{let{imageCtrl:i,options:n}=(0,d.Bh)(e);return(0,t.jsxs)(g,{children:[(0,t.jsx)(o.up,{children:n.map((e,n)=>(0,t.jsx)(m,{...i.field,index:n,option:e},e.id))}),i.fieldState.error&&(0,t.jsx)(c.Xq,{error:i.fieldState.error})]})});f.displayName="SelectInstanceImage";var u=f,p=(0,a.ZP)("img").withConfig({displayName:"cmp___StyledImg",componentId:"sc-gz18i0-0"})({marginBottom:"1rem"}),g=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-gz18i0-1"})({width:"100%",overflowX:"auto","@media (min-width: 48rem)":{overflowX:"visible"}})},56258:function(e,i,n){n.d(i,{S:function(){return useAccountSSHKeys}});var t=n(51079),a=n(13731),r=n(67294),l=n(36949),d=n(18395),c=n(72771);function useAccountSSHKeys(){let{triggerOnMount:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[i,n]=(0,t.mr)(),o=(0,d.p)(),s=(0,r.useCallback)(async()=>{if(!o)throw Error("Manager not ready");return await o.getAll()},[o]),m=(0,r.useCallback)(e=>{n({type:a.MF.setAccountSSHKeys,payload:{accountSSHKeys:e}})},[n]),f=(0,r.useCallback)((e,i)=>{o&&i(e)},[o]),u=(0,c.GO)({doRequest:s,onSuccess:m,onError:f,triggerOnMount:e,triggerDeps:[i.account]}),p=i.accountSSHKeys;return(0,l.C)({entities:p,request:u.request,triggerOnMount:e}),[p,u]}},99978:function(e,i,n){n.d(i,{U:function(){return useInstanceManager}});var t=n(51079);function useInstanceManager(){let[e]=(0,t.mr)(),{instanceManager:i}=e;return i}},18395:function(e,i,n){n.d(i,{p:function(){return useSSHKeyManager}});var t=n(51079);function useSSHKeyManager(){let[e]=(0,t.mr)(),{sshKeyManager:i}=e;return i}},36949:function(e,i,n){n.d(i,{C:function(){return useRetryNotConfirmedEntities}});var t=n(67294);function useRetryNotConfirmedEntities(e){let{entities:i=[],request:n,triggerOnMount:a}=e;(0,t.useEffect)(()=>{if(!a)return;let e=(Array.isArray(i)?i:[i]).filter(e=>!e.confirmed);if(!e.length)return;let t=setInterval(n,1e4);return()=>clearInterval(t)},[i,n,a])}},31776:function(e,i,n){n.d(i,{iJ:function(){return d},Bh:function(){return useSelectInstanceImage}}),(a=r||(r={})).Debian11="887957042bb0e360da3485ed33175882ce72a70d79f1ba599400ff4802b7cee7",a.Debian12="6e30de68c6cedfa6b45240c2b51e52495ac6fb1bd4b36457b3d5ca307594d595",a.Ubuntu22="77fef271aa6ff9825efa3186ca2e715d19e7108279b817201c69c34cedc74c27";let t={"887957042bb0e360da3485ed33175882ce72a70d79f1ba599400ff4802b7cee7":{id:"887957042bb0e360da3485ed33175882ce72a70d79f1ba599400ff4802b7cee7",name:"Debian 11 “Bullseye”",dist:"debian"},"6e30de68c6cedfa6b45240c2b51e52495ac6fb1bd4b36457b3d5ca307594d595":{id:"6e30de68c6cedfa6b45240c2b51e52495ac6fb1bd4b36457b3d5ca307594d595",name:"Debian 12 “Bookworm”",dist:"debian"},"77fef271aa6ff9825efa3186ca2e715d19e7108279b817201c69c34cedc74c27":{id:"77fef271aa6ff9825efa3186ca2e715d19e7108279b817201c69c34cedc74c27",name:"Ubuntu 22.04 LTS",dist:"ubuntu"}};var a,r,l=n(87536);let d=r.Debian11,c=[t[r.Debian11],t[r.Debian12],t[r.Ubuntu22]];function useSelectInstanceImage(e){let{name:i="image",control:n,defaultValue:t,options:a}=e,r=(0,l.bc)({control:n,name:i,defaultValue:t});return{imageCtrl:r,options:a||c}}}}]);