"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1514],{11318:function(e,t,n){n.d(t,{p:function(){return InfoTooltipButton},Z:function(){return c}});var i=n(82729),r=n(85893),l=n(57833),s=n(67294),a=n(73899);let o=(0,l.ZP)(a.zx).attrs(e=>({...e,forwardedAs:"span",onClick:e=>e.preventDefault(),kind:"default",size:"md",variant:"textOnly",color:"main0"})).withConfig({displayName:"styles__StyledInfoTooltipButton",componentId:"sc-15cvlnj-0"})(()=>[{cursor:"help !important"}]);var d=n(43251);function _templateObject(){let e=(0,i._)(["",""]);return _templateObject=function(){return e},e}let InfoTooltipButton=e=>{let{children:t,tooltipContent:n,plain:i,align:l="right",vAlign:a="center",iconSize:o="1em",forwardedAs:c,as:x,...h}=e,[f,v]=(0,s.useState)(!1);(0,s.useEffect)(()=>{v(!0)},[]);let y=(0,s.useRef)(null),j=[];switch("left"===l&&j.push({order:"-1"}),a){case"top":j.push({marginBottom:"0.5rem"});break;case"bottom":j.push({marginBottom:"-0.25rem"})}let g=(0,r.jsx)(u,{name:"info-circle",size:o,$_css:j});return(0,r.jsxs)(r.Fragment,{children:[i?(0,r.jsxs)(m,{ref:y,children:[t,g]}):(0,r.jsxs)(p,{ref:y,children:[t,g]}),f&&(0,r.jsx)(d.Z,{...h,targetRef:y,content:n})]})};InfoTooltipButton.displayName="InfoTooltipButton";var c=(0,s.memo)(InfoTooltipButton),u=(0,l.ZP)(a.JO)(_templateObject(),e=>e.$_css),m=(0,l.ZP)("span")({display:"inline-flex",cursor:"help",alignItems:"center",gap:"0.625rem"}),p=(0,l.ZP)(o).withConfig({displayName:"cmp___StyledStyledInfoTooltipButton",componentId:"sc-1jqd2c1-0"})({display:"inline-flex",alignItems:"center",gap:"0.625rem"})},21836:function(e,t,n){n.d(t,{Z:function(){return i.Z}});var i=n(11318)},32424:function(e,t,n){n.d(t,{Z:function(){return j}});var i=n(85893),r=n(57833),l=n(67294),s=n(73899),a=n(28540),o=n(76696),d=n(77541),c=n(14685),u=n(11163),m=n(18395),p=n(68091),x=n(36541),h=n(50586),f=n(86780),v=n(9911),y=n(47104);let SSHKeyDetail=e=>{let{sshKeyId:t,showDelete:n=!1}=e,{sshKey:j,theme:_,handleCopyKey:T,handleCopyLabel:F,handleDelete:O}=function(e){let{sshKeyId:t}=e,n=(0,r.Fg)(),i=(0,u.useRouter)(),{dispatchDeleteEntity:a}=(0,x.w)({entityName:"ssh"}),{entities:o}=(0,p.X)({ids:t}),[d]=o||[],c=(0,s.vx)((null==d?void 0:d.label)||""),v=(0,s.vx)((null==d?void 0:d.key)||""),y=(0,m.p)(),{next:j,stop:g,noti:Z}=(0,f.A)({}),P=(0,l.useCallback)(async()=>{if(!y)throw h.Z.ConnectYourWallet;if(!d)throw h.Z.SSHKeyNotFound;let e=await y.getDelSteps(d),t=e.map(e=>f.n[e]),n=y.delSteps(d);try{for(;;){let{done:e}=await n.next();if(e)break;await j(t)}a(d.id),await i.replace("/console")}catch(i){console.error(i);let e=i.message,t=null==i?void 0:i.cause,n="string"==typeof t?t:null==t?void 0:t.message;null==Z||Z.add({variant:"error",title:"Error",text:e,detail:n})}finally{await g()}},[a,y,d,j,i,g,Z]);return{sshKey:d,theme:n,handleCopyLabel:c,handleCopyKey:v,handleDelete:P}}({sshKeyId:t});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(g,{children:[(0,i.jsxs)(Z,{children:[(0,i.jsx)(P,{name:"key",className:"text-main0"}),(0,i.jsx)("div",{className:"tp-body2",children:j?j.label||(0,c.zN)(j.id):(0,i.jsx)(y.Z,{width:"10rem"})}),(0,i.jsx)(S,{kind:"secondary",variant:(null==j?void 0:j.confirmed)?"success":"warning",children:j?j.confirmed?"READY":(0,i.jsxs)(w,{children:[(0,i.jsx)(b,{children:"CONFIRMING"}),(0,i.jsx)(a.s5,{strokeColor:_.color.base2,width:".8rem"})]}):"LOADING"})]}),(0,i.jsx)("div",{children:n&&(0,i.jsx)(s.zx,{kind:"functional",variant:"error",size:"md",onClick:O,children:(0,i.jsx)(s.JO,{name:"trash"})})})]}),(0,i.jsxs)(s.Jy,{children:[(0,i.jsxs)(C,{children:[(0,i.jsx)(k,{variant:"accent",children:j?v.K_[j.type]:(0,i.jsx)(y.Z,{width:"5rem",height:"1.3rem"})}),(0,i.jsxs)(N,{children:[(0,i.jsx)("div",{className:"tp-info text-main0",children:"KEY"}),(0,i.jsx)(o.Z,{iconName:"copy",onClick:T,children:j?j.key:(0,i.jsx)(y.Z,{width:"12rem"})})]})]}),(0,i.jsx)(d.Z0,{}),(null==j?void 0:j.label)&&(0,i.jsxs)(I,{children:[(0,i.jsx)("div",{className:"tp-info text-main0",children:"LABEL"}),(0,i.jsx)("div",{children:(0,i.jsx)(o.Z,{iconName:"copy",onClick:F,children:(0,i.jsx)(d.xv,{children:null==j?void 0:j.label})})})]}),(0,i.jsxs)(E,{children:[(0,i.jsx)("div",{className:"tp-info text-main0",children:"EXPLORER"}),(0,i.jsx)("div",{children:j?(0,i.jsx)("a",{className:"tp-body1 fs-16",href:j.url,target:"_blank",referrerPolicy:"no-referrer",children:(0,i.jsx)(o.Z,{iconName:"square-up-right",children:(0,i.jsx)(d.xv,{children:(0,c.bs)(j.url,80)})})}):(0,i.jsx)(y.Z,{width:"10rem"})})]}),(0,i.jsxs)(D,{children:[(0,i.jsx)("div",{className:"tp-info text-main0",children:"CREATED ON"}),(0,i.jsx)("div",{children:(0,i.jsx)(d.xv,{className:"fs-10 tp-body1",children:j?j.date:(0,i.jsx)(y.Z,{width:"4rem"})})})]})]})]})};SSHKeyDetail.displayName="SSHKeyDetail";var j=(0,l.memo)(SSHKeyDetail),g=(0,r.ZP)("div")({display:"flex",justifyContent:"space-between",paddingBottom:"1.25rem"}),Z=(0,r.ZP)("div")({display:"flex",alignItems:"center"}),P=(0,r.ZP)(s.JO)({marginRight:"1rem"}),S=(0,r.ZP)(s.__)({marginLeft:"1rem"}),w=(0,r.ZP)("div")({display:"flex",alignItems:"center"}),b=(0,r.ZP)("div")({marginRight:"0.5rem"}),C=(0,r.ZP)("div")({display:"flex",alignItems:"center",justifyContent:"flex-start",overflow:"hidden"}),k=(0,r.ZP)(s.Vp)({marginRight:"1rem",whiteSpace:"nowrap"}),N=(0,r.ZP)("div")({flex:"1 1 auto"}),I=(0,r.ZP)("div")({marginTop:"1.25rem",marginBottom:"1.25rem"}),E=(0,r.ZP)("div")({marginTop:"1.25rem",marginBottom:"1.25rem"}),D=(0,r.ZP)("div").withConfig({displayName:"cmp___StyledDiv9",componentId:"sc-1leuqyp-0"})({marginTop:"1.25rem",marginBottom:"1.25rem"})},45806:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(85893),r=n(57833),l=n(67294),s=n(73899),a=n(47104),o=n(77541),d=n(76696),c=n(33697);let EntityConnectionMethods=e=>{let{executableStatus:t,sshForwardedPort:n}=e,{isLoading:r,formattedIPv4:u,formattedIPv6:h,formattedIpv4SSHCommand:f,formattedIpv6SSHCommand:v,handleCopyIpv4:y,handleCopyIpv6:j,handleCopyIpv4Command:g,handleCopyIpv6Command:Z}=function(e){let{executableStatus:t,sshForwardedPort:n="????"}=e,i=!t,r=(0,l.useMemo)(()=>(null==t?void 0:t.ipv6Parsed)||"",[null==t?void 0:t.ipv6Parsed]),a=(0,l.useMemo)(()=>(null==t?void 0:t.hostIpv4)||"",[null==t?void 0:t.hostIpv4]),o=(0,l.useMemo)(()=>"ssh root@".concat(a," -p ").concat(n),[a,n]),d=(0,l.useMemo)(()=>"ssh root@".concat(r),[r]),c=(0,s.vx)(a),u=(0,s.vx)(r),m=(0,s.vx)(o),p=(0,s.vx)(d);return{isLoading:i,formattedIPv6:r,formattedIPv4:a,formattedIpv4SSHCommand:o,formattedIpv6SSHCommand:d,handleCopyIpv6:u,handleCopyIpv4:c,handleCopyIpv4Command:m,handleCopyIpv6Command:p}}({executableStatus:t,sshForwardedPort:n}),[P,S]=l.useState("ipv4");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m,{className:"tp-h7 fs-24",children:"CONNECTION METHODS"}),(0,i.jsx)(s.Jy,{children:(0,i.jsxs)(p,{children:[(0,i.jsx)(x,{selected:P,onTabChange:()=>{S("ipv4"===P?"ipv6":"ipv4")},align:"left",tabs:[{id:"ipv4",name:"ipv4"},{id:"ipv6",name:"ipv6"}]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(c.Z,{children:"SSH COMMAND"}),(0,i.jsx)("div",{children:r?(0,i.jsx)(a.Z,{width:"20rem"}):(0,i.jsx)(d.Z,{iconName:"copy",onClick:()=>{"ipv4"===P?g():Z()},children:(0,i.jsxs)(o.xv,{children:[">_"," ","ipv4"===P?f:v]})})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(c.Z,{children:"ipv4"===P?"IPV4":"IPV6"}),(0,i.jsx)("div",{children:r?(0,i.jsx)(a.Z,{width:"10rem"}):(0,i.jsx)(d.Z,{iconName:"copy",onClick:()=>{"ipv4"===P?y():j()},children:(0,i.jsx)(o.xv,{children:"ipv4"===P?u:h})})})]})]})})]})};EntityConnectionMethods.displayName="EntityConnectionMethods";var u=(0,l.memo)(EntityConnectionMethods),m=(0,r.ZP)("div")({marginBottom:"0.5rem",textTransform:"uppercase"}),p=(0,r.ZP)("div")({display:"flex",flexDirection:"column",gap:"1rem"}),x=(0,r.ZP)(s.mQ).withConfig({displayName:"cmp___StyledTabs",componentId:"sc-1tccgtt-0"})({marginTop:"-0.75rem",overflow:"hidden"})},88246:function(e,t,n){n.d(t,{Z:function(){return E}});var i=n(85893),r=n(57833),l=n(67294),s=n(73899),a=n(77541),o=n(33697),d=n(68885),c=n(27664),u=n(25093),m=n(71251),p=n(87536),x=n(45901),h=n(56312),f=n(24959);let v={ports:[{port:"",udp:!1,tcp:!1}]},y=x.Ry({port:x.Z_().min(1,"Port is required").refine(e=>{let t=parseInt(e,10);return!isNaN(t)&&t>0&&t<=65535},"Port must be between 1 and 65535"),tcp:x.O7(),udp:x.O7()}).refine(e=>e.tcp||e.udp,"At least one protocol (TCP or UDP) must be selected"),j=x.Ry({ports:x.IX(y).min(1,"At least one port is required")}),g=l.memo(e=>{let{portCtrl:t,tcpCtrl:n,udpCtrl:r,handleRemove:o}=function(e){let{name:t="ports",index:n,control:i,onRemove:r}=e,s=(0,p.bc)({control:i,name:"".concat(t,".").concat(n,".port")}),a=(0,p.bc)({control:i,name:"".concat(t,".").concat(n,".tcp")}),o=(0,p.bc)({control:i,name:"".concat(t,".").concat(n,".udp")}),d=(0,l.useCallback)(()=>{r(n)},[n,r]);return{portCtrl:s,tcpCtrl:a,udpCtrl:o,handleRemove:d}}(e);return(0,i.jsxs)(P,{children:[(0,i.jsxs)(S,{children:[(0,i.jsx)(a.xv,{children:"Port"}),(0,i.jsx)(s.oi,{...t.field,...t.fieldState,placeholder:"8080",required:!0,width:"6em",textAlign:"center"})]}),(0,i.jsxs)(w,{children:[(0,i.jsx)(a.xv,{children:"TCP"}),(0,i.jsx)(s.XZ,{...n.field,...n.fieldState})]}),(0,i.jsxs)(b,{children:[(0,i.jsx)(a.xv,{children:"UDP"}),(0,i.jsx)(s.XZ,{...r.field,...r.fieldState})]}),(0,i.jsx)(C,{children:(0,i.jsx)(s.zx,{type:"button",variant:"warning",kind:"functional",onClick:o,children:(0,i.jsx)(s.JO,{name:"trash-xmark"})})})]})});g.displayName="PortItem";let AddPortForm=e=>{let{onSubmit:t,onCancel:n}=e,{name:r,control:a,handleSubmit:o,fields:d,addPortField:c,removePortField:u}=function(e){let{onSubmit:t,onCancel:n}=e,i="ports",r=(0,l.useCallback)(async e=>{t(e.ports)},[t]),{control:s,handleSubmit:a}=(0,f.c)({defaultValues:v,resolver:(0,h.F)(j),onSubmit:r}),{fields:o,append:d,remove:c}=(0,p.Dq)({control:s,name:i,shouldUnregister:!0}),u=(0,l.useCallback)(()=>{d({port:"",tcp:!1,udp:!1})},[d]),m=(0,l.useCallback)(e=>{o.length>1?c(e):n()},[c,o.length,n]);return{name:i,control:s,fields:o,handleSubmit:a,addPortField:u,removePortField:m}}({onSubmit:t,onCancel:n});return(0,i.jsxs)(k,{onSubmit:o,children:[d.map((e,t)=>(0,i.jsx)(g,{name:r,index:t,control:a,onRemove:u},e.id)),(0,i.jsxs)(N,{children:[(0,i.jsx)(s.zx,{type:"button",variant:"secondary",kind:"gradient",onClick:c,children:"Add Port"}),(0,i.jsx)(s.zx,{type:"submit",variant:"primary",kind:"gradient",children:"Save"})]})]})};AddPortForm.displayName="AddPortForm";var Z=(0,l.memo)(AddPortForm),P=(0,r.ZP)("div")({display:"flex",flexWrap:"wrap",alignItems:"center",gap:"1.5rem"}),S=(0,r.ZP)("div")({display:"flex",flexDirection:"column",gap:"0.75rem"}),w=(0,r.ZP)("div")({display:"flex",flexDirection:"column",gap:"0.75rem"}),b=(0,r.ZP)("div")({display:"flex",flexDirection:"column",gap:"0.75rem"}),C=(0,r.ZP)("div")({alignSelf:"flex-end"}),k=(0,r.ZP)("form")({display:"flex",flexDirection:"column",rowGap:"1rem"}),N=(0,r.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-25x9d1-0"})({marginTop:"1rem",display:"flex",gap:"0.5rem"}),I=n(21836);let EntityPortForwarding=e=>{let{entityHash:t,executableStatus:n,executableManager:r,ports:p,onPortsChange:x}=e,{showPortForm:h,handleAddPort:f,handleCancelAddPort:v,handleRemovePort:y,handleSubmitNewPorts:j}=function(e){let{entityHash:t,executableStatus:n,executableManager:i,ports:r,onPortsChange:s}=e,[a]=(0,u.mr)(),{account:o}=a.connection,p=null==o?void 0:o.address,[x,h]=(0,l.useState)(!1),[f,v]=(0,l.useState)(!1),[y,j]=(0,l.useState)(null),g=(0,l.useCallback)(e=>{let t=[...r,...e];null==s||s(t),h(!1),j(null)},[r,s]),Z=(0,l.useCallback)(e=>{let t=r.filter(t=>t.source!==e);null==s||s(t),j(null)},[r,s]),P=(0,l.useCallback)((e,t)=>{let n=r.map(n=>n.source===e?{...n,isRemoving:t}:n);null==s||s(n)},[r,s]),S=(0,l.useCallback)(e=>{let t=e(r);null==s||s(t)},[r,s]),w=(0,l.useCallback)(e=>{h(void 0!==e?e:e=>!e)},[]),{notifyCRNUpdate:b,scheduleNotifyCRNUpdate:C}=function(e,t,n){let i=(0,l.useRef)(),r=(0,l.useCallback)(async()=>{if(n&&e&&(null==t?void 0:t.node))try{let i=d.B.normalizeUrl(t.node.address||"");if(!i)return;await n.sendPostOperation({hostname:i,operation:"update",vmId:e,requireSignature:!1})}catch(e){console.error("Failed to notify CRN about port changes:",e)}},[n,e,null==t?void 0:t.node]),s=(0,l.useCallback)(()=>{i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{r()},m.If)},[r]);return(0,l.useEffect)(()=>()=>{i.current&&clearTimeout(i.current)},[]),{notifyCRNUpdate:r,scheduleNotifyCRNUpdate:s}}(t,n,i),{addPorts:k,removePort:N}=function(e,t,n,i,r,s,a,o,d){let u=(0,c.C)(),p=(0,l.useCallback)(async l=>{if(!e||!t||!u||n)return;let o=(0,m.FM)(l);if(0===o.length){null==r||r("No valid ports to add (system ports are reserved)");return}let d=await u.getByEntityHash(e),c=(null==d?void 0:d.ports)?Object.keys(d.ports).length:0,p=(0,m.EJ)(o,c);if(!p.isValid){null==r||r(p.errors.join(", "));return}let x=await u.validatePortConflicts(e,o),h=(0,m.z0)(e,t),f=x.conflicts.filter(e=>{let t=parseInt(e,10);return!h.includes(t)});if(f.length>0){null==r||r("Ports already exist: ".concat(f.join(", ")));return}null==s||s(!0);try{await u.addMultiplePorts(e,o);let n=(0,m.Nw)(o);(0,m.Lx)(e,t,n);let r=o.map(e=>({source:e.port,destination:void 0,tcp:e.tcp,udp:e.udp,isDeletable:!0}));null==a||a(r),null==i||i()}catch(e){console.error("Failed to add ports:",e),null==r||r("Failed to add ports")}finally{null==s||s(!1)}},[e,t,u,n,i,r,s,a]),x=(0,l.useCallback)(async l=>{if(e&&t&&u&&!n){if((0,m.MH)(l)){null==r||r("Cannot remove system port ".concat(l));return}null==d||d(l,!0);try{await u.removePort(e,l),(0,m.Ln)(e,t,parseInt(l,10)),null==o||o(l),null==i||i()}catch(e){console.error("Failed to remove port:",e),null==r||r("Failed to remove port")}finally{null==d||d(l,!1)}}},[e,t,u,n,i,r,o,d]);return{addPorts:p,removePort:x}}(t,p,f,C,j,v,g,Z,P);!function(e,t,n,i,r,s){let a=(0,l.useRef)();(0,l.useEffect)(()=>{if(a.current&&clearInterval(a.current),!n||!e||!(null==t?void 0:t.node))return;let checkForUnmappedPorts=async()=>{try{if(!i||!(0,m.Fo)(i))return;await (null==r?void 0:r());let l=d.B.normalizeUrl(t.node.address||"");if(!l)return;let a={id:e,payment:t.node},o=await n.checkStatus(a);(null==o?void 0:o.mappedPorts)&&(null==s||s(e=>e.map(e=>{var t;let n=null===(t=o.mappedPorts)||void 0===t?void 0:t[e.source];return{...e,destination:null==n?void 0:n.host.toString()}})))}catch(e){console.error("Failed to poll for unmapped ports:",e)}};return a.current=setInterval(checkForUnmappedPorts,m.g_),()=>{a.current&&clearInterval(a.current)}},[n,e,null==t?void 0:t.node,i,r,s])}(t,n,i,r,b,S);let I=(0,l.useCallback)(()=>{w(!0)},[w]),E=(0,l.useCallback)(()=>{w(!1),j(null)},[w]),D=(0,l.useCallback)(async e=>{await N(e)},[N]),_=(0,l.useCallback)(async e=>{await k(e),y||w(!1)},[k,y,w]);return{showPortForm:x,isLoading:f,error:y,handleAddPort:I,handleCancelAddPort:E,handleRemovePort:D,handleSubmitNewPorts:_}}({entityHash:t,executableStatus:n,executableManager:r,ports:p,onPortsChange:x}),g=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D,{className:"tp-body3 fs-18 text-base2",children:"IPv4 Port Forwarding Details"}),(0,i.jsx)("p",{className:"tp-body2 fs-14",children:"Randomized Source Ports:"}),(0,i.jsx)("p",{className:"tp-body1 fs-14",children:"Source (external) ports are automatically assigned and may change whenever the instance or function is reallocated. Always refer to the instance detail page to verify current mappings."}),(0,i.jsx)(_,{className:"tp-body2 fs-14",children:"Port Limits:"}),(0,i.jsx)("p",{className:"tp-body1 fs-14",children:"You can specify up to 20 internal ports per instance or function. Ensure you enter ports relevant to your service to maintain effective network security and performance."})]});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T,{className:"tp-h7 fs-24",children:(0,i.jsx)(I.Z,{plain:!0,my:"top-right",at:"top-right",vAlign:"bottom",iconSize:"0.9em",tooltipContent:g,children:"IPV4 PORT FORWARDING"})}),(0,i.jsx)(s.Jy,{children:(0,i.jsxs)(F,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(o.Z,{children:"CONFIGURED PORTS"}),(0,i.jsx)(a.xv,{children:"Maximum 20 ports allowed"})]}),p.map(e=>{let{source:t,destination:n,tcp:r,udp:l,isDeletable:o,isRemoving:d}=e;return(0,i.jsxs)(O,{children:[(0,i.jsxs)(H,{children:[(0,i.jsxs)(M,{children:[(0,i.jsx)(a.xv,{children:"Source"}),(0,i.jsx)(s.oi,{name:"source-port",dataView:!0,defaultValue:t,required:!0,width:"6em",textAlign:"center"})]}),(0,i.jsx)(A,{className:"text-main0 fs-18",children:"-"}),(0,i.jsxs)(R,{children:[(0,i.jsx)(a.xv,{children:"Destination"}),(0,i.jsx)(s.oi,{name:"destination-port",dataView:!0,defaultValue:n,required:!0,width:"6em",textAlign:"center",loading:!n})]})]}),(0,i.jsxs)(B,{children:[(0,i.jsxs)(z,{children:[(0,i.jsx)(a.xv,{children:"TCP"}),(0,i.jsx)(s.XZ,{disabled:!0,checked:r})]}),(0,i.jsxs)(K,{children:[(0,i.jsx)(a.xv,{children:"UDP"}),(0,i.jsx)(s.XZ,{disabled:!0,checked:l})]}),o&&(0,i.jsx)(G,{children:(0,i.jsx)(s.zx,{variant:"warning",kind:"functional",onClick:()=>y(t),disabled:!!d,children:(0,i.jsx)(s.JO,{name:d?"spinner":"trash-xmark",spin:d})})})]})]},"port-".concat(t))}),(0,i.jsx)(X,{children:h?(0,i.jsx)(Z,{onSubmit:j,onCancel:v}):(0,i.jsx)(q,{children:(0,i.jsx)(s.zx,{variant:"secondary",kind:"gradient",onClick:f,children:"Add"})})})]})})]})};EntityPortForwarding.displayName="EntityPortForwarding";var E=(0,l.memo)(EntityPortForwarding),D=(0,r.ZP)("p")({marginBottom:"1rem"}),_=(0,r.ZP)("p")({marginTop:"1rem"}),T=(0,r.ZP)("div")({marginBottom:"0.5rem",display:"flex",alignItems:"center",textTransform:"uppercase"}),F=(0,r.ZP)("div")({display:"flex",flexDirection:"column",rowGap:"1rem"}),O=(0,r.ZP)("div")({display:"flex",flexWrap:"wrap",alignItems:"center",columnGap:"1.5rem",rowGap:"0.25rem"}),H=(0,r.ZP)("div")({display:"flex",alignItems:"center",gap:"1rem"}),M=(0,r.ZP)("div")({display:"flex",flexDirection:"column",gap:"0.75rem"}),A=(0,r.ZP)("div")({marginBottom:"0.75rem",alignSelf:"flex-end",fontWeight:"700"}),R=(0,r.ZP)("div")({display:"flex",flexDirection:"column",gap:"0.75rem"}),B=(0,r.ZP)("div")({display:"flex",alignItems:"center",gap:"1.5rem"}),z=(0,r.ZP)("div")({display:"flex",flexDirection:"column",gap:"0.75rem"}),K=(0,r.ZP)("div")({display:"flex",flexDirection:"column",gap:"0.75rem"}),G=(0,r.ZP)("div")({alignSelf:"flex-end"}),X=(0,r.ZP)("div")({marginTop:"0.5rem"}),q=(0,r.ZP)("div").withConfig({displayName:"cmp___StyledDiv11",componentId:"sc-12viyya-0"})({marginTop:"0.5rem"})},1131:function(e,t,n){n.d(t,{Z:function(){return m}});var i=n(85893),r=n(57833),l=n(67294),s=n(73899),a=n(47104),o=n(77541),d=n(29159),c=n(9911),u=n(33697);let EntitySSHKeys=e=>{let{sshKeys:t,onSSHKeyClick:n}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p,{className:"tp-h7 fs-24",children:"SSH KEYS"}),(0,i.jsx)(s.Jy,{children:(0,i.jsx)(x,{children:t.length?t.map(e=>e&&(0,i.jsxs)(d.Z,{onClick:()=>{n(e)},children:[(0,i.jsx)(h,{id:c.DA[c.py.SSHKey],color:"base2",size:"2.5rem"}),(0,i.jsxs)("div",{children:[(0,i.jsx)(u.Z,{children:"SSH KEY NAME"}),(0,i.jsx)(o.xv,{children:e.label})]}),(0,i.jsx)(f,{name:"eye",className:"openEntityIcon"})]},null==e?void 0:e.id)):(0,i.jsxs)(v,{children:[(0,i.jsx)(y,{id:c.DA[c.py.SSHKey],color:"main0",size:"2.5rem"}),(0,i.jsxs)("div",{children:[(0,i.jsx)(u.Z,{children:"SSH KEY NAME"}),(0,i.jsx)(o.xv,{children:(0,i.jsx)(a.Z,{width:"9rem"})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(u.Z,{children:"CREATED ON"}),(0,i.jsx)(o.xv,{children:(0,i.jsx)(a.Z,{width:"14rem"})})]})]})})})]})};EntitySSHKeys.displayName="EntitySSHKeys";var m=(0,l.memo)(EntitySSHKeys),p=(0,r.ZP)("div")({marginBottom:"0.5rem",textTransform:"uppercase"}),x=(0,r.ZP)("div")({display:"flex",flexWrap:"wrap",gap:"1rem"}),h=(0,r.ZP)(s._7)({minHeight:"3rem",minWidth:"3rem"}),f=(0,r.ZP)(s.JO)({position:"absolute",right:"0.5rem",top:"0.5rem"}),v=(0,r.ZP)("div")({display:"flex",alignItems:"center",gap:"1.5rem"}),y=(0,r.ZP)(s._7).withConfig({displayName:"cmp___StyledObjectImg2",componentId:"sc-1wen0ti-0"})({minHeight:"3rem",minWidth:"3rem"})},84427:function(e,t,n){n.d(t,{Z:function(){return p}});var i=n(85893),r=n(57833),l=n(67294),s=n(73899),a=n(47104),o=n(76696),d=n(77541),c=n(14685),u=n(9911),m=n(33697);let InstanceEntityDetails=e=>{let{entity:t,title:n="INSTANCE"}=e,r=(0,s.vx)((null==t?void 0:t.id)||"");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(x,{className:"tp-h7 fs-24",children:[n," DETAILS"]}),(0,i.jsx)(s.Jy,{children:(0,i.jsxs)(h,{children:[(0,i.jsx)(f,{id:u.DA[u.py.Instance],color:"main0",size:"6rem"}),(0,i.jsxs)(v,{children:[(0,i.jsxs)(y,{children:[(0,i.jsx)(m.Z,{children:"ITEM HASH"}),t?(0,i.jsx)(o.Z,{iconName:"copy",onClick:r,children:t.id}):(0,i.jsx)(a.Z,{width:"100%"})]}),(0,i.jsxs)(j,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(m.Z,{children:"CORES"}),(0,i.jsx)("div",{children:(0,i.jsx)(g,{children:(null==t?void 0:t.resources)?"".concat(t.resources.vcpus," x86 64bit"):(0,i.jsx)(a.Z,{width:"7rem"})})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(m.Z,{children:"RAM"}),(0,i.jsx)("div",{children:(0,i.jsx)(d.xv,{children:(null==t?void 0:t.resources)?(0,c.Fx)(t.resources.memory,{from:"MiB",to:"GiB",displayUnit:!0}):(0,i.jsx)(a.Z,{width:"4rem"})})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(m.Z,{children:"HDD"}),(0,i.jsx)("div",{children:(0,i.jsx)(d.xv,{children:t?(0,c.Fx)(t.size,{from:"MiB",to:"GiB",displayUnit:!0}):(0,i.jsx)(a.Z,{width:"6rem"})})})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(m.Z,{children:"EXPLORER"}),(0,i.jsx)("div",{children:t?(0,i.jsx)("a",{className:"tp-body1 fs-16",href:t.url,target:"_blank",referrerPolicy:"no-referrer",children:(0,i.jsx)(o.Z,{iconName:"square-up-right",children:(0,i.jsx)(d.xv,{children:(0,c.bs)(t.url,80)})})}):(0,i.jsx)(a.Z,{width:"20rem"})})]})]})]})})]})};InstanceEntityDetails.displayName="InstanceEntityDetails";var p=(0,l.memo)(InstanceEntityDetails),x=(0,r.ZP)("div")({marginBottom:"0.5rem",textTransform:"uppercase"}),h=(0,r.ZP)("div")({display:"flex",gap:"1rem"}),f=(0,r.ZP)(s._7)({minHeight:"7rem",minWidth:"7rem"}),v=(0,r.ZP)("div")({display:"flex",width:"100%",flexDirection:"column",gap:"1rem"}),y=(0,r.ZP)("div")({width:"100%"}),j=(0,r.ZP)("div")({display:"flex",flexWrap:"wrap",gap:"1rem"}),g=(0,r.ZP)(d.xv).withConfig({displayName:"cmp___StyledText",componentId:"sc-nylz7s-0"})({display:"flex",alignItems:"center",gap:"0.25rem"})},98897:function(e,t,n){n.d(t,{a:function(){return useManageInstanceEntity}});var i=n(11163),r=n(67294),l=n(57125),s=n(60566),a=n(14685),o=n(37850),d=n(50090),c=n(63831),u=n(68091);function useManageInstanceEntity(e){let{entity:t,entityManager:n}=e,m=(0,i.useRouter)(),[p,x]=(0,r.useState)("detail"),h=(0,l.y)({executable:t,manager:n,subscribeLogs:"log"===p}),{streamDetails:f,logs:v}=h,y=(0,r.useMemo)(()=>{var e;return t?(null==t?void 0:null===(e=t.metadata)||void 0===e?void 0:e.name)||(0,a.zN)(t.id):""},[t]),j=(0,r.useMemo)(()=>(null==t?void 0:t.time)?Math.floor(Date.now()-1e3*t.time)/1e3:void 0,[null==t?void 0:t.time]),{handleDownloadLogs:g,isDownloadingLogs:Z}=(0,o.Z)({fileName:y,logs:v}),P=(0,r.useCallback)(()=>{m.push(".")},[m]),{entities:S}=(0,u.X)(),w=(0,r.useMemo)(()=>(null==t?void 0:t.authorized_keys)&&S?t.authorized_keys.map(e=>S.find(t=>t.key===e)):[],[t,S]),{persistentVolumes:b,immutableVolumes:C}=(0,d.Z)({volumes:null==t?void 0:t.volumes}),{customDomains:k,isLoading:N}=(0,c.Z)({entityId:null==t?void 0:t.id}),I=(0,r.useCallback)(e=>{M({isOpen:!0,type:"domain",selectedDomain:e})},[]),E=(0,r.useCallback)(()=>{M({isOpen:!0,type:"newDomain"})},[]),[D,_]=(0,r.useState)(),[T,F]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let fetchCost=async()=>{if((null==t?void 0:t.payment)&&n){F(!0);try{let e=await n.getTotalCostByHash(t.payment.type,t.id);_(e)}catch(e){console.error("Error fetching cost:",e)}finally{F(!1)}}};fetchCost()},[t,n]);let O=(0,r.useMemo)(()=>{var e,n;switch(null==t?void 0:null===(e=t.payment)||void 0===e?void 0:e.type){case s.uG.hold:return[{cost:D,paymentType:s.uG.hold,runningTime:j,startTime:t.time,blockchain:t.payment.chain,loading:T}];case s.uG.superfluid:if(null==f?void 0:null===(n=f.streams)||void 0===n?void 0:n.length)return f.streams.map(e=>{var n;return{cost:e.flow,paymentType:s.uG.superfluid,runningTime:j,startTime:null==t?void 0:t.time,blockchain:null==t?void 0:null===(n=t.payment)||void 0===n?void 0:n.chain,loading:!1,receiver:e.receiver}});default:return[{paymentType:s.uG.hold,loading:!0}]}},[D,null==t?void 0:t.payment,j,null==t?void 0:t.time,null==f?void 0:f.streams,T]),[H,M]=(0,r.useState)({isOpen:!1}),A=(0,r.useCallback)(e=>{M({isOpen:!0,type:"volume",selectedVolume:e})},[]),R=(0,r.useCallback)(e=>{M({isOpen:!0,type:"sshKey",selectedSSHKey:e})},[]),B=(0,r.useCallback)(()=>{x("log"),M({isOpen:!0,type:"logs"})},[]),z=(0,r.useCallback)(()=>{M(e=>({...e,isOpen:!1}))},[]);return{...h,mappedKeys:w,customDomains:k,isLoadingCustomDomains:N,handleCustomDomainClick:I,handleAddDomain:E,handleBack:P,handleDownloadLogs:g,isDownloadingLogs:Z,paymentData:O,immutableVolumes:C,persistentVolumes:b,name:y,sidePanel:H,handleImmutableVolumeClick:A,handleSSHKeyClick:R,handleViewLogs:B,closeSidePanel:z}}},27744:function(e,t,n){n.d(t,{P:function(){return useForwardedPorts}});var i=n(67294),r=n(27664),l=n(25093),s=n(71251);function useForwardedPorts(){let{entityHash:e,executableStatus:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[n]=(0,l.mr)(),{account:a}=n.connection,o=null==a?void 0:a.address,[d,c]=(0,i.useState)((0,s.yX)()),[u,m]=(0,i.useState)(!1),[p,x]=(0,i.useState)(null),h=(0,r.C)(),f=(0,i.useCallback)(async()=>{if(!e||!o||!h){c((0,s.yX)()),m(!1);return}m(!0);try{let t=await h.getByEntityHash(e),n=(null==t?void 0:t.ports)||{},i=(0,s.gy)(e,o,n),r=(0,s.CH)(e,o,i),l=(0,s.$g)(r),a=[...(0,s.yX)(),...l];c(a),x(null)}catch(e){console.error("Failed to load ports:",e),x("Failed to load ports"),c((0,s.yX)())}finally{m(!1)}},[e,o,h]);return(0,i.useEffect)(()=>{f()},[f]),(0,i.useEffect)(()=>{(null==t?void 0:t.mappedPorts)&&c(e=>(0,s.Ph)(e,t.mappedPorts))},[null==t?void 0:t.mappedPorts]),{ports:d,isLoading:u,error:p,reloadPorts:f}}},27664:function(e,t,n){n.d(t,{C:function(){return useForwardedPortsManager}});var i=n(25093);function useForwardedPortsManager(){let[e]=(0,i.mr)(),{forwardedPortsManager:t}=e.manager;return t}},18395:function(e,t,n){n.d(t,{p:function(){return useSSHKeyManager}});var i=n(25093);function useSSHKeyManager(){let[e]=(0,i.mr)(),{sshKeyManager:t}=e.manager;return t}},68091:function(e,t,n){n.d(t,{X:function(){return useRequestSSHKeys}});var i=n(18395),r=n(77205);function useRequestSSHKeys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.p)();return(0,r.F)({...e,manager:t,name:"ssh"})}}}]);