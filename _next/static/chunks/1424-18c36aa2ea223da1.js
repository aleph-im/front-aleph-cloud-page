"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1424],{87699:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(85893),r=n(57833),a=n(67294),o=n(73899);let s=(0,r.ZP)(o.zx).attrs(e=>({...e,forwardedAs:"a",kind:"default",variant:"textOnly",color:"main0"})).withConfig({displayName:"styles__StyledExternalLinkButton",componentId:"sc-1fpmkx0-0"})([""]),ExternalLinkButton=e=>{let{children:t,href:n,size:r="md",forwardedAs:a,...o}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s,{href:n,size:r,...o,target:"_blank",children:[t||n,(0,i.jsx)(d,{name:"square-up-right"})]})})};ExternalLinkButton.displayName="ExternalLinkButton";var l=(0,a.memo)(ExternalLinkButton),d=(0,r.ZP)(o.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-7jgrdd-0"})({marginLeft:"0.625rem"})},61424:function(e,t,n){n.d(t,{I3:function(){return NewDomainForm},ZP:function(){return S}});var i=n(85893),r=n(57833),a=n(67294),o=n(73899),s=n(75650),l=n(11163),d=n(24959),c=n(80380),m=n(9754),u=n(11525),f=n(9911),p=n(87536),h=n(56312),g=n(53424),x=n(86780),y=n(9324),b=n(50586);let w={...g.Pg};var v=n(99983),j=n(49531),I=n(87699),P=n(34517);let Y=r.ZP.section.withConfig({displayName:"styles__StyledSection",componentId:"sc-byjtw6-0"})([""," ",""],{padding:"0px"},e=>{let{$isEmbedded:t}=e;return!t&&{paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}}),NewDomainForm=e=>{let{name:t,entityId:n,entityType:r,onSuccess:g,variant:S="embedded",showResourceSelection:B=!1}=e,{entities:L,nameCtrl:M,targetCtrl:q,refCtrl:R,errors:J,handleSubmit:Q,setTarget:W,setRef:O,initialTarget:V}=function(e){let{name:t,entityId:n,entityType:i,onSuccess:r}=e,o=(0,l.useRouter)(),[{instance:{entities:s},program:{entities:g},website:{entities:v},confidential:{entities:j}},I]=(0,m.mr)(),P=(0,c.A)(),{next:Y,stop:S}=(0,x.A)({}),C=(0,a.useMemo)(()=>({...w,...t?{name:t}:{},...i?{target:i}:{},...n?{ref:n}:{}}),[t,i,n]),k=(0,a.useCallback)(async e=>{if(!P)throw b.Z.ConnectYourWallet;let t=await P.getAddSteps(e,"override"),n=t.map(e=>x.n[e]),i=P.addSteps(e,"override");try{let e;for(;!e;){let{value:t,done:r}=await i.next();if(r){e=t[0];break}await Y(n)}I(new y.Wy({name:"domain",entities:e})),console.log("accountDomain",e),null==r||r(e)}finally{await S()}},[I,P,Y,r,S]),{control:F,handleSubmit:T,setValue:Z,reset:N,formState:{errors:D}}=(0,d.c)({defaultValues:C,onSubmit:k,resolver:(0,h.F)(u.Y.addSchema)}),E=(0,a.useRef)(!1);(0,a.useEffect)(()=>{!E.current&&(i||n)&&(E.current=!0,N({name:t||"",target:i||w.target,ref:n||""}))},[i,n,t,N]);let _=(0,a.useRef)(!1);(0,a.useEffect)(()=>{if(_.current)return;_.current=!0;let e=window.location.pathname+window.location.hash;window.history.replaceState(window.history.state,"",e)},[o.isReady,o.asPath]);let z=(0,p.bc)({control:F,name:"name"}),A=(0,p.bc)({control:F,name:"target",rules:{onChange(e){Z("ref","")}}}),B=(0,p.bc)({control:F,name:"ref"}),L=A.field.value,M=(0,a.useMemo)(()=>{if(!L)return[];if(L!==f.sY.IPFS){let e=L===f.sY.Instance?s:L===f.sY.Confidential?j:g;return(e||[]).map(e=>{let{id:t,metadata:n}=e;return{label:(null==n?void 0:n.name)||t,value:t,type:L}})}return(v||[]).map(e=>{let{id:t,volume_id:n}=e;return{label:t,value:n,type:L}})},[L,s,g,v,j]),q=(0,a.useMemo)(()=>!!(null==s?void 0:s.length),[s]),R=(0,a.useMemo)(()=>!!(null==g?void 0:g.length),[g]),J=(0,a.useMemo)(()=>!!(null==v?void 0:v.length),[v]),Q=(0,a.useMemo)(()=>!!(null==j?void 0:j.length),[j]);return(0,a.useEffect)(()=>{L===f.sY.Instance&&q?Z("target",f.sY.Instance):L===f.sY.Confidential&&Q?Z("target",f.sY.Confidential):L===f.sY.Program&&R?Z("target",f.sY.Program):L===f.sY.IPFS&&Z("target",f.sY.IPFS)},[L,R,q,Q,J,Z]),{entities:M,nameCtrl:z,targetCtrl:A,refCtrl:B,errors:D,handleSubmit:T,setTarget:e=>{Z("target",e)},setRef:e=>{Z("ref",e)},initialTarget:i}}({name:t,entityId:n,entityType:r,onSuccess:g}),getTabIdFromTarget=e=>{switch(e){case f.sY.Instance:case f.sY.Program:case f.sY.Confidential:return"compute";case f.sY.IPFS:return"ipfs";default:return"website"}},[$,H]=(0,a.useState)(()=>getTabIdFromTarget(V));(0,a.useEffect)(()=>{V&&H(getTabIdFromTarget(V))},[V]);let U=(0,a.useMemo)(()=>{switch(q.field.value){case f.sY.Instance:return"instance";case f.sY.Confidential:return"confidential";default:return"function"}},[q.field.value]),G="embedded"===S,K=G?a.Fragment:v.F;return(0,i.jsx)(K,{children:(0,i.jsxs)(s.Z,{onSubmit:Q,errors:J,children:[(0,i.jsxs)(Y,{$isEmbedded:G,children:[(0,i.jsx)(j.N,{number:1,children:"Custom domain"}),(0,i.jsx)(C,{children:"Assign a user-friendly domain to your website, instance or function to not only simplify access to your web3 application but also enhance its professional appearance. This is an effective way to elevate user experience, establish brand identity or streamline the navigation process within your application."}),(0,i.jsx)(o.Jy,{children:(0,i.jsx)(o.oi,{...M.field,...M.fieldState,required:!0,label:"Enter your desired custom domain in the field below",placeholder:"yourdomain.io"})}),(0,i.jsx)(k,{children:(0,i.jsx)(I.Z,{href:f.cr.docs.customDomains,children:"Learn more"})}),!B&&(0,i.jsx)(F,{children:(0,i.jsx)(o.zx,{type:"submit",color:"main0",kind:"default",size:"md",variant:"primary",children:"Create domain"})})]}),B&&(0,i.jsxs)(Y,{$isEmbedded:G,children:[(0,i.jsx)(j.N,{number:2,children:"Select Resource"}),(0,i.jsx)(T,{children:"You'll need to specify the resource your custom domain will be associated with. This could either be a website, an instance or a function, depending on what you want your custom domain to point to."}),(0,i.jsx)(Z,{children:(0,i.jsx)(o.mQ,{align:"left",selected:$,onTabChange:e=>{O(""),H(e),["website","ipfs"].includes(e)?W(f.sY.IPFS):W(f.sY.Program)},tabs:[{id:"website",name:"Website"},{id:"compute",name:"Compute"},{id:"ipfs",name:"IPFS"}]})}),(0,i.jsx)("div",{role:"tabpanel",children:"website"===$?(0,i.jsx)(N,{children:L.length>0?(0,i.jsx)(o.Lt,{...R.field,...R.fieldState,required:!0,label:"Link your custom domain to a specific website",children:L.map(e=>{let{label:t,value:n}=e;return(0,i.jsx)(o.Qr,{value:n,children:t},n)})}):(0,i.jsxs)("div",{children:[(0,i.jsx)(D,{children:"If you want to link a domain to a website, you need to deploy one first *"}),(0,i.jsx)(P.Z,{type:"button",kind:"functional",size:"md",variant:"warning",href:f.cr.console.web3Hosting.website.new,children:"Create your first website"})]})}):"compute"===$?(0,i.jsxs)(E,{children:[(0,i.jsxs)(o.Ee,{...q.field,...q.fieldState,required:!0,label:"Choose resource type",direction:"row",children:[(0,i.jsx)(o.Y8,{label:f.Ni[f.sY.Program],value:f.sY.Program}),(0,i.jsx)(o.Y8,{label:f.Ni[f.sY.Instance],value:f.sY.Instance}),(0,i.jsx)(o.Y8,{label:f.Ni[f.sY.Confidential],value:f.sY.Confidential})]}),L.length>0?(0,i.jsx)(_,{children:(0,i.jsx)(o.Lt,{...R.field,...R.fieldState,required:!0,label:"Select the specific resource",children:L.map(e=>{let{label:t,value:n}=e;return(0,i.jsx)(o.Qr,{value:n,children:t},n)})})}):(0,i.jsxs)("div",{children:[(0,i.jsxs)(z,{children:["If you want to link a domain to a ",U,", you need to deploy one first *"]}),(0,i.jsx)(P.Z,{type:"button",kind:"functional",size:"md",variant:"warning",href:"/console/computing/".concat(U,"/new"),children:"Create your first ".concat(U)})]})]}):"ipfs"===$?(0,i.jsx)(o.Jy,{children:(0,i.jsx)(o.oi,{...R.field,...R.fieldState,required:!0,label:"Link your custom domain to an Aleph Message ID",placeholder:"Paste your IPFS Aleph Message ID"})}):(0,i.jsx)(i.Fragment,{})}),(0,i.jsx)(A,{children:(0,i.jsx)(o.zx,{type:"submit",color:"main0",kind:"default",size:"md",variant:"primary",children:"Create domain"})})]})]})})};NewDomainForm.displayName="NewDomainForm";var S=(0,a.memo)(NewDomainForm),C=(0,r.ZP)("p")({marginBottom:"1.5rem"}),k=(0,r.ZP)("div")({marginTop:"1.5rem",textAlign:"right"}),F=(0,r.ZP)("div")({zIndex:"0",marginTop:"2.5rem",textAlign:"center"}),T=(0,r.ZP)("p")({marginBottom:"1.5rem"}),Z=(0,r.ZP)("div")({marginTop:"2.5rem",marginBottom:"2.5rem"}),N=(0,r.ZP)(o.Jy)({zIndex:"10 !important"}),D=(0,r.ZP)("p")({marginBottom:"0.75rem",marginTop:"0.125rem","--tw-text-opacity":"1",color:"rgb(0 0 0 / var(--tw-text-opacity, 1))"}),E=(0,r.ZP)(o.Jy)({zIndex:"10 !important"}),_=(0,r.ZP)("div")({marginTop:"2.5rem"}),z=(0,r.ZP)("p")({marginBottom:"0.75rem",marginTop:"1.5rem","--tw-text-opacity":"1",color:"rgb(0 0 0 / var(--tw-text-opacity, 1))"}),A=(0,r.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-iaqpgs-0"})({zIndex:"0",marginTop:"2.5rem",textAlign:"center"})},53424:function(e,t,n){n.d(t,{Pg:function(){return o},Q1:function(){return useDomainItem},Qd:function(){return useAddDomains}});var i=n(9911),r=n(67294),a=n(87536);let o={name:"",ref:"",target:i.sY.IPFS};function useDomainItem(e){let{name:t="domains",index:n,control:i,defaultValue:o,onRemove:s}=e,l=(0,a.bc)({control:i,name:"".concat(t,".").concat(n,".name"),defaultValue:null==o?void 0:o.name}),d=(0,r.useCallback)(()=>{s(n)},[n,s]);return{nameCtrl:l,handleRemove:d}}function useAddDomains(e){let{name:t="domains",control:n,entityType:i}=e,s=(0,a.Dq)({control:n,name:t,shouldUnregister:!0}),{fields:l,remove:d,append:c}=s,m=(0,r.useCallback)(()=>{c({...o,target:i})},[c,i]);return{name:t,control:n,fields:l,handleAdd:m,handleRemove:d}}}}]);