(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3806],{52020:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/console/computing/confidential",function(){return t(20141)}])},66367:function(e,n,t){"use strict";t.d(n,{Z:function(){return m}});var i=t(85893),r=t(57833),a=t(67294),o=t(11163),l=t(34517),s=t(14685),d=t(67102),c=t(73899),u=t(9911);let VolumesTabContent=e=>{let{data:n,cta:t=!0}=e,r=(0,o.useRouter)(),m=(0,a.useCallback)(e=>{r.push("".concat(u.cr.console.storage.volumes.home,"/").concat(e.id))},[r]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g,{children:(0,i.jsx)(d.Z,{borderType:"none",rowNoise:!0,rowKey:e=>e.id,data:n,rowProps:e=>({onClick:()=>m(e),css:e.confirmed?"":{opacity:"0.6"}}),clickableRows:!0,columns:[{label:"Name",width:"100%",sortable:!0,render:e=>(0,s.zN)(e.id||"")},{label:"Size",align:"right",sortable:!0,render:e=>(0,s.eB)(e.size||0,"MiB")},{label:"Date",align:"right",sortable:!0,render:e=>e.date},{label:"",align:"right",render:e=>(0,i.jsx)(c.zx,{kind:"functional",variant:"secondary",onClick:()=>m(e),children:(0,i.jsx)(c.JO,{name:"angle-right",size:"lg"})}),cellProps:()=>({css:{paddingLeft:"0.75rem !important"}})}]})}),t&&(0,i.jsx)(f,{children:(0,i.jsxs)(l.Z,{variant:"primary",href:u.cr.console.storage.volumes.new,children:[(0,i.jsx)(h,{name:"plus-circle",size:"lg"})," Create new volume"]})})]})};VolumesTabContent.displayName="VolumesTabContent";var m=(0,a.memo)(VolumesTabContent),g=(0,r.ZP)("div")({maxWidth:"100%",overflow:"auto"}),f=(0,r.ZP)("div")({marginTop:"2.5rem",textAlign:"center"}),h=(0,r.ZP)(c.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-11adbwz-0"})({marginRight:"0.25rem"})},8252:function(e,n,t){"use strict";t.d(n,{o:function(){return useAuthorization}});var i=t(9754),r=t(67294),a=t(54976);function useAuthorization(){let[{authorization:e},n]=(0,i.mr)();return(0,r.useMemo)(()=>{n(new a._j({features:["confidentials"]}))},[n,!0]),e}},51037:function(e,n,t){"use strict";t.d(n,{Z:function(){return useConfidentialsVolumesIds}});var i=t(67294),r=t(9754);function useConfidentialsVolumesIds(){let[e,n]=(0,i.useState)([]),[t]=(0,r.mr)(),a=t.confidential.entities;return(0,i.useMemo)(()=>{if(!a)return n([]);n(a.flatMap(e=>e.volumes.filter(e=>"ref"in e).map(e=>e.ref)))},[a]),e}},90805:function(e,n,t){"use strict";t.d(n,{B:function(){return useVolumeManager}});var i=t(9754);function useVolumeManager(){let[e]=(0,i.mr)(),{volumeManager:n}=e.manager;return n}},20141:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ConfidentialDashboardPage}});var i=t(85893),r=t(57833),a=t(73899),o=t(99983),l=t(18585),s=t(66367),d=t(35489),c=t(78823),u=t(67294),m=t(75899),g=t(90805),f=t(77205),h=t(51037),p=t(36924),v=t(9754),b=t(8252),x=t(11163),C=t(9911);function getLabel(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e.length>0?"(".concat(e.length,")"):"";return"".concat(n?"BETA ":"").concat(t)}var j=t(60566),w=t(34517),T=t(14685),y=t(67102),_=t(93161);let CreateConfidentialButton=e=>{let{children:n}=e;return(0,i.jsx)(w.Z,{variant:"primary",href:"https://docs.aleph.im/computing/confidential/",target:"_blank",children:n})};CreateConfidentialButton.displayName="CreateConfidentialButton";let Z=(0,u.memo)(e=>{let{data:n}=e,t=(0,x.useRouter)(),r=(0,u.useCallback)(e=>{var n;return(null===(n=e.payment)||void 0===n?void 0:n.type)!==j.uG.credit},[]),o=(0,u.useCallback)(e=>{r(e)&&t.push("/console/computing/confidential/".concat(e.id))},[r,t]);return(0,i.jsx)(i.Fragment,{children:n.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(E,{children:(0,i.jsx)(y.Z,{borderType:"none",rowNoise:!0,rowKey:e=>e.id,rowProps:e=>({css:r(e)?"":{cursor:"not-allowed !important",opacity:"0.4"},onClick:()=>o(e)}),rowTooltip:e=>r(e)?null:(0,i.jsxs)("p",{children:["To manage this TEE instance, go to the"," ",(0,i.jsx)(_.Z,{text:"Credits console App.",color:"main0",href:C.cr.creditConsole.computing.confidentials.home})]}),clickableRows:!0,data:n,columns:[{label:"Name",width:"100%",sortable:!0,render:e=>{var n;return(null==e?void 0:null===(n=e.metadata)||void 0===n?void 0:n.name)||(0,T.zN)(e.id)}},{label:"Cores",align:"right",sortable:!0,render:e=>{var n;return(null==e?void 0:null===(n=e.resources)||void 0===n?void 0:n.vcpus)||0}},{label:"RAM",align:"right",sortable:!0,render:e=>{var n;return(0,T.Fx)((null==e?void 0:null===(n=e.resources)||void 0===n?void 0:n.memory)||0,{from:"MiB",to:"GiB",displayUnit:!0})}},{label:"HDD",align:"right",sortable:!0,render:e=>(0,T.eB)(e.size,"MiB")},{label:"Date",align:"right",sortable:!0,render:e=>e.date},{label:"",align:"right",render:e=>{let n=!r(e);return(0,i.jsx)(a.zx,{kind:"functional",variant:"secondary",onClick:()=>o(e),disabled:n,children:(0,i.jsx)(a.JO,{name:"angle-right",size:"lg"})})},cellProps:()=>({css:{paddingLeft:"0.75rem !important"}})}]})}),(0,i.jsx)(P,{children:(0,i.jsx)(k,{children:"Create TEE instance"})})]}):(0,i.jsx)(B,{children:(0,i.jsx)(k,{children:"Create your first TEE instance"})})})});Z.displayName="ConfidentialsTabContent";let k=(0,u.memo)(CreateConfidentialButton);var E=(0,r.ZP)("div")({maxWidth:"100%",overflow:"auto"}),P=(0,r.ZP)("div")({marginTop:"5rem",textAlign:"center"}),B=(0,r.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-1b7elwj-0"})({marginTop:"2.5rem",textAlign:"center"});function ConfidentialDashboardPage(){let{authorized:e,tabs:n,tabId:t,setTabId:r,confidentials:j,volumes:w,domains:T}=function(){let{push:e}=(0,x.useRouter)(),{confidentials:n}=(0,b.o)(),{entities:t=[]}=(0,m.x)(),{entities:i=[]}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,h.Z)(),t=(0,g.B)();return(0,f.F)({...e,manager:t,name:"confidentialVolume",ids:n})}(),{entities:r=[]}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[n]=(0,v.mr)(),t=n.confidential.entities,{entities:i,loading:r}=(0,p.d)(e),a=(0,u.useMemo)(()=>{if(!t||!i)return[];let e=t.reduce((e,n)=>(e[n.id]=!0,e),{});return i.filter(n=>!!e[n.ref])},[i,t]);return{entities:a,loading:r}}(),[a,o]=(0,u.useState)("confidential"),l=(0,u.useMemo)(()=>[{id:"confidential",name:"TEE Instances",label:{label:getLabel(t),position:"bottom"}},{id:"volume",name:"Attached Volumes",label:{label:getLabel(i),position:"bottom"},disabled:!i.length},{id:"domain",name:"Linked Domains",label:{label:getLabel(r),position:"bottom"},disabled:!r.length}],[r,t,i]);return(0,u.useEffect)(()=>{n||e(C.cr.console.home)},[n,e]),{authorized:n,confidentials:t,volumes:i,domains:r,tabs:l,tabId:a,setTabId:o}}();if(e)return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(N,{$variant:"xl",children:(0,i.jsx)(a.mQ,{selected:t,tabs:n,onTabChange:r})}),(0,i.jsx)("div",{role:"tabpanel",children:"confidential"===t?(0,i.jsxs)(i.Fragment,{children:[!!(null==j?void 0:j.length)&&(0,i.jsx)(F,{$variant:"xl",children:(0,i.jsx)(Z,{data:j})}),(0,i.jsx)(c.Z,{imageSrc:"/img/dashboard/instance.svg",imageAlt:"Confidential illustration",info:"WHAT IS A...",title:"TEE Instance",description:"Protect your sensitive workloads with our TEE VMs. Designed for maximum privacy and security, ensuring your execution and data stays safe.",buttonUrl:"/console/computing/confidential/new",buttonText:"Create a TEE Instance",externalLinkText:"Developer docs",externalLinkUrl:C.cr.docs.confidentials})]}):"volume"===t?(0,i.jsx)(i.Fragment,{children:!!(null==w?void 0:w.length)&&(0,i.jsx)(z,{$variant:"xl",children:(0,i.jsx)(s.Z,{data:w,cta:!1})})}):"domain"===t?(0,i.jsx)(i.Fragment,{children:!!(null==T?void 0:T.length)&&(0,i.jsx)(A,{$variant:"xl",children:(0,i.jsx)(d.Z,{data:T,cta:!1})})}):(0,i.jsx)(i.Fragment,{})}),(0,i.jsx)(o.F,{$variant:"xl",children:(0,i.jsx)(l.Z,{})})]})}var N=(0,r.ZP)(o.F)({marginTop:"2.5rem",marginBottom:"2.5rem"}),F=(0,r.ZP)(o.F)({marginTop:"2.5rem",marginBottom:"2.5rem"}),z=(0,r.ZP)(o.F)({marginTop:"2.5rem",marginBottom:"2.5rem"}),A=(0,r.ZP)(o.F).withConfig({displayName:"cmp___StyledCenteredContainer4",componentId:"sc-16gvkrf-0"})({marginTop:"2.5rem",marginBottom:"2.5rem"})}},function(e){e.O(0,[5201,9774,2888,179],function(){return e(e.s=52020)}),_N_E=e.O()}]);