(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7712],{26584:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/console/computing/instance/[hash]",function(){return t(67602)}])},96370:function(e,n,t){"use strict";t.d(n,{u:function(){return useRequestInstances}});var s=t(99978),o=t(77205);function useRequestInstances(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,s.U)();return(0,o.F)({...e,manager:n,name:"instance"})}},67602:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ManageInstance}});var s=t(85893),o=t(9008),i=t.n(o),a=t(11163),l=t(67294),u=t(99978),d=t(96370),c=t(98897),r=t(27744),m=t(71251),h=t(62394),p=t(32424),y=t(27917),g=t(91986),x=t(84427),j=t(85786),w=t(36943),C=t(73635),D=t(45806),S=t(21204),b=t(1131),f=t(9911),v=t(30425),Z=t(25491),_=t(24541),I=t(14215),k=t(88246),L=t(61424);function ManageInstance(){var e,n;let{instance:t,instanceManager:o,name:E,status:K,calculatedStatus:M,isAllocated:R,nodeDetails:V,immutableVolumes:H,persistentVolumes:P,mappedKeys:N,customDomains:A,isLoadingCustomDomains:O,handleCustomDomainClick:q,handleAddDomain:F,paymentData:T,logs:U,handleDownloadLogs:X,isDownloadingLogs:B,stopDisabled:W,stopLoading:Y,handleStop:z,startDisabled:G,startLoading:J,handleStart:Q,rebootDisabled:$,rebootLoading:ee,handleReboot:en,deleteDisabled:et,deleteLoading:es,handleDelete:eo,sidePanel:ei,handleImmutableVolumeClick:ea,handleSSHKeyClick:el,handleViewLogs:eu,closeSidePanel:ed,handleBack:ec,ports:er,sshForwardedPort:em,handlePortsChange:eh}=function(){let e=(0,a.useRouter)(),{hash:n}=e.query,{entities:t}=(0,d.u)({ids:n}),[s]=t||[],o=(0,u.U)(),i=(0,c.a)({entity:s,entityManager:o}),{status:h}=i,{ports:p}=(0,r.P)({entityHash:null==s?void 0:s.id,executableStatus:h}),[y,g]=(0,l.useState)(p);(0,l.useMemo)(()=>{g(p)},[p]);let x=(0,l.useMemo)(()=>(0,m.o9)(y),[y]);return{instance:s,instanceManager:o,ports:y,sshForwardedPort:x,handlePortsChange:e=>{g(e)},...i}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i(),{children:[(0,s.jsx)("title",{children:"Console | Manage Instance | Aleph Cloud"}),(0,s.jsx)("meta",{name:"description",content:"Manage your compute instance on Aleph Cloud"})]}),(0,s.jsx)(v.Z,{entity:t,name:E,type:f.py.Instance,isAllocated:R,calculatedStatus:M,showStart:!0,startDisabled:G,startLoading:J,onStart:Q,showDelete:!0,deleteDisabled:et,deleteLoading:es,onDelete:eo,showStop:!0,stopDisabled:W,stopLoading:Y,onStop:z,showReboot:!0,rebootDisabled:$,rebootLoading:ee,onReboot:en,onBack:ec}),(0,s.jsx)(Z.Z,{leftColumnElements:[(0,s.jsx)(x.Z,{entity:t},"instance-details"),(0,s.jsx)(j.V,{onViewLogs:eu,onDownloadLogs:X,downloadingLogs:B,disabled:!t||!R},"instance-logs-control"),(0,s.jsx)(b.Z,{sshKeys:N,onSSHKeyClick:el},"instance-ssh-keys"),(0,s.jsx)(g.Z,{payments:T},"instance-payment")],rightColumnElements:[(0,s.jsx)(S.Z,{nodeDetails:V,termsAndConditionsHash:null==t?void 0:null===(n=t.requirements)||void 0===n?void 0:null===(e=n.node)||void 0===e?void 0:e.terms_and_conditions},"instance-hosting-crn"),(0,s.jsx)(D.Z,{executableStatus:K,sshForwardedPort:em},"instance-connection-methods"),H.length&&(0,s.jsx)(C.Z,{linkedVolumes:H,onImmutableVolumeClick:ea},"instance-linked-volumes"),P.length&&(0,s.jsx)(w.Z,{persistentVolumes:P},"instance-persistent-storage"),(0,s.jsx)(_.Z,{isLoadingCustomDomains:O,customDomains:A,onCustomDomainClick:q,onAddDomain:F},"instance-custom-domains"),(0,s.jsx)(k.Z,{entityHash:null==t?void 0:t.id,executableStatus:K,executableManager:o,ports:er,onPortsChange:eh},"port-forwarding")]}),(0,s.jsx)(h.h,{title:"volume"===ei.type?"Volume":"sshKey"===ei.type?"SSH Key":"logs"===ei.type?"Logs":"newDomain"===ei.type?"New Custom Domain":"Custom Domain",isOpen:ei.isOpen,onClose:ed,children:"volume"===ei.type?ei.selectedVolume&&(0,s.jsx)(y.Z,{volumeId:ei.selectedVolume.id}):"sshKey"===ei.type?ei.selectedSSHKey&&(0,s.jsx)(p.Z,{sshKeyId:ei.selectedSSHKey.id}):"domain"===ei.type?ei.selectedDomain&&(0,s.jsx)(I.Z,{domainId:ei.selectedDomain.id}):"logs"===ei.type?(0,s.jsx)(j.W,{logs:U}):"newDomain"===ei.type?(0,s.jsx)(L.ZP,{entityId:null==t?void 0:t.id,entityType:f.sY.Instance,onSuccess:ed}):(0,s.jsx)(s.Fragment,{children:"ERROR"})})]})}}},function(e){e.O(0,[7536,1093,4757,4694,1424,1270,1514,9774,2888,179],function(){return e(e.s=26584)}),_N_E=e.O()}]);