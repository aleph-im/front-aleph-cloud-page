(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4143],{6815:function(e,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/console/computing/confidential/[hash]",function(){return n(45963)}])},93788:function(e,i,n){"use strict";n.d(i,{Z:function(){return BackButtonSection_cmp}});var t=n(85893),s=n(19521),r=n(19584),a=n(99983),BackButtonSection_cmp=e=>{let{handleBack:i}=e;return(0,t.jsx)(d,{children:(0,t.jsx)(a.F,{children:(0,t.jsx)(r.Z,{handleBack:i})})})},d=(0,s.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-o42jnx-0"})({paddingTop:"0px !important",paddingBottom:"0px !important",paddingLeft:"0px",paddingRight:"0px","@media (min-width: 48rem)":{paddingTop:"2.5rem !important"}})},34517:function(e,i,n){"use strict";n.d(i,{Z:function(){return o}});var t=n(85893),s=n(67294),r=n(41664),a=n.n(r),d=n(79632);let ButtonLink=e=>{let{href:i,variant:n="secondary",color:s="main0",kind:r="default",size:o="md",disabled:m,children:c,...l}=e,p=(0,t.jsx)(d.zx,{as:m?void 0:"a",variant:n,color:s,kind:r,size:o,disabled:m,...l,children:c});return m?p:(0,t.jsx)(a(),{href:i,passHref:!0,legacyBehavior:!0,children:p})};ButtonLink.displayName="ButtonLink";var o=(0,s.memo)(ButtonLink)},99983:function(e,i,n){"use strict";n.d(i,{F:function(){return a}});var t=n(19521);let s={xl:90,lg:60.0625,md:44.6875},r=t.ZP.div.withConfig({displayName:"styles__StyledContainer",componentId:"sc-1bpjbi2-0"})(["",""],e=>{let{$variant:i="lg"}=e;return(0,t.iv)([""," max-width:","rem;"],{marginLeft:"auto",marginRight:"auto",width:"100%",paddingLeft:"1.5rem",paddingRight:"1.5rem","@media (min-width: 62rem)":{paddingLeft:"4rem",paddingRight:"4rem"}},s[i])});var a=r},10873:function(e,i,n){"use strict";n.d(i,{Z:function(){return h}});var t=n(85893),s=n(19521),r=n(41664),a=n.n(r),d=n(49107),o=n(67294),m=n(77541),c=n(76696),l=n(79632);let VolumeItem=e=>{let{volume:i}=e,n=(0,l.vx)((null==i?void 0:i.ref)||"");return(0,t.jsx)(x,{children:(0,d.w2)(i)?(0,t.jsxs)(v,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"PERSISTENT VOLUME"}),(0,t.jsx)(m.x,{className:"fs-10 tp-body1",children:(0,d.eB)(i.size_mib,"MiB")})]}):(0,d.Py)(i)?(0,t.jsxs)(g,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"EPHEMERAL VOLUME"}),(0,t.jsx)(m.x,{className:"fs-10 tp-body1",children:(0,d.eB)(i.size_mib,"MiB")})]}):(0,t.jsxs)(f,{children:[(0,t.jsxs)(u,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"IMMUTABLE VOLUME"}),(0,t.jsx)(a(),{className:"tp-body1 fs-16",href:"/storage/volume/".concat(i.ref),children:(0,t.jsx)(c.Z,{iconName:"square-up-right",children:"Volume details"})})]}),(0,t.jsx)("div",{className:"tp-info text-main0",children:"ITEM HASH"}),(0,t.jsx)(c.Z,{iconName:"copy",onClick:n,children:i.ref}),i.mount&&(0,t.jsxs)(_,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"MOUNT"}),(0,t.jsx)(m.x,{children:i.mount})]})]})})};VolumeItem.displayName="VolumeItem";let VolumeList=e=>{let{volumes:i}=e;return(0,t.jsx)(t.Fragment,{children:i.map((e,i)=>(0,t.jsx)(p,{volume:e},i))})};VolumeList.displayName="VolumeList";let p=(0,o.memo)(VolumeItem);var h=(0,o.memo)(VolumeList),x=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1h71a9x-0"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),v=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-1h71a9x-1"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),g=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-1h71a9x-2"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),f=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-1h71a9x-3"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),u=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-1h71a9x-4"})({marginBottom:"1.25rem"}),_=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-1h71a9x-5"})({marginTop:"1.25rem"})},8252:function(e,i,n){"use strict";n.d(i,{o:function(){return useAuthorization}});var t=n(28417),s=n(67294),r=n(54976);function useAuthorization(){let[{authorization:e},i]=(0,t.mr)();return(0,s.useMemo)(()=>{i(new r._j({features:["confidentials"]}))},[i,!0]),e}},57261:function(e,i,n){"use strict";n.d(i,{G:function(){return useConfidentialManager}});var t=n(28417);function useConfidentialManager(){let[e]=(0,t.mr)(),{confidentialManager:i}=e.manager;return i}},18395:function(e,i,n){"use strict";n.d(i,{p:function(){return useSSHKeyManager}});var t=n(28417);function useSSHKeyManager(){let[e]=(0,t.mr)(),{sshKeyManager:i}=e.manager;return i}},75899:function(e,i,n){"use strict";n.d(i,{x:function(){return useRequestConfidentials}});var t=n(77205),s=n(57261);function useRequestConfidentials(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,s.G)();return(0,t.F)({...e,manager:i,name:"confidential"})}},45963:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return ManageConfidential}});var t=n(85893),s=n(19521),r=n(34517),a=n(76696),d=n(79632),o=n(9911),m=n(49107),c=n(11505),l=n(41664),p=n.n(l),h=n(93788),x=n(11163),v=n(67294),g=n(18395),f=n(75899),u=n(8252),_=n(57125),y=n(57261),j=n(77541),N=n(99983),w=n(10873);function ManageConfidential(){var e;let{authorized:i,theme:n,confidential:l,status:W,mappedKeys:Q,nodeDetails:$,handleCopyHash:ee,handleCopyConnect:ei,handleCopyIpv6:en,handleBack:et}=function(){let e=(0,s.Fg)(),i=(0,x.useRouter)(),{push:n,query:{hash:t}}=i,{confidentials:r}=(0,u.o)();(0,v.useEffect)(()=>{r||n("/")},[r,n]);let{entities:a}=(0,f.x)({ids:t}),[o]=a||[],m=(0,y.G)(),c=(0,_.y)({executable:o,manager:m,subscribeLogs:!1}),{status:l}=c,[p,h]=(0,v.useState)([]),j=(0,g.p)();(0,v.useEffect)(()=>{if(!o||!j)return;let getMapped=async()=>{let e=await (null==j?void 0:j.getByValues(o.authorized_keys||[]));h(e)};getMapped()},[j,o]);let N=(0,d.vx)((null==o?void 0:o.id)||""),w=(0,d.vx)((null==l?void 0:l.ipv6Parsed)||""),C=(0,d.vx)("ssh root@".concat(null==l?void 0:l.ipv6Parsed));return{...c,authorized:r,theme:e,confidential:o,status:l,mappedKeys:p,handleCopyHash:N,handleCopyConnect:C,handleCopyIpv6:w,handleBack:()=>{n(".")}}}();if(!i)return;if(!l)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Z,{handleBack:et}),(0,t.jsx)(N.F,{children:(0,t.jsx)(C,{children:"Loading..."})})]});let es=(null==l?void 0:null===(e=l.metadata)||void 0===e?void 0:e.name)||(0,m.zN)(l.id),er=o.K_[l.type],ea=l.volumes;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Z,{handleBack:et}),(0,t.jsx)(S,{children:(0,t.jsxs)(N.F,{children:[(0,t.jsx)(Z,{children:(0,t.jsxs)(I,{children:[(0,t.jsx)(P,{name:"alien-8bit",className:"text-main0"}),(0,t.jsx)("div",{className:"tp-body2",children:es}),(0,t.jsx)(B,{kind:"secondary",variant:l.time<Date.now()-45e3&&(null==W?void 0:W.ipv6Parsed)?"success":"warning",children:(null==W?void 0:W.ipv6Parsed)?"READY":(0,t.jsxs)(D,{children:[(0,t.jsx)(z,{children:"CONFIRMING"}),(0,t.jsx)(c.s5,{strokeColor:n.color.base2,width:".8rem"})]})})]})}),(0,t.jsxs)(d.Jy,{children:[(0,t.jsxs)(b,{children:[(0,t.jsx)(T,{variant:"accent",children:er}),(0,t.jsxs)(M,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"ITEM HASH"}),(0,t.jsx)(a.Z,{iconName:"copy",onClick:ee,children:l.id})]})]}),(0,t.jsx)(j.Z,{}),(0,t.jsxs)(R,{children:[(0,t.jsxs)(k,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"CORES"}),(0,t.jsx)("div",{children:(0,t.jsxs)(j.x,{children:[l.resources.vcpus," x86 64bit"]})})]}),(0,t.jsxs)(L,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"RAM"}),(0,t.jsx)("div",{children:(0,t.jsx)(j.x,{children:(0,m.Fx)(l.resources.memory,{from:"MiB",to:"GiB",displayUnit:!0})})})]}),(0,t.jsxs)(E,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"HDD"}),(0,t.jsx)("div",{children:(0,t.jsx)(j.x,{children:(0,m.Fx)(l.size,{from:"MiB",to:"GiB",displayUnit:!0})})})]})]}),(0,t.jsxs)(F,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"EXPLORER"}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"tp-body1 fs-16",href:l.url,target:"_blank",referrerPolicy:"no-referrer",children:(0,t.jsx)(a.Z,{iconName:"square-up-right",children:(0,t.jsx)(j.x,{children:(0,m.bs)(l.url,80)})})})})]}),(0,t.jsx)(j.Z,{}),(0,t.jsxs)(V,{children:[(0,t.jsx)(d.DU,{type:"h7",as:"h2",color:"main0",children:"Connection methods"}),(0,t.jsxs)(A,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"SSH COMMAND"}),(0,t.jsx)("div",{children:W?(0,t.jsx)(a.Z,{iconName:"copy",onClick:ei,children:(0,t.jsxs)(j.x,{children:[">_ ssh root@",W.ipv6Parsed]})}):(0,t.jsxs)(U,{children:[(0,t.jsx)(H,{className:"tp-body1 fs-16 text-main2",children:"Allocating"}),(0,t.jsx)(c.g4,{width:".8rem",height:"1rem",color:n.color.main2})]})})]}),(0,t.jsxs)(O,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"IPv6"}),(0,t.jsx)("div",{children:W&&(0,t.jsx)(a.Z,{iconName:"copy",onClick:en,children:(0,t.jsx)(j.x,{children:W.ipv6Parsed})})})]})]}),(0,t.jsxs)(q,{children:[(0,t.jsx)(d.DU,{type:"h7",as:"h2",color:"main0",children:"Accessible for"}),(0,t.jsx)(G,{children:Q.map((e,i)=>e&&(0,t.jsxs)(K,{children:[(0,t.jsxs)("div",{className:"tp-info text-main0",children:["SSH KEY #",i+1]}),(0,t.jsx)(p(),{className:"tp-body1 fs-16",href:"?hash="+e.id,referrerPolicy:"no-referrer",children:(0,t.jsx)(a.Z,{iconName:"square-up-right",children:(0,t.jsx)(j.x,{children:e.label})})})]},null==e?void 0:e.id))})]}),$&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Z,{}),(0,t.jsx)(d.DU,{type:"h7",as:"h2",color:"main0",children:"Current CRN"}),(0,t.jsxs)(J,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"NAME"}),(0,t.jsx)("div",{children:(0,t.jsx)(j.x,{children:$.name})})]}),(0,t.jsxs)(X,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"URL"}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"tp-body1 fs-16",href:$.url,target:"_blank",referrerPolicy:"no-referrer",children:(0,t.jsx)(a.Z,{iconName:"square-up-right",children:(0,t.jsx)(j.x,{children:(0,m.bs)($.url,80)})})})})]})]}),ea.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Z,{}),(0,t.jsx)(d.DU,{type:"h7",as:"h2",color:"main0",children:"Linked Storage(s)"}),(0,t.jsx)(w.Z,{volumes:ea})]})]}),(0,t.jsx)(Y,{children:(0,t.jsx)(r.Z,{variant:"primary",href:"https://docs.aleph.im/computing/confidential/",target:"_blank",children:"Create new confidential instance"})})]})})]})}var C=(0,s.ZP)(d.Jy).withConfig({displayName:"cmp___StyledNoisyContainer",componentId:"sc-nxv6z8-0"})({marginTop:"1rem",marginBottom:"1rem"}),S=(0,s.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-nxv6z8-1"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),Z=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-nxv6z8-2"})({display:"flex",flexDirection:"column",flexWrap:"wrap",justifyContent:"space-between",gap:"1rem",paddingBottom:"1.25rem","@media (min-width: 48rem)":{flexDirection:"row"}}),I=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-nxv6z8-3"})({display:"flex",alignItems:"center"}),P=(0,s.ZP)(d.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-nxv6z8-4"})({marginRight:"1rem"}),B=(0,s.ZP)(d.__).withConfig({displayName:"cmp___StyledLabel",componentId:"sc-nxv6z8-5"})({marginLeft:"1rem"}),D=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-nxv6z8-6"})({display:"flex",alignItems:"center"}),z=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-nxv6z8-7"})({marginRight:"0.5rem"}),b=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-nxv6z8-8"})({display:"flex",alignItems:"center",justifyContent:"flex-start",overflow:"hidden"}),T=(0,s.ZP)(d.Vp).withConfig({displayName:"cmp___StyledTag",componentId:"sc-nxv6z8-9"})({marginRight:"1rem",whiteSpace:"nowrap"}),M=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-nxv6z8-10"})({flex:"1 1 auto"}),R=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv7",componentId:"sc-nxv6z8-11"})({marginTop:"1.25rem",marginBottom:"1.25rem",display:"flex"}),k=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv8",componentId:"sc-nxv6z8-12"})({marginRight:"1.25rem"}),L=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv9",componentId:"sc-nxv6z8-13"})({marginRight:"1.25rem"}),E=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv10",componentId:"sc-nxv6z8-14"})({marginRight:"1.25rem"}),F=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv11",componentId:"sc-nxv6z8-15"})({marginRight:"1.25rem"}),V=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv12",componentId:"sc-nxv6z8-16"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),A=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv13",componentId:"sc-nxv6z8-17"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),U=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv14",componentId:"sc-nxv6z8-18"})({display:"flex",alignItems:"flex-end"}),H=(0,s.ZP)("span").withConfig({displayName:"cmp___StyledSpan",componentId:"sc-nxv6z8-19"})({marginRight:"0.25rem"}),O=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv15",componentId:"sc-nxv6z8-20"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),q=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv16",componentId:"sc-nxv6z8-21"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),G=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv17",componentId:"sc-nxv6z8-22"})({marginTop:"1.25rem",marginBottom:"1.25rem",display:"flex"}),K=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv18",componentId:"sc-nxv6z8-23"})({marginRight:"1.25rem"}),J=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv19",componentId:"sc-nxv6z8-24"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),X=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv20",componentId:"sc-nxv6z8-25"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),Y=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv21",componentId:"sc-nxv6z8-26"})({marginTop:"5rem",textAlign:"center"})}},function(e){e.O(0,[1505,1200,9774,2888,179],function(){return e(e.s=6815)}),_N_E=e.O()}]);