(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[706],{74044:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/console/computing/confidential/new",function(){return t(48492)}])},19584:function(e,n,t){"use strict";var i=t(85893),r=t(57833),o=t(31515);n.Z=e=>{let{handleBack:n}=e;return(0,i.jsx)(o.zx,{kind:"functional",variant:"textOnly",onClick:n,children:(0,i.jsxs)(a,{className:"tp-info text-base2",children:[(0,i.jsx)(o.JO,{name:"arrow-left"})," Back"]})})};var a=(0,r.ZP)("p").withConfig({displayName:"cmp___StyledP",componentId:"sc-1jijf1x-0"})({display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem",textAlign:"center"})},93788:function(e,n,t){"use strict";t.d(n,{Z:function(){return BackButtonSection_cmp}});var i=t(85893),r=t(57833),o=t(19584),a=t(99983),BackButtonSection_cmp=e=>{let{handleBack:n}=e;return(0,i.jsx)(s,{children:(0,i.jsx)(a.F,{children:(0,i.jsx)(o.Z,{handleBack:n})})})},s=(0,r.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-o42jnx-0"})({paddingTop:"0px !important",paddingBottom:"0px !important",paddingLeft:"0px",paddingRight:"0px","@media (min-width: 48rem)":{paddingTop:"2.5rem !important"}})},99983:function(e,n,t){"use strict";t.d(n,{F:function(){return a}});var i=t(57833);let r={xl:90,lg:60.0625,md:44.6875},o=i.ZP.div.withConfig({displayName:"styles__StyledContainer",componentId:"sc-1bpjbi2-0"})(["",""],e=>{let{$variant:n="lg"}=e;return(0,i.iv)([""," max-width:","rem;"],{marginLeft:"auto",marginRight:"auto",width:"100%",paddingLeft:"1.5rem",paddingRight:"1.5rem","@media (min-width: 62rem)":{paddingLeft:"4rem",paddingRight:"4rem"}},r[n])});var a=o},49531:function(e,n,t){"use strict";t.d(n,{N:function(){return a}});var i=t(85893),r=t(67294),o=t(31515);let SectionTitle=e=>{let{forwardedAs:n,...t}=e;return(0,i.jsx)(o.NP,{as:"h2",color:"main0",numberColor:"main0",...t})};SectionTitle.displayName="SectionTitle";var a=(0,r.memo)(SectionTitle)},93161:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var i=t(85893),r=t(57833),o=t(67294),a=t(31515);let s=r.ZP.a.withConfig({displayName:"styles__StyledExternalLink",componentId:"sc-1kmpaq1-0"})(["",""],e=>{let{theme:n,$color:t="white",$typo:i,$underline:o=!1}=e;return(0,r.iv)(["color:",";text-decoration:",";",""],n.color[t],o?"underline":"none",i?(0,a.pX)(i):"")}),ExternalLink=e=>{let{text:n,href:t,color:r,typo:o,underline:a,...l}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s,{href:t,target:"_blank",$color:r,$typo:o,$underline:a,...l,children:[n||t,(0,i.jsx)(d,{name:"square-up-right"})]})})};ExternalLink.displayName="ExternalLink";var l=(0,o.memo)(ExternalLink),d=(0,r.ZP)(a.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-mxjtpv-0"})({marginLeft:"0.625rem"})},76696:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var i=t(85893),r=t(57833),o=t(67294),a=t(77541),s=t(31515);let l=r.ZP.div.withConfig({displayName:"styles__StyledContainer",componentId:"sc-hdgoyh-0"})(["",""],e=>{let{theme:n}=e;return(0,r.iv)([""," ","{color:",";}&:hover ","{color:",";}"],{display:"flex",cursor:"pointer",alignItems:"center"},d,n.color.purple4,d,n.color.main0)}),d=(0,r.ZP)(s.JO).withConfig({displayName:"styles__StyledIcon",componentId:"sc-hdgoyh-1"})(["",""],e=>{let{theme:n}=e;return(0,r.iv)([""," transition-property:color;transition-duration:","ms;transition-timing-function:",";"],{marginLeft:"0.5rem",cursor:"pointer"},n.transition.duration.fast,n.transition.timing)}),IconText=e=>{let{children:n,onClick:t,iconName:r}=e;return(0,i.jsxs)(l,{onClick:t,children:[(0,i.jsx)(m,{children:n}),(0,i.jsx)(p,{name:r,className:"text-purple4"})]})};IconText.displayName="IconText";var c=(0,o.memo)(IconText),m=(0,r.ZP)(a.xv)({wordBreak:"break-all"}),p=(0,r.ZP)(d).withConfig({displayName:"cmp___StyledStyledIcon",componentId:"sc-3gm8x3-0"})({marginLeft:"0.5rem",cursor:"pointer"})},21574:function(e,n,t){"use strict";t.d(n,{Z:function(){return NewEntityTab}});var i=t(85893),r=t(57833),o=t(31515),a=t(11163),s=t.n(a),l=t(67294),d=t(9911);let c={instance:d.cr.console.computing.instances.new,function:d.cr.console.computing.functions.new,"gpu-instance":d.cr.console.computing.gpus.new,confidential:d.cr.console.computing.confidentials.new};function NewEntityTab(e){let{selected:n,handleChange:t}=function(e){let n=(0,l.useCallback)(e=>{let n=c[e];n&&s().push(n)},[]);return{...e,handleChange:n}}(e);return(0,i.jsx)(m,{selected:n,onTabChange:t,tabs:[{id:"function",name:"Function"},{id:"instance",name:"Instance"},{id:"gpu-instance",name:"GPU Instance",label:{label:"BETA",position:"top"}},{id:"confidential",name:"TEE Instance",label:{label:"BETA",position:"top"}}]})}var m=(0,r.ZP)(o.mQ).withConfig({displayName:"cmp___StyledTabs",componentId:"sc-8jx80b-0"})({overflow:"hidden"})},43251:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var i=t(85893),r=t(57833),o=t(67294),a=t(31515);let ResponsiveTooltip=e=>{let{forwardedAs:n,as:t,...r}=e,o=(0,a._K)("md");return(0,i.jsx)(l,{...r,$_css:o?{position:"fixed !important",left:"0px !important",top:"0px !important",zIndex:"20 !important",margin:"1.5rem",height:"calc(100% - 3rem) !important",width:"calc(100% - 3rem) !important",maxWidth:"100% !important",transform:"none !important"}:""})};ResponsiveTooltip.displayName="ResponsiveTooltip";var s=(0,o.memo)(ResponsiveTooltip),l=(0,r.ZP)(a.u).withConfig({displayName:"cmp___StyledTooltip",componentId:"sc-vdmo8c-0"})(["",""],e=>e.$_css)},77541:function(e,n,t){"use strict";t.d(n,{J3:function(){return s},Z0:function(){return o},xv:function(){return a}});var i=t(57833),r=t(31515);let o=i.ZP.hr.withConfig({displayName:"common__Separator",componentId:"sc-4t26wy-0"})([""," border:0;border-top:1px solid ",";opacity:0.3;"],{marginTop:"1.25rem",marginBottom:"1.25rem"},e=>{let{theme:n}=e;return n.color.main0}),a=i.ZP.span.attrs((0,r.PT)("tp-body1 text-text")).withConfig({displayName:"common__Text",componentId:"sc-4t26wy-1"})([""]),s=i.ZP.span.attrs((0,r.PT)("tp-body1 text-disabled")).withConfig({displayName:"common__DisabledText",componentId:"sc-4t26wy-2"})([""])},24959:function(e,n,t){"use strict";t.d(n,{c:function(){return useForm}});var i=t(31515),r=t(67294),o=t(87536),a=t(79711),s=t(50586);function useForm(e){let{onSubmit:n,onSuccess:t,onError:l,readyDeps:d=[],...c}=e,m=(0,o.cI)(c);(0,r.useEffect)(()=>{"object"==typeof c.defaultValues&&m.reset(c.defaultValues)},[...d]);let[p,h]=(0,r.useState)({data:void 0,error:void 0,loading:!1}),[u,{onLoad:g,onSuccess:x,onError:f}]=(0,i.g7)({flushData:!0,state:p,setState:h,onSuccess:t,onError:l}),y=(0,r.useCallback)(async e=>{try{g();let t=await n(e);x(t)}catch(n){let e=n instanceof a.jm?s.Z.ValidationError:(null==n?void 0:n.cause)||n;m.setError("root.serverError",{...e,message:null==e?void 0:e.message}),f(e)}},[m,f,g,n,x]),j=(0,r.useCallback)(async e=>{let n;if(console.log(e),!n){let t=function getFirstError(e){let[n]=Object.entries(e);if(!n)return;let[t,i]=n;if(Array.isArray(i)){let e=i[i.length-1];return getFirstError(e)}return[t,i]}(e);if(t){let[e,i]=t,r="string"==typeof i?i:(null==i?void 0:i.message)?": ".concat(i.message):(null==i?void 0:i.type)?': "'.concat(null==i?void 0:i.type,'" validation not satisfied'):"";n=s.Z.FieldError(e,r)}}n||(n=s.Z.ValidationError),f(n)},[f]),v=(0,r.useMemo)(()=>m.handleSubmit(y,j),[m,y,j]);return{...m,requestState:u,handleSubmit:v}}},48492:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return NewConfidentialPage}});var i=t(85893),r=t(57833),o=t(9008),a=t.n(o),s=t(93788),l=t(99983),d=t(49531),c=t(31515),m=t(93161),p=t(67294);let h=r.ZP.div.attrs(e=>{let{theme:n,$backgroundColor:t,...i}=e;return t?(0,c.PT)(t)(i):"twentysix"===n.name?(0,c.PT)("fx-grain-3")(i):(0,c.PT)("fx-glass-main0")(i)}).withConfig({displayName:"styles__StyledToggleContainer",componentId:"sc-r60x86-0"})(["",""],e=>{let{theme:n,$animation:t=5e4}=e,{borderRadius:i}=n.component.noisyContainer;return(0,r.iv)(["border-radius:","rem;&&::after{","}"],i,t?(0,r.iv)(["animation-duration:","ms;"],t):(0,r.iv)(["animation:none;"]))}),u=r.ZP.div.withConfig({displayName:"styles__StyledToggleBar",componentId:"sc-r60x86-1"})(["",""],{display:"flex",cursor:"pointer",alignItems:"center",justifyContent:"space-between",columnGap:"1.5rem",padding:"1.5rem"}),g=(0,r.ZP)(c.JO).attrs(e=>({...e,name:"angle-down",size:"lg"})).withConfig({displayName:"styles__StyledIcon",componentId:"sc-r60x86-2"})(["",""],e=>{let{theme:n,$isOpen:t}=e;return(0,r.iv)([""," width:1em;background-color:",";color:",";transform:rotate(","deg);transition-property:opacity,visibility,transform;transition-duration:","ms;transition-timing-function:",";"],{cursor:"pointer",padding:"0.25rem"},n.color.text,n.color.base1,t?180:0,n.transition.duration.normal,n.transition.timing)}),ToggleContainer=e=>{let{toggleTitle:n,backgroundColor:t="fx-grain-2",children:r}=e,[o,a]=(0,p.useState)(!1),s=(0,p.useCallback)(()=>a(e=>!e),[a]);return(0,i.jsxs)(h,{$backgroundColor:t,children:[(0,i.jsxs)(u,{onClick:s,children:[n,(0,i.jsx)(g,{$isOpen:o})]}),(0,i.jsx)(c.Gd,{open:o,shouldUnmount:!o,children:(0,i.jsx)(f,{children:r})})]})};ToggleContainer.displayName="ToggleContainer";var x=(0,p.memo)(ToggleContainer),f=(0,r.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-179hw05-0"})({padding:"1.5rem",paddingTop:"2.5rem"});let y=r.ZP.div.withConfig({displayName:"styles__StyledCodeContainer",componentId:"sc-1jahltv-0"})([""," ",""],{position:"relative",height:"fit-content",borderRadius:"0.75rem",paddingTop:"2rem"},e=>{let{theme:n}=e;return(0,r.iv)(["color:",";background:linear-gradient(91.23deg,#ffffff11 11.38%,#ffffff00 96.5%),linear-gradient(84.86deg,#2260ff0c 65.23%,#1859ff00 99.89%),#141327;"],n.color.white)}),j=r.ZP.div.withConfig({displayName:"styles__StyledCopyCodeContainer",componentId:"sc-1jahltv-1"})(["",""],e=>{let{theme:n}=e;return(0,r.iv)([""," color:",";transition-property:opacity;transition-duration:","ms;transition-timing-function:",";&:hover{","}"],{position:"absolute",right:"0px",top:"0px",zIndex:"10",display:"flex",cursor:"pointer",alignItems:"center",gap:"0.5rem",paddingLeft:"0.75rem",paddingRight:"0.75rem",paddingTop:"0.25rem",paddingBottom:"0.25rem",opacity:"0.5"},e=>{let{theme:n}=e;return n.color.purple4},n.transition.duration.fast,n.transition.timing,{opacity:"1"})}),v=r.ZP.div.withConfig({displayName:"styles__StyledFileInputContainer",componentId:"sc-1jahltv-2"})(["",""],e=>{let{isEncryptedDiskImagePresent:n}=e;return n?(0,r.iv)(["",""],{display:"flex",flexDirection:"column",alignItems:"center","> :not([hidden]) ~ :not([hidden])":{"--tw-space-y-reverse":"0",marginTop:"calc(2.5rem * calc(1 - var(--tw-space-y-reverse)))",marginBottom:"calc(2.5rem * var(--tw-space-y-reverse))"}}):(0,r.iv)(["",""],{})});var w=t(76696),C=t(9754),_=t(24959),b=t(60566),k=t(11163),I=t(87536),T=t(9911),Z=t(43251),P=t(21574);function ExternalBulletItemLink(e){let{href:n,title:t}=e;return(0,i.jsxs)(S,{href:n,target:"_blank",children:[(0,i.jsx)(c.vo,{kind:"info",title:t}),(0,i.jsx)(B,{name:"square-up-right"})]})}function CodeBlock(e){let{code:n,language:t}=e,r=(0,c.vx)(n);return(0,i.jsx)(N,{children:(0,i.jsxs)(y,{children:[(0,i.jsxs)(j,{onClick:r,children:[t,(0,i.jsx)(c.JO,{name:"copy",className:"text-purple4"})]}),(0,i.jsx)(E,{children:n})]})})}function NewConfidentialPage(){let{commands:e,encryptedDiskImageFormValues:n,encryptedDiskImageCtrl:t,encryptedDiskImageItemHash:r,disabledUploadEncryptedDiskImage:o,isUploadingFile:h,uploadedFileMessage:u,uploadEncryptedDiskImageButtonRef:g,uploadEncryptedDiskImageButtonToolip:f,handleUploadEncryptedDiskImage:y,handleCopyEncryptedDiskImageHash:j,handleBack:S}=function(){let[e]=(0,C.mr)(),n=(0,k.useRouter)(),t=(0,c.lm)(),{connection:{account:i}}=e,r=function(){let[e]=(0,C.mr)(),{fileManager:n}=e.manager;return n}(),[o,a]=(0,p.useState)(!1),[s,l]=(0,p.useState)(),[d,m]=(0,p.useState)(),h=(0,p.useMemo)(()=>!i||!!o,[i,o]),u=(0,p.useMemo)(()=>null==d?void 0:d.item_hash,[d]),g=(0,p.useRef)(null),x=(0,p.useMemo)(()=>{if(h&&!i)return"Connect your wallet"},[h,i]),f=(0,p.useCallback)(async e=>{if(!r)return;i||alert("Connect your wallet");let{encryptedDiskImage:n}=e;if(n)try{a(!0);let e=await r.uploadFile(n,b.qG.ipfs);return l(n),e}catch(e){console.error(e)}finally{a(!1)}},[i,r]),y=(0,p.useCallback)(async e=>{e&&(m(e),null==t||t.add({variant:"success",title:"File uploaded",text:"Encrypted disk image uploaded successfully"}))},[t]),{control:j,handleSubmit:v,reset:w}=(0,_.c)({defaultValues:{},onSubmit:f,onSuccess:y,readyDeps:[]}),Z=(0,I.qo)({control:j}),P=(0,I.bc)({control:j,name:"encryptedDiskImage"}),S=(0,c.vx)(u||""),B=(0,p.useMemo)(()=>{let e="aleph instance confidential";return u&&(e+=" \\ \n    --rootfs ".concat(u)),e},[u]);return(0,p.useEffect)(()=>{s&&s===Z.encryptedDiskImage&&w()},[s,w,Z.encryptedDiskImage]),{commands:{retrieveScriptsCommand:"wget https://raw.githubusercontent.com/aleph-im/aleph-vm/main/examples/example_confidential_image/build_debian_image.sh\nwget https://raw.githubusercontent.com/aleph-im/aleph-vm/main/examples/example_confidential_image/setup_debian_rootfs.sh",fetchBaseImageCommand:"wget https://cloud.debian.org/images/cloud/bookworm/latest/debian-12-genericcloud-amd64.qcow2",mountImageCommand:"sudo mkdir -p /mnt/debian\nsudo guestmount \\\n    --format=qcow2 \\\n    -a ./debian-12-genericcloud-amd64.qcow2 \\\n    -o allow_other \\\n    -i /mnt/debian",copyRootFileSystemCommand:"export ROOT_DIR=./extracted\nmkdir ${ROOT_DIR}\nsudo cp --archive /mnt/debian/* ${ROOT_DIR}",cleanUpMountCommand:"sudo guestunmount /mnt/debian\nsudo rm -r /mnt/debian",createEncryptedDiskCommand:"bash ./build_debian_image.sh \\\n    --rootfs-dir $ROOT_DIR \\\n    -o ~/destination-image.img \\\n    --password your-password",createConfidentialInstanceCommand:B,secureChannelWithInstanceCommand:"aleph instance confidential-init-session <vmhash>",startInstanceCommand:"aleph instance confidential-start <vmhash>"},encryptedDiskImageFormValues:Z,encryptedDiskImageCtrl:P,encryptedDiskImageItemHash:u,disabledUploadEncryptedDiskImage:h,isUploadingFile:o,uploadedFileMessage:d,uploadEncryptedDiskImageButtonRef:g,uploadEncryptedDiskImageButtonToolip:x,handleUploadEncryptedDiskImage:v,handleCopyEncryptedDiskImageHash:S,handleBack:()=>{n.push(T.cr.console.computing.confidentials.home)}}}();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a(),{children:[(0,i.jsx)("title",{children:"Console | New TEE Instance | Aleph Cloud"}),(0,i.jsx)("meta",{name:"description",content:"Create a new TEE Instance on Aleph Cloud"})]}),(0,i.jsx)(s.Z,{handleBack:S}),(0,i.jsx)(R,{children:(0,i.jsx)(l.F,{children:(0,i.jsx)(P.Z,{selected:"confidential"})})}),(0,i.jsx)(L,{children:(0,i.jsx)(l.F,{children:(0,i.jsx)(x,{toggleTitle:(0,i.jsx)(d.N,{number:0,children:"Requirements"}),children:(0,i.jsxs)(D,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(F,{className:"tp-h7",children:"System"}),(0,i.jsx)(c.DY,{size:"regular",gap:"1rem",items:[{kind:"info",title:"Machine running Linux on x86_64"},{kind:"info",title:"Machine with IPv6 connectiviy"}]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(O,{className:"tp-h7",children:"Software"}),(0,i.jsxs)(c.DY,{size:"regular",gap:"1rem",items:[],children:[(0,i.jsx)(ExternalBulletItemLink,{href:T.cr.docs.cli.home,title:"Aleph Client command-line tool"}),(0,i.jsx)(ExternalBulletItemLink,{href:T.cr.external.rustCargo,title:"Rust and Cargo"}),(0,i.jsx)(ExternalBulletItemLink,{href:T.cr.external.sevctl,title:"Sevctl tool from AMD"}),(0,i.jsx)(ExternalBulletItemLink,{href:T.cr.external.openssh,title:"OpenSSH keypair"}),(0,i.jsx)(ExternalBulletItemLink,{href:T.cr.external.ipfsKubo,title:"IPFS Server"}),(0,i.jsx)(ExternalBulletItemLink,{href:T.cr.external.guestmount,title:"Guestmount"})]})]})]})})})}),(0,i.jsx)(M,{children:(0,i.jsx)(l.F,{children:(0,i.jsx)(x,{toggleTitle:(0,i.jsx)(d.N,{number:1,children:"Create encrypted disk image"}),children:(0,i.jsxs)(z,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(A,{className:"tp-h7",children:"1. Retrieving the scripts"}),(0,i.jsxs)(V,{children:[(0,i.jsx)("strong",{children:"Download"})," the necessary"," ",(0,i.jsx)("strong",{children:"sample scripts"})," from"," ",(0,i.jsx)(m.Z,{href:"https://github.com/aleph-im/aleph-vm/tree/main/examples/example_confidential_image",color:"main0",text:"Aleph VM Examples - TEE Image"})]}),(0,i.jsx)(CodeBlock,{code:e.retrieveScriptsCommand,language:"bash"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(J,{className:"tp-h7",children:"2. Customizing the VM"}),(0,i.jsxs)(U,{children:["It is ",(0,i.jsx)("strong",{children:"advised"})," to at least add a"," ",(0,i.jsx)("strong",{children:"user with"})," both a ",(0,i.jsx)("strong",{children:"password"})," ","and an ",(0,i.jsx)("strong",{children:"SSH key"})," in the sudo group."]}),(0,i.jsxs)("p",{children:["You can ",(0,i.jsx)("strong",{children:"customize your VM"})," by modifying the"," ",(0,i.jsx)("strong",{children:"setup_debian_rootfs.sh"})," script. This script is executed within the VM's chroot environment, allowing you to tailor the system according to your needs."]}),(0,i.jsx)("p",{children:"This allows you to:"}),(0,i.jsxs)($,{children:[(0,i.jsx)(c.DY,{size:"regular",gap:"0.5rem",items:[{kind:"info",title:"Add a user."},{kind:"info",title:"Install an SSH key."}]}),(0,i.jsx)(c.DY,{size:"regular",gap:"0.5rem",items:[{kind:"info",title:"Install additional software."},{kind:"info",title:"Modify the default configuration."}]})]}),(0,i.jsxs)("p",{children:["Simply add your custom instructions at the end of the"," ",(0,i.jsx)("strong",{children:"setup_debian_rootfs.sh"})," script."]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(q,{className:"tp-h7",children:"3. Fetching a base image"}),(0,i.jsxs)(G,{children:["It is ",(0,i.jsx)("strong",{children:"recommended"})," to start from the"," ",(0,i.jsx)("strong",{children:"genericcloud image"}),", as it contain cloud-init, which is used to setup the network when launching the VM."]}),(0,i.jsx)(CodeBlock,{code:e.fetchBaseImageCommand,language:"bash"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(W,{className:"tp-h7",children:"4. Extract the root filesystem"}),(0,i.jsxs)(H,{children:["To do so, we simply need to ",(0,i.jsx)("strong",{children:"mount"})," the"," ",(0,i.jsx)("strong",{children:"raw image"})," with ",(0,i.jsx)("strong",{children:"guestmount"}),"."]}),(0,i.jsx)(CodeBlock,{code:e.mountImageCommand,language:"bash"}),(0,i.jsxs)(Y,{children:["Then, you can simply ",(0,i.jsx)("strong",{children:"copy"})," the"," ",(0,i.jsx)("strong",{children:"root file system"})," to any directory."]}),(0,i.jsx)(X,{children:"Take caution to preserve the proper permission like the setuid bit with the --archive option."}),(0,i.jsx)(CodeBlock,{code:e.copyRootFileSystemCommand,language:"bash"}),(0,i.jsxs)(K,{children:["Then, ",(0,i.jsx)("strong",{children:"clean"})," up the ",(0,i.jsx)("strong",{children:"mount"}),":"]}),(0,i.jsx)(CodeBlock,{code:e.cleanUpMountCommand,language:"bash"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(Q,{className:"tp-h7",children:"5. Create the encrypted disk"}),(0,i.jsxs)("p",{children:["Run the ",(0,i.jsx)("strong",{children:"build_debian_image.sh"})," that will"," ",(0,i.jsx)("strong",{children:"create"})," the image with the"," ",(0,i.jsx)("strong",{children:"encrypted disk"})]}),(0,i.jsxs)(ee,{children:["The ",(0,i.jsx)("strong",{children:"password option"})," is the"," ",(0,i.jsx)("strong",{children:"secret password key"}),", with which the"," ",(0,i.jsx)("strong",{children:"disk will be encrypted"}),", you will need to pass it to launch the VM."]}),(0,i.jsx)(CodeBlock,{code:e.createEncryptedDiskCommand,language:"bash"})]})]})})})}),(0,i.jsx)(en,{children:(0,i.jsx)(l.F,{children:(0,i.jsx)(x,{toggleTitle:(0,i.jsx)(d.N,{number:2,children:"Upload encrypted disk image"}),children:(0,i.jsxs)(et,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Upload"})," your encrypted disk image created in"," ",(0,i.jsx)("strong",{children:"Step 1: Create encrypted disk image"})]}),(0,i.jsxs)(v,{isEncryptedDiskImagePresent:!!n.encryptedDiskImage,children:[(0,i.jsx)(c.S2,{...t.field,...t.fieldState}),n.encryptedDiskImage&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:g,children:(0,i.jsx)(c.zx,{disabled:o,type:"submit",onClick:y,animation:"icon-to-top-on-hover",children:h?(0,i.jsxs)(i.Fragment,{children:["Uploading ",(0,i.jsx)(ei,{name:"spinner"})]}):(0,i.jsxs)(i.Fragment,{children:["Upload",(0,i.jsx)(c.JO,{name:"arrow-up"})]})})}),o&&(0,i.jsx)(Z.Z,{my:"bottom-left",at:"top-right",targetRef:g,content:f})]})]}),u&&(0,i.jsxs)("div",{children:[(0,i.jsx)(er,{className:"tp-h7",children:"Uploaded encrypted disk image"}),(0,i.jsx)("div",{className:"tp-info text-main0",children:"MESSAGE ITEM HASH"}),(0,i.jsx)(w.Z,{iconName:"copy",onClick:j,children:r})]})]})})})}),(0,i.jsx)(eo,{children:(0,i.jsx)(l.F,{children:(0,i.jsx)(x,{toggleTitle:(0,i.jsx)(d.N,{number:3,children:"Create TEE Instance"}),children:(0,i.jsx)(ea,{children:(0,i.jsxs)("div",{children:[(0,i.jsxs)(es,{children:["This command will ask you about how much ",(0,i.jsx)("strong",{children:"CPU"}),","," ",(0,i.jsx)("strong",{children:"RAM"})," and ",(0,i.jsx)("strong",{children:"Disk"})," you want to use and on which ",(0,i.jsx)("strong",{children:"node (CRN)"})," to deploy it."]}),(0,i.jsx)(CodeBlock,{code:e.createConfidentialInstanceCommand,language:"bash"}),(0,i.jsxs)(el,{children:["This command handles instance creation, secure channel setup, and VM initialization all at once. To run the three steps separately"," ",(0,i.jsx)(m.Z,{href:T.cr.docs.confidentials,color:"main0",text:"check the docs"})]})]})})})})}),(0,i.jsx)(ed,{children:(0,i.jsx)(ec,{children:(0,i.jsxs)(c.zx,{as:"a",href:"/computing/confidential",animation:"icon-to-right-on-hover",children:["Check your TEE Instances ",(0,i.jsx)(c.JO,{name:"arrow-right"})]})})})]})}var S=(0,r.ZP)("a")({display:"flex",alignItems:"flex-end",gap:"0.5rem"}),B=(0,r.ZP)(c.JO)({paddingBottom:"0.375rem"}),N=(0,r.ZP)("div")({minWidth:"10rem",maxWidth:"100%"}),E=(0,r.ZP)("div")({overflow:"auto",whiteSpace:"pre",borderBottomRightRadius:"0.75rem",borderBottomLeftRadius:"0.75rem",paddingLeft:"1.25rem",paddingRight:"1.25rem",paddingBottom:"2rem"}),R=(0,r.ZP)("section")({paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",paddingBottom:"0px","@media (min-width: 48rem)":{paddingTop:"2rem",paddingBottom:"2rem"}}),L=(0,r.ZP)("section")({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.25rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem"}}),D=(0,r.ZP)("div")({display:"flex",flexWrap:"wrap",columnGap:"6rem",rowGap:"1.75rem"}),F=(0,r.ZP)("div")({marginBottom:"0.5rem"}),O=(0,r.ZP)("div")({marginBottom:"0.5rem"}),M=(0,r.ZP)("section")({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.25rem",paddingTop:"0px"}),z=(0,r.ZP)("div")({display:"flex",flexDirection:"column",gap:"1.5rem"}),A=(0,r.ZP)("div")({marginBottom:"0.5rem"}),V=(0,r.ZP)("p")({marginBottom:"0.5rem"}),J=(0,r.ZP)("div")({marginBottom:"0.5rem"}),U=(0,r.ZP)("p")({marginBottom:"0.5rem"}),$=(0,r.ZP)("div")({marginBottom:"1rem",marginTop:"0.5rem",display:"flex",flexWrap:"wrap",gap:"1.5rem"}),q=(0,r.ZP)("div")({marginBottom:"0.5rem"}),G=(0,r.ZP)("p")({marginBottom:"0.5rem"}),W=(0,r.ZP)("div")({marginBottom:"0.5rem"}),H=(0,r.ZP)("p")({marginBottom:"0.5rem"}),Y=(0,r.ZP)("p")({marginTop:"0.5rem"}),X=(0,r.ZP)("p")({marginBottom:"0.5rem"}),K=(0,r.ZP)("p")({marginTop:"0.5rem",marginBottom:"0.5rem"}),Q=(0,r.ZP)("div")({marginBottom:"0.5rem"}),ee=(0,r.ZP)("p")({marginBottom:"0.5rem"}),en=(0,r.ZP)("section")({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.25rem",paddingTop:"0px"}),et=(0,r.ZP)("div")({display:"flex",flexDirection:"column",gap:"1.5rem"}),ei=(0,r.ZP)(c.JO)({"@keyframes spin":{to:{transform:"rotate(360deg)"}},animation:"spin 1s linear infinite"}),er=(0,r.ZP)("div")({marginBottom:"0.5rem"}),eo=(0,r.ZP)("section")({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.25rem",paddingTop:"0px"}),ea=(0,r.ZP)("div")({display:"flex",flexDirection:"column",gap:"1.5rem"}),es=(0,r.ZP)("p")({marginBottom:"0.5rem"}),el=(0,r.ZP)("p")({marginTop:"0.5rem",fontStyle:"italic"}),ed=(0,r.ZP)("section")({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"5rem",paddingTop:"1.5rem"}),ec=(0,r.ZP)(l.F).withConfig({displayName:"cmp___StyledCenteredContainer",componentId:"sc-12n0yzd-0"})({display:"flex",alignItems:"center",justifyContent:"center",paddingTop:"2rem"})}},function(e){e.O(0,[7536,9774,2888,179],function(){return e(e.s=74044)}),_N_E=e.O()}]);