(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2287],{35092:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/console/computing/gpu-instance/[hash]",function(){return t(14469)}])},58317:function(e,n,t){"use strict";t.d(n,{Z:function(){return s.Z}});var s=t(62394)},78474:function(e,n,t){"use strict";t.d(n,{c:function(){return useGpuInstanceManager}});var s=t(9754);function useGpuInstanceManager(){let[e]=(0,s.mr)(),{gpuInstanceManager:n}=e.manager;return n}},15743:function(e,n,t){"use strict";t.d(n,{m:function(){return useRequestGpuInstances}});var s=t(77205),i=t(78474);function useRequestGpuInstances(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,i.c)();return(0,s.F)({...e,manager:n,name:"gpuInstance"})}},14469:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ManageGpuInstance}});var s=t(85893),i=t(19521),o=t(9008),l=t.n(o),a=t(79632),u=t(11163),d=t(67294),c=t(57125),r=t(15743),m=t(78474),p=t(49107),g=t(37850),v=t(36286),h=t(50090),y=t(63831),x=t(68091),f=t(30425),j=t(69429),I=t(25491),C=t(18995),Z=t(85786),_=t(1131),b=t(91986),k=t(21204),S=t(45806),w=t(73635),D=t(40256),M=t(24541),G=t(78436),O=t(95029),K=t(58317),N=t(27917),R=t(32424),V=t(14215);function ManageGpuInstance(){var e,n;let{gpuInstance:t,manager:i,name:o,status:P,calculatedStatus:T,isAllocated:q,nodeDetails:z,immutableVolumes:A,persistentVolumes:L,mappedKeys:F,customDomains:X,handleCustomDomainClick:B,paymentData:U,logs:J,handleDownloadLogs:W,isDownloadingLogs:Q,stopDisabled:Y,handleStop:$,startDisabled:ee,handleStart:en,rebootDisabled:et,handleReboot:es,deleteDisabled:ei,handleDelete:eo,sidePanel:el,handleImmutableVolumeClick:ea,handleSSHKeyClick:eu,closeSidePanel:ed,setTabId:ec,sliderActiveIndex:er,handleBack:em}=function(){let e=(0,u.useRouter)(),{hash:n}=e.query,{entities:t}=(0,r.m)({ids:n}),[s]=t||[],i=(0,m.c)(),[o,l]=(0,d.useState)("detail"),a="log"===o,f=(0,c.y)({executable:s,manager:i,subscribeLogs:a}),{streamDetails:j,logs:I}=f,C=(0,d.useMemo)(()=>{var e;return s?(null==s?void 0:null===(e=s.metadata)||void 0===e?void 0:e.name)||(0,p.zN)(s.id):""},[s]),Z=(0,d.useMemo)(()=>(null==s?void 0:s.time)?Math.floor(Date.now()-1e3*s.time)/1e3:void 0,[null==s?void 0:s.time]),{handleDownloadLogs:_,isDownloadingLogs:b}=(0,g.Z)({fileName:C,logs:I}),k=(0,d.useCallback)(()=>{e.push(".")},[e]),{entities:S}=(0,x.X)(),w=(0,d.useMemo)(()=>(null==s?void 0:s.authorized_keys)&&S?s.authorized_keys.map(e=>S.find(n=>n.key===e)):[],[s,S]),{persistentVolumes:D,immutableVolumes:M}=(0,h.Z)({volumes:null==s?void 0:s.volumes}),{customDomains:G}=(0,y.Z)({entityId:null==s?void 0:s.id}),O=(0,d.useCallback)(e=>{R({isOpen:!0,type:"domain",selectedDomain:e})},[]),K=(0,d.useMemo)(()=>{var e,n;return(null==s?void 0:null===(e=s.payment)||void 0===e?void 0:e.type)===v.uG.superfluid&&(null==j?void 0:null===(n=j.streams)||void 0===n?void 0:n.length)?j.streams.map(e=>{var n;return{cost:e.flow,paymentType:v.uG.superfluid,runningTime:Z,startTime:null==s?void 0:s.time,blockchain:null==s?void 0:null===(n=s.payment)||void 0===n?void 0:n.chain,loading:!1,receiver:e.receiver}}):[{paymentType:v.uG.hold,loading:!0}]},[null==s?void 0:s.payment,Z,null==s?void 0:s.time,null==j?void 0:j.streams]),[N,R]=(0,d.useState)({isOpen:!1}),V=(0,d.useCallback)(e=>{R({isOpen:!0,type:"volume",selectedVolume:e})},[]),E=(0,d.useCallback)(e=>{R({isOpen:!0,type:"sshKey",selectedSSHKey:e})},[]),H=(0,d.useCallback)(()=>{R(e=>({...e,isOpen:!1}))},[]),P=(0,d.useMemo)(()=>"log"===o?1:0,[o]);return{...f,gpuInstance:s,manager:i,mappedKeys:w,customDomains:G,handleCustomDomainClick:O,setTabId:l,handleBack:k,handleDownloadLogs:_,isDownloadingLogs:b,paymentData:K,immutableVolumes:M,persistentVolumes:D,name:C,sliderActiveIndex:P,sidePanel:N,handleImmutableVolumeClick:V,handleSSHKeyClick:E,closeSidePanel:H}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l(),{children:[(0,s.jsx)("title",{children:"Console | Manage GPU Instance | Aleph Cloud"}),(0,s.jsx)("meta",{name:"description",content:"Manage your compute instance on Aleph Cloud"})]}),(0,s.jsx)(f.Z,{entity:t,name:o,type:"GPU instance",isAllocated:q,status:P,calculatedStatus:T,showStart:!0,startDisabled:ee,onStart:en,showDelete:!0,deleteDisabled:ei,onDelete:eo,showStop:!0,stopDisabled:Y,onStop:$,showReboot:!0,rebootDisabled:et,onReboot:es,onBack:em}),(0,s.jsxs)(j.i,{activeIndex:er,children:[(0,s.jsx)(j.M,{children:(0,s.jsx)(I.Z,{leftColumnElements:[(0,s.jsx)(C.Z,{instance:t},"gpuInstance-details"),(0,s.jsx)(Z.V,{onViewLogs:()=>ec("log"),onDownloadLogs:W,downloadingLogs:Q,disabled:!t||!q},"gpuInstance-logs-control"),(0,s.jsx)(_.Z,{sshKeys:F,onSSHKeyClick:eu},"gpuInstance-ssh-keys"),(0,s.jsx)(b.Z,{payments:U},"gpuInstance-payment")],rightColumnElements:[(0,s.jsx)(k.Z,{nodeDetails:z,termsAndConditionsHash:null==t?void 0:null===(n=t.requirements)||void 0===n?void 0:null===(e=n.node)||void 0===e?void 0:e.terms_and_conditions},"gpuInstance-hosting-crn"),(0,s.jsx)(S.Z,{executableStatus:P},"gpuInstance-connection-methods"),A.length&&(0,s.jsx)(w.Z,{linkedVolumes:A,onImmutableVolumeClick:ea},"gpuInstance-linked-volumes"),L.length&&(0,s.jsx)(D.Z,{persistentVolumes:L},"gpuInstance-persistent-storage"),X.length&&(0,s.jsx)(M.Z,{customDomains:X,onCustomDomainClick:B},"gpuInstance-custom-domains"),(0,s.jsx)(G.Z,{entityHash:null==t?void 0:t.id,executableStatus:P,executableManager:i},"port-forwarding")]})}),(0,s.jsx)(j.M,{children:(0,s.jsxs)(E,{children:[(0,s.jsx)(O.Z,{onClick:()=>ec("detail"),children:(0,s.jsx)(a.JO,{name:"angle-left",size:"1.3em"})}),(0,s.jsx)(H,{children:(0,s.jsx)(Z.W,{logs:J})})]})})]}),(0,s.jsx)(K.Z,{title:"volume"===el.type?"Volume":"sshKey"===el.type?"SSH Key":"Custom Domain",isOpen:el.isOpen,onClose:ed,children:"volume"===el.type?el.selectedVolume&&(0,s.jsx)(N.Z,{volumeId:el.selectedVolume.id}):"sshKey"===el.type?el.selectedSSHKey&&(0,s.jsx)(R.Z,{sshKeyId:el.selectedSSHKey.id}):"domain"===el.type?el.selectedDomain&&(0,s.jsx)(V.Z,{domainId:el.selectedDomain.id}):(0,s.jsx)(s.Fragment,{children:"ERROR"})})]})}var E=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-xp3x6-0"})({display:"flex",width:"100%",gap:"2rem",paddingLeft:"3rem",paddingRight:"3rem",paddingTop:"1.5rem",paddingBottom:"1.5rem"}),H=(0,i.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-xp3x6-1"})({display:"flex",width:"100%",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"0.75rem"})}},function(e){e.O(0,[7536,1505,8684,4215,4473,5859,9774,2888,179],function(){return e(e.s=35092)}),_N_E=e.O()}]);