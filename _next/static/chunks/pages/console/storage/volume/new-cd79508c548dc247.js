(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[134],{90477:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/console/storage/volume/new",function(){return n(5746)}])},72882:function(e,t,n){"use strict";n.d(t,{ZP:function(){return u}});var i=n(85893),o=n(67294),l=n(31515),a=n(43251),r=n(57833);let s=(0,r.ZP)(l.JO).attrs(e=>{let{buttonSize:t}=e;return{size:(()=>{switch(t){case"xs":return"xs";case"sm":return"sm";case"lg":return"md-lg";case"xl":return"lg";default:return"md"}})()}}).withConfig({displayName:"styles__InfoIcon",componentId:"sc-15zds0b-0"})(["opacity:0.8;"]),d=(0,o.forwardRef)((e,t)=>{let{tooltipContent:n,tooltipPosition:r,children:d,disabled:u,size:m,...c}=e,[p,f]=(0,o.useState)(!1);(0,o.useEffect)(()=>{f(!0)},[]);let h=(0,o.useRef)(null),v=t||h;return(0,i.jsxs)("div",{className:"inline-flex relative",children:[(0,i.jsx)(l.zx,{ref:v,disabled:u,size:m,...c,children:(0,i.jsxs)(i.Fragment,{children:[d,u&&n&&(0,i.jsx)(s,{name:"info-circle",buttonSize:m})]})}),p&&u&&n&&(0,i.jsx)(a.Z,{my:(null==r?void 0:r.my)||"bottom-center",at:(null==r?void 0:r.at)||"top-center",targetRef:v,content:n})]})});d.displayName="ButtonWithInfoTooltip";var u=d},36846:function(e,t,n){"use strict";n.d(t,{LY:function(){return p},nx:function(){return u}});var i=n(85893),o=n(57833),l=n(67294),a=n(31515),r=n(93396),s=n(65148);let d=(0,l.memo)(e=>{let{onRemove:t}=e;return(0,i.jsx)(v,{children:(0,i.jsx)(a.zx,{type:"button",kind:"functional",variant:"warning",size:"md",onClick:t,children:"Remove"})})});d.displayName="RemoveVolume";let u=(0,l.memo)(e=>{let{isStandAlone:t,fileCtrl:n,mountPathCtrl:o,useLatestCtrl:l,handleRemove:s}=(0,r.Yl)(e);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x,{children:"Create and configure new volumes for your web3 function by either uploading a dependency file or a squashfs volume. Volumes play a crucial role in managing dependencies and providing a volume within your application."}),(0,i.jsxs)("div",{children:[t?(0,i.jsx)(a.Jy,{children:(0,i.jsx)(a.S2,{...n.field,...n.fieldState,label:"Upload volume file",required:!0})}):(0,i.jsx)(g,{children:(0,i.jsx)(a.S2,{...n.field,...n.fieldState})}),!t&&(0,i.jsx)(j,{children:(0,i.jsx)(a.oi,{...o.field,...o.fieldState,required:!0,label:"Mount",placeholder:"/mount/opt"})}),!t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b,{children:(0,i.jsx)(a.XZ,{...l.field,...l.fieldState,label:"Always update to the latest version"})}),s&&(0,i.jsx)(d,{onRemove:s})]})]})]})});u.displayName="AddNewVolume";let m=(0,l.memo)(e=>{let{refHashCtrl:t,mountPathCtrl:n,useLatestCtrl:o,volumeSize:l,handleRemove:s}=(0,r.Ox)(e);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y,{children:"Link existing volumes to your web3 function by pasting the reference hash associated with each volume. Volumes are an essential component for managing dependencies within your application."}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:(0,i.jsx)(a.oi,{...n.field,...n.fieldState,required:!0,label:"Mount",placeholder:"/mount/opt"})}),(0,i.jsx)(w,{children:(0,i.jsx)(a.oi,{...t.field,...t.fieldState,required:!0,label:"Item hash",placeholder:"3335ad270a571b..."})}),t.field.value&&l&&(0,i.jsx)(P,{children:(0,i.jsx)(a.oi,{label:"Size",name:"size",value:l,disabled:!0})}),(0,i.jsx)(V,{children:(0,i.jsx)(a.XZ,{...o.field,...o.fieldState,checked:!!o.field.value,label:"Always update to the latest version"})}),s&&(0,i.jsx)(d,{onRemove:s})]})]})});m.displayName="AddExistingVolume";let c=(0,l.memo)(e=>{let{nameCtrl:t,mountPathCtrl:n,sizeCtrl:o,sizeValue:l,sizeHandleChange:s,handleRemove:u}=(0,r.BB)(e);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(S,{children:"Create and configure persistent storage for your web3 functions, enabling your application to maintain data across multiple invocations or sessions. You can set up a customized storage solution tailored to your application's requirements."}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:(0,i.jsx)(a.oi,{...t.field,...t.fieldState,required:!0,label:"Volume name",placeholder:"Redis volume"})}),(0,i.jsx)(_,{children:(0,i.jsx)(a.oi,{...n.field,...n.fieldState,required:!0,label:"Mount",placeholder:"/mount/opt"})}),(0,i.jsx)(N,{children:(0,i.jsx)(a.oi,{...o.field,...o.fieldState,value:l,onChange:s,required:!0,type:"number",label:"Size (GB)",placeholder:"0"})}),u&&(0,i.jsx)(d,{onRemove:u})]})]})});c.displayName="AddPersistentVolume";let p=(0,l.memo)(e=>{let{sizeCtrl:t}=(0,r.at)(e);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T,{children:"This system volume is included with your setup. You can easily expand your storage capacity to meet your application's requirements by adding additional volumes below."}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{children:(0,i.jsx)(a.oi,{name:"system_volume_name",required:!0,label:"Volume name",placeholder:"Redis volume",value:"System Volume",dataView:!0})}),(0,i.jsx)(B,{children:(0,i.jsx)(a.oi,{name:"system_volume_mount",required:!0,label:"Mount",placeholder:"/mount/opt",value:"/",dataView:!0})}),(0,i.jsx)(Z,{children:(0,i.jsx)(a.oi,{...t.field,...t.fieldState,name:"system_volume_size",required:!0,type:"number",label:"Size (GB)",placeholder:"0"})})]})]})});p.displayName="InstanceSystemVolume";let f={[s.lf.New]:u,[s.lf.Existing]:m,[s.lf.Persistent]:c},h=(0,l.memo)(e=>{let{volumeTypeCtrl:t,defaultValue:n,...o}=(0,r.Kn)(e),d=t.field.value,u=(0,l.useMemo)(()=>f[d],[d]),m=(0,l.useMemo)(()=>[{id:s.lf.New,name:"New volume"},{id:s.lf.Existing,name:"Existing volume"},{id:s.lf.Persistent,name:"Persistent Storage"}],[]);return(0,i.jsxs)(A,{className:"bg-base1",children:[(0,i.jsx)(C,{children:(0,i.jsx)(a.mQ,{selected:d,align:"left",onTabChange:t.field.onChange,tabs:m})}),(0,i.jsx)("div",{role:"tabpanel",children:(0,i.jsx)(u,{...o,defaultValue:n})})]})});h.displayName="AddVolume",t.ZP=h;var v=(0,o.ZP)("div")({marginTop:"1rem",paddingTop:"1.5rem",textAlign:"right"}),x=(0,o.ZP)("p")({marginBottom:"1.5rem",marginTop:"0.25rem"}),g=(0,o.ZP)("div")({paddingTop:"1rem",paddingBottom:"1rem"}),j=(0,o.ZP)("div")({marginTop:"1rem"}),b=(0,o.ZP)("div")({marginTop:"1rem",paddingTop:"1rem",paddingBottom:"1rem"}),y=(0,o.ZP)("p")({marginBottom:"1.5rem",marginTop:"0.25rem"}),w=(0,o.ZP)("div")({marginTop:"1rem"}),P=(0,o.ZP)("div")({marginTop:"1rem"}),V=(0,o.ZP)("div")({marginTop:"1rem",paddingTop:"1rem",paddingBottom:"1rem"}),S=(0,o.ZP)("p")({marginBottom:"1.5rem"}),_=(0,o.ZP)("div")({marginTop:"1rem"}),N=(0,o.ZP)("div")({marginTop:"1rem"}),T=(0,o.ZP)("p")({marginBottom:"1.5rem"}),B=(0,o.ZP)("div")({marginTop:"1rem"}),Z=(0,o.ZP)("div")({marginTop:"1rem"}),A=(0,o.ZP)("div")({padding:"1.5rem"}),C=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv11",componentId:"sc-de6qwa-0"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"0.75rem"})},34747:function(e,t,n){"use strict";n.d(t,{Z:function(){return i.ZP},n:function(){return i.nx}});var i=n(36846)},93396:function(e,t,n){"use strict";n.d(t,{BB:function(){return useAddPersistentVolumeProps},Kn:function(){return useAddVolume},Ox:function(){return useAddExistingVolumeProps},Yl:function(){return useAddNewVolumeProps},Yz:function(){return r},at:function(){return useAddInstanceSystemVolumeProps}});var i=n(67294),o=n(14685),l=n(65148),a=n(87536);let r={volumeType:l.lf.New};function useAddNewVolumeProps(e){let{name:t="",index:n,control:i,defaultValue:o,onRemove:l}=e,r=void 0===n,s=r?t:"".concat(t,".").concat(n),d=(0,a.bc)({control:i,name:"".concat(s,".file"),defaultValue:null==o?void 0:o.file}),u=(0,a.bc)({control:i,name:"".concat(s,".mountPath"),defaultValue:null==o?void 0:o.mountPath}),m=(0,a.bc)({control:i,name:"".concat(s,".useLatest"),defaultValue:null==o?void 0:o.useLatest});return{isStandAlone:void 0===n,fileCtrl:d,mountPathCtrl:u,useLatestCtrl:m,handleRemove:l}}function useAddExistingVolumeProps(e){let{name:t="",index:n,control:r,defaultValue:s,onRemove:d}=e,u=(0,a.bc)({control:r,name:"".concat(t,".").concat(n,".refHash"),defaultValue:null==s?void 0:s.refHash}),m=(0,a.bc)({control:r,name:"".concat(t,".").concat(n,".mountPath"),defaultValue:null==s?void 0:s.mountPath}),c=(0,a.bc)({control:r,name:"".concat(t,".").concat(n,".useLatest"),defaultValue:null==s?void 0:s.useLatest}),{value:p}=u.field,[f,h]=(0,i.useState)("");return(0,i.useEffect)(()=>{(async function(){let e=await l.l8.getVolumeSize({volumeType:l.lf.Existing,refHash:p}),t=(0,o.eB)(e,"MiB");h(t)})()},[p]),{refHashCtrl:u,mountPathCtrl:m,useLatestCtrl:c,volumeSize:f,handleRemove:d}}function useAddPersistentVolumeProps(e){let{name:t="",index:n,control:l,defaultValue:r,onRemove:s}=e,d=(0,a.bc)({control:l,name:"".concat(t,".").concat(n,".name"),defaultValue:null==r?void 0:r.name}),u=(0,a.bc)({control:l,name:"".concat(t,".").concat(n,".mountPath"),defaultValue:null==r?void 0:r.mountPath}),m=(0,a.bc)({control:l,name:"".concat(t,".").concat(n,".size"),defaultValue:null==r?void 0:r.size}),c=(0,i.useCallback)(e=>{let t=Number(e.target.value),n=(0,o.Fx)(t,{from:"GiB",to:"MiB",displayUnit:!1});m.field.onChange(n)},[m.field]),p=(0,i.useMemo)(()=>m.field.value?(0,o.Fx)(m.field.value,{from:"MiB",to:"GiB",displayUnit:!1}):void 0,[m.field]);return{nameCtrl:d,mountPathCtrl:u,sizeCtrl:m,sizeValue:p,sizeHandleChange:c,handleRemove:s}}function useAddInstanceSystemVolumeProps(e){let{control:t,defaultValue:n}=e,l=(0,a.bc)({control:t,name:"systemVolume.size",defaultValue:n}),{value:r,onChange:s}=l.field;return l.field.onChange=(0,i.useCallback)(e=>{let t=Number(e.target.value),n=(0,o.Fx)(t,{from:"GiB",to:"MiB",displayUnit:!1});s(n)},[s]),l.field.value=(0,i.useMemo)(()=>r?(0,o.Fx)(r,{from:"MiB",to:"GiB",displayUnit:!1}):void 0,[r]),{sizeCtrl:l}}function useAddVolume(e){let{name:t="volumes",index:n,control:o,defaultValue:r,onRemove:s}=e,d=void 0===n,u=d?t:"".concat(t,".").concat(n),m=(0,a.bc)({control:o,name:"".concat(u,".volumeType"),defaultValue:l.lf.New}),c=(0,i.useCallback)(()=>{s&&s(n)},[n,s]);return{name:t,index:n,control:o,volumeTypeCtrl:m,defaultValue:r,onRemove:c}}},5746:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var i=n(85893),o=n(57833),l=n(67294),a=n(9008),r=n.n(a),s=n(9911),d=n(11163),u=n(65148),m=n(9754),c=n(24959),p=n(90805),f=n(87536),h=n(56312),v=n(37419),x=n(86780),g=n(9324),j=n(50586),b=n(28565);let y={volumeType:u.lf.New};var w=n(42045),P=n(99983),V=n(34747),S=n(75650),_=n(49531),N=n(93788),T=n(72882),B=l.memo(function(){let{control:e,address:t,accountBalance:n,isCreateButtonDisabled:o,errors:a,cost:B,handleSubmit:A,handleBack:C}=function(){let e=(0,d.useRouter)(),[t,n]=(0,m.mr)(),{account:i,balance:o=0}=t.connection,a=(0,p.B)(),{next:r,stop:w}=(0,x.A)({}),P=(0,l.useCallback)(async t=>{if(!a)throw j.Z.ConnectYourWallet;let i=await a.getAddSteps(t),o=i.map(e=>x.n[e]),l=a.addSteps(t);try{let t;for(;!t;){let{value:e,done:n}=await l.next();if(n){t=e[0];break}await r(o)}n(new g.Wy({name:"volume",entities:t})),await e.replace(s.cr.console.home)}finally{await w()}},[n,a,r,e,w]),{control:V,handleSubmit:S,formState:{errors:_}}=(0,c.c)({defaultValues:y,onSubmit:P,resolver:(0,h.F)(u.l8.addSchema)}),N=(0,f.qo)({control:V}),T=(0,l.useMemo)(()=>N,[N]),B=(0,l.useMemo)(()=>({entityType:s.py.Volume,props:{volume:T}}),[T]),Z=(0,v.F)(B),{isCreateButtonDisabled:A}=(0,b.U)({cost:Z,accountBalance:o});return{address:(null==i?void 0:i.address)||"",accountBalance:o,isCreateButtonDisabled:A,values:N,control:V,errors:_,cost:Z,handleSubmit:S,handleBack:()=>{e.push(s.cr.console.storage.home)}}}();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r(),{children:[(0,i.jsx)("title",{children:"Console | New Volume | Aleph Cloud"}),(0,i.jsx)("meta",{name:"description",content:"Create a new persistent storage volume on Aleph Cloud"})]}),(0,i.jsx)(N.Z,{handleBack:C}),(0,i.jsxs)(S.l,{onSubmit:A,errors:a,children:[(0,i.jsx)(Z,{children:(0,i.jsxs)(P.F,{children:[(0,i.jsx)(_.N,{number:"1",children:"Add volume"}),(0,i.jsx)(V.n,{control:e})]})}),(0,i.jsx)(w.Z,{address:t,cost:B,unlockedAmount:n,paymentMethod:s.XL.Hold,description:(0,i.jsx)(i.Fragment,{children:"This amount needs to be present in your wallet until the volume is removed. Tokens won 't be locked nor consumed. The volume will be garbage collected once funds are removed from the wallet."}),button:(0,i.jsx)(T.ZP,{type:"submit",color:"main0",kind:"default",size:"lg",variant:"primary",disabled:o,tooltipContent:o?function(e){let{title:t,description:n}=e;return(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"tp-body3 fs-18 text-base2",children:t}),(0,i.jsx)("p",{className:"tp-body1 fs-14 text-base2",children:n})]})}({title:"Insufficient Funds",description:"You don't have enough ALEPH tokens in your wallet to create this volume. Please add more tokens to your wallet to continue."}):void 0,tooltipPosition:{my:"bottom-center",at:"top-center"},children:"Create volume"})})]})]})}),Z=(0,o.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-171wghn-0"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}})},82729:function(e,t,n){"use strict";function _tagged_template_literal(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,{_:function(){return _tagged_template_literal}})}},function(e){e.O(0,[7536,4757,1243,9774,2888,179],function(){return e(e.s=90477)}),_N_E=e.O()}]);