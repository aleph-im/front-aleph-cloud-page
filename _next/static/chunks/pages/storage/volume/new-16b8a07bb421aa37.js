(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[41],{37313:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/storage/volume/new",function(){return t(67828)}])},90805:function(e,n,t){"use strict";t.d(n,{B:function(){return useVolumeManager}});var o=t(55640);function useVolumeManager(){let[e]=(0,o.mr)(),{volumeManager:n}=e.manager;return n}},67828:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return NewVolumePage}});var o=t(85893),r=t(19521),a=t(9911),i=t(67294),l=t(11163),u=t(65148),d=t(55640),s=t(24959),m=t(90805),c=t(87536),p=t(56312),f=t(37419),w=t(86780),g=t(9324);let h={volumeType:u.z.New};var v=t(79632),y=t(31626),_=t(93963),b=t(34747),x=t(75650),N=t(49531);function NewVolumePage(){let{control:e,values:n,address:t,accountBalance:r,isCreateButtonDisabled:T,errors:E,handleSubmit:j}=function(){let e=(0,l.useRouter)(),[n,t]=(0,d.mr)(),{account:o,balance:r=0}=n.connection,v=(0,m.B)(),{next:y,stop:_}=(0,w.A)({}),b=(0,i.useCallback)(async n=>{if(!v)throw Error("Manager not ready");let o=await v.getSteps(n),r=o.map(e=>w.n[e]),a=v.addSteps(n);try{let n;for(;!n;){let{value:e,done:t}=await a.next();if(t){n=e[0];break}await y(r)}t(new g.Wy({name:"volume",entities:n})),await e.replace("/")}finally{await _()}},[t,v,y,e,_]),{control:x,handleSubmit:N,formState:{errors:k}}=(0,s.c)({defaultValues:h,onSubmit:b,resolver:(0,p.F)(u.l.addSchema)}),T=(0,c.qo)({control:x}),E=(0,i.useMemo)(()=>[T],[T]),{cost:j}=(0,f.F)({entityType:a.py.Volume,props:{volumes:E}}),S=r>((null==j?void 0:j.totalCost)||Number.MAX_SAFE_INTEGER);return{address:(null==o?void 0:o.address)||"",accountBalance:r,isCreateButtonDisabled:!S,values:T,control:x,errors:k,handleSubmit:N}}(),S=(0,i.useMemo)(()=>[n],[n]);return(0,o.jsxs)(x.l,{onSubmit:j,errors:E,children:[(0,o.jsx)(k,{children:(0,o.jsxs)(_.Z,{children:[(0,o.jsx)(N.N,{number:"1",children:"Add volume"}),(0,o.jsx)(b.n,{control:e})]})}),(0,o.jsx)(y.Z,{address:t,type:a.py.Volume,volumes:S,unlockedAmount:r,paymentMethod:a.XL.Hold,description:(0,o.jsx)(o.Fragment,{children:"This amount needs to be present in your wallet until the volume is removed. Tokens won 't be locked nor consumed. The volume will be garbage collected once funds are removed from the wallet."}),button:(0,o.jsx)(v.zx,{type:"submit",color:"main0",kind:"default",size:"lg",variant:"primary",disabled:T,children:"Create volume"})})]})}var k=(0,r.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-1soo596-0"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}})}},function(e){e.O(0,[834,774,888,179],function(){return e(e.s=37313)}),_N_E=e.O()}]);