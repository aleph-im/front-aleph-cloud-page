(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[41],{37313:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/storage/volume/new",function(){return s(67828)}])},90805:function(e,r,s){"use strict";s.d(r,{B:function(){return useVolumeManager}});var u=s(55640);function useVolumeManager(){let[e]=(0,u.mr)(),{volumeManager:r}=e.manager;return r}},67828:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return NewVolumePage}});var u=s(85893),l=s(19521),d=s(9911),c=s(67294),f=s(11163),m=s(65148),v=s(55640),p=s(24959),h=s(90805),y=s(87536),g=s(56312),w=s(37419),_=s(86780),b=s(9324),N=s(50586);let E={volumeType:m.z.New};var j=s(79632),V=s(25402),x=s(93963),k=s(34747),T=s(75650),A=s(49531);function NewVolumePage(){let{control:e,values:r,address:s,accountBalance:l,isCreateButtonDisabled:P,errors:S,handleSubmit:z}=function(){let e=(0,f.useRouter)(),[r,s]=(0,v.mr)(),{account:u,balance:l=0}=r.connection,j=(0,h.B)(),{next:V,stop:x}=(0,_.A)({}),k=(0,c.useCallback)(async r=>{if(!j)throw N.Z.ConnectYourWallet;let u=await j.getAddSteps(r),l=u.map(e=>_.n[e]),d=j.addSteps(r);try{let r;for(;!r;){let{value:e,done:s}=await d.next();if(s){r=e[0];break}await V(l)}s(new b.Wy({name:"volume",entities:r})),await e.replace("/")}finally{await x()}},[s,j,V,e,x]),{control:T,handleSubmit:A,formState:{errors:C}}=(0,p.c)({defaultValues:E,onSubmit:k,resolver:(0,g.F)(m.l.addSchema)}),P=(0,y.qo)({control:T}),S=(0,c.useMemo)(()=>[P],[P]),{cost:z}=(0,w.F)({entityType:d.py.Volume,props:{volumes:S}}),M=l>((null==z?void 0:z.totalCost)||Number.MAX_SAFE_INTEGER);return{address:(null==u?void 0:u.address)||"",accountBalance:l,isCreateButtonDisabled:!M,values:P,control:T,errors:C,handleSubmit:A}}(),M=(0,c.useMemo)(()=>[r],[r]);return(0,u.jsxs)(T.l,{onSubmit:z,errors:S,children:[(0,u.jsx)(C,{children:(0,u.jsxs)(x.Z,{children:[(0,u.jsx)(A.N,{number:"1",children:"Add volume"}),(0,u.jsx)(k.n,{control:e})]})}),(0,u.jsx)(V.Z,{address:s,type:d.py.Volume,volumes:M,unlockedAmount:l,paymentMethod:d.XL.Hold,description:(0,u.jsx)(u.Fragment,{children:"This amount needs to be present in your wallet until the volume is removed. Tokens won 't be locked nor consumed. The volume will be garbage collected once funds are removed from the wallet."}),button:(0,u.jsx)(j.zx,{type:"submit",color:"main0",kind:"default",size:"lg",variant:"primary",disabled:P,children:"Create volume"})})]})}var C=(0,l.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-1soo596-0"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}})},56312:function(e,r,s){"use strict";s.d(r,{F:function(){return zod_t}});var u=s(87536),t=function(e,r,s){if(e&&"reportValidity"in e){var l=(0,u.U2)(s,r);e.setCustomValidity(l&&l.message||""),e.reportValidity()}},resolvers_i=function(e,r){var i=function(s){var u=r.fields[s];u&&u.ref&&"reportValidity"in u.ref?t(u.ref,s,e):u.refs&&u.refs.forEach(function(r){return t(r,s,e)})};for(var s in r.fields)i(s)},n=function(e,r){r.shouldUseNativeValidation&&resolvers_i(e,r);var s={};for(var l in e){var d=(0,u.U2)(r.fields,l),c=Object.assign(e[l]||{},{ref:d&&d.ref});if(a(r.names||Object.keys(e),l)){var f=Object.assign({},o((0,u.U2)(s,l)));(0,u.t8)(f,"root",c),(0,u.t8)(s,l,f)}else(0,u.t8)(s,l,c)}return s},o=function(e){return Array.isArray(e)?e.filter(Boolean):[]},a=function(e,r){return e.some(function(e){return e.startsWith(r+".")})},zod_n=function(e,r){for(var s={};e.length;){var l=e[0],d=l.code,c=l.message,f=l.path.join(".");if(!s[f]){if("unionErrors"in l){var m=l.unionErrors[0].errors[0];s[f]={message:m.message,type:m.code}}else s[f]={message:c,type:d}}if("unionErrors"in l&&l.unionErrors.forEach(function(r){return r.errors.forEach(function(r){return e.push(r)})}),r){var v=s[f].types,p=v&&v[l.code];s[f]=(0,u.KN)(f,r,s,d,p?[].concat(p,l.message):l.message)}e.shift()}return s},zod_t=function(e,r,s){return void 0===s&&(s={}),function(u,l,d){try{return Promise.resolve(function(l,c){try{var f=Promise.resolve(e["sync"===s.mode?"parse":"parseAsync"](u,r)).then(function(e){return d.shouldUseNativeValidation&&resolvers_i({},d),{errors:{},values:s.raw?u:e}})}catch(e){return c(e)}return f&&f.then?f.then(void 0,c):f}(0,function(e){if(null!=e.errors)return{values:{},errors:n(zod_n(e.errors,!d.shouldUseNativeValidation&&"all"===d.criteriaMode),d)};throw e}))}catch(e){return Promise.reject(e)}}}}},function(e){e.O(0,[588,747,774,888,179],function(){return e(e.s=37313)}),_N_E=e.O()}]);