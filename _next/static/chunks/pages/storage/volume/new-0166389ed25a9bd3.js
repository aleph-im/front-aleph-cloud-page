(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[41],{37313:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/storage/volume/new",function(){return t(67828)}])},90805:function(e,n,t){"use strict";t.d(n,{B:function(){return useVolumeManager}});var o=t(55640);function useVolumeManager(){let[e]=(0,o.mr)(),{volumeManager:n}=e.manager;return n}},67828:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return NewVolumePage}});var o=t(85893),r=t(19521),a=t(9911),i=t(67294),l=t(11163),u=t(65148),d=t(55640),s=t(24959),m=t(90805),c=t(87536),p=t(56312),f=t(37419),w=t(86780),h=t(9324),g=t(50586);let v={volumeType:u.z.New};var _=t(79632),b=t(31626),y=t(93963),x=t(34747),N=t(75650),k=t(49531);function NewVolumePage(){let{control:e,values:n,address:t,accountBalance:r,isCreateButtonDisabled:j,errors:C,handleSubmit:E}=function(){let e=(0,l.useRouter)(),[n,t]=(0,d.mr)(),{account:o,balance:r=0}=n.connection,_=(0,m.B)(),{next:b,stop:y}=(0,w.A)({}),x=(0,i.useCallback)(async n=>{if(!_)throw g.Z.ConnectYourWallet;let o=await _.getAddSteps(n),r=o.map(e=>w.n[e]),a=_.addSteps(n);try{let n;for(;!n;){let{value:e,done:t}=await a.next();if(t){n=e[0];break}await b(r)}t(new h.Wy({name:"volume",entities:n})),await e.replace("/")}finally{await y()}},[t,_,b,e,y]),{control:N,handleSubmit:k,formState:{errors:T}}=(0,s.c)({defaultValues:v,onSubmit:x,resolver:(0,p.F)(u.l.addSchema)}),j=(0,c.qo)({control:N}),C=(0,i.useMemo)(()=>[j],[j]),{cost:E}=(0,f.F)({entityType:a.py.Volume,props:{volumes:C}}),S=r>((null==E?void 0:E.totalCost)||Number.MAX_SAFE_INTEGER);return{address:(null==o?void 0:o.address)||"",accountBalance:r,isCreateButtonDisabled:!S,values:j,control:N,errors:T,handleSubmit:k}}(),S=(0,i.useMemo)(()=>[n],[n]);return(0,o.jsxs)(N.l,{onSubmit:E,errors:C,children:[(0,o.jsx)(T,{children:(0,o.jsxs)(y.Z,{children:[(0,o.jsx)(k.N,{number:"1",children:"Add volume"}),(0,o.jsx)(x.n,{control:e})]})}),(0,o.jsx)(b.Z,{address:t,type:a.py.Volume,volumes:S,unlockedAmount:r,paymentMethod:a.XL.Hold,description:(0,o.jsx)(o.Fragment,{children:"This amount needs to be present in your wallet until the volume is removed. Tokens won 't be locked nor consumed. The volume will be garbage collected once funds are removed from the wallet."}),button:(0,o.jsx)(_.zx,{type:"submit",color:"main0",kind:"default",size:"lg",variant:"primary",disabled:j,children:"Create volume"})})]})}var T=(0,r.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-1soo596-0"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}})}},function(e){e.O(0,[144,747,774,888,179],function(){return e(e.s=37313)}),_N_E=e.O()}]);