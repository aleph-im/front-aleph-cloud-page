(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[568],{68798:function(e,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/computing/confidential/[hash]",function(){return n(24294)}])},8252:function(e,i,n){"use strict";n.d(i,{o:function(){return useAuthorization}});var t=n(55032),l=n(67294),s=n(54976);function useAuthorization(){let[{authorization:e},i]=(0,t.mr)();return(0,l.useMemo)(()=>{i(new s._j({features:["confidentials"]}))},[i,!0]),e}},57261:function(e,i,n){"use strict";n.d(i,{G:function(){return useConfidentialManager}});var t=n(55032);function useConfidentialManager(){let[e]=(0,t.mr)(),{confidentialManager:i}=e.manager;return i}},18395:function(e,i,n){"use strict";n.d(i,{p:function(){return useSSHKeyManager}});var t=n(55032);function useSSHKeyManager(){let[e]=(0,t.mr)(),{sshKeyManager:i}=e.manager;return i}},75899:function(e,i,n){"use strict";n.d(i,{x:function(){return useRequestConfidentials}});var t=n(77205),l=n(57261);function useRequestConfidentials(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,l.G)();return(0,t.F)({...e,manager:i,name:"confidential"})}},24294:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return ManageConfidential}});var t=n(85893),l=n(19521),s=n(34517),r=n(76696),d=n(79632),a=n(9911),c=n(49107),o=n(70150),m=n(5598),p=n(11505),h=n(41664),x=n.n(h),y=n(93788),f=n(11163),g=n(67294),v=n(18395),_=n(75899),u=n(8252),j=n(89803),N=n(57261);function ManageConfidential(){var e;let{authorized:i,theme:n,confidential:h,status:V,mappedKeys:Y,nodeDetails:Q,handleCopyHash:$,handleCopyConnect:ee,handleCopyIpv6:ei,handleBack:en}=function(){let e=(0,l.Fg)(),i=(0,f.useRouter)(),{push:n,query:{hash:t}}=i,{confidentials:s}=(0,u.o)();(0,g.useEffect)(()=>{s||n("/")},[s,n]);let{entities:r}=(0,_.x)({ids:t}),[a]=r||[],c=(0,N.G)(),o=(0,j.y)({executable:a,manager:c,subscribeLogs:!1}),{status:m}=o,[p,h]=(0,g.useState)([]),x=(0,v.p)();(0,g.useEffect)(()=>{if(!a||!x)return;let getMapped=async()=>{let e=await (null==x?void 0:x.getByValues(a.authorized_keys||[]));h(e)};getMapped()},[x,a]);let y=(0,d.vx)((null==a?void 0:a.id)||""),b=(0,d.vx)((null==m?void 0:m.ipv6Parsed)||""),C=(0,d.vx)("ssh root@".concat(null==m?void 0:m.ipv6Parsed));return{...o,authorized:s,theme:e,confidential:a,status:m,mappedKeys:p,handleCopyHash:y,handleCopyConnect:C,handleCopyIpv6:b,handleBack:()=>{n(".")}}}();if(!i)return;if(!h)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Z,{handleBack:en}),(0,t.jsx)(o.W2,{children:(0,t.jsx)(b,{children:"Loading..."})})]});let et=(null==h?void 0:null===(e=h.metadata)||void 0===e?void 0:e.name)||(0,c.zN)(h.id),el=a.K_[h.type],es=h.volumes;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Z,{handleBack:en}),(0,t.jsx)(C,{children:(0,t.jsxs)(o.W2,{children:[(0,t.jsx)(w,{children:(0,t.jsxs)(S,{children:[(0,t.jsx)(Z,{name:"alien-8bit",className:"text-main0"}),(0,t.jsx)("div",{className:"tp-body2",children:et}),(0,t.jsx)(P,{kind:"secondary",variant:h.time<Date.now()-45e3&&(null==V?void 0:V.ipv6Parsed)?"success":"warning",children:(null==V?void 0:V.ipv6Parsed)?"READY":(0,t.jsxs)(I,{children:[(0,t.jsx)(q,{children:"CONFIRMING"}),(0,t.jsx)(p.s5,{strokeColor:n.color.base2,width:".8rem"})]})})]})}),(0,t.jsxs)(d.Jy,{children:[(0,t.jsxs)(D,{children:[(0,t.jsx)(R,{variant:"accent",children:el}),(0,t.jsxs)(B,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"ITEM HASH"}),(0,t.jsx)(r.Z,{iconName:"copy",onClick:$,children:h.id})]})]}),(0,t.jsx)(o.Z0,{}),(0,t.jsxs)(k,{children:[(0,t.jsxs)(M,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"CORES"}),(0,t.jsx)("div",{children:(0,t.jsxs)(o.xv,{children:[h.resources.vcpus," x86 64bit"]})})]}),(0,t.jsxs)(T,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"RAM"}),(0,t.jsx)("div",{children:(0,t.jsx)(o.xv,{children:(0,c.Fx)(h.resources.memory,{from:"MiB",to:"GiB",displayUnit:!0})})})]}),(0,t.jsxs)(E,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"HDD"}),(0,t.jsx)("div",{children:(0,t.jsx)(o.xv,{children:(0,c.Fx)(h.size,{from:"MiB",to:"GiB",displayUnit:!0})})})]})]}),(0,t.jsxs)(A,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"EXPLORER"}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"tp-body1 fs-16",href:h.url,target:"_blank",referrerPolicy:"no-referrer",children:(0,t.jsx)(r.Z,{iconName:"square-up-right",children:(0,t.jsx)(o.xv,{children:(0,c.bs)(h.url,80)})})})})]}),(0,t.jsx)(o.Z0,{}),(0,t.jsxs)(F,{children:[(0,t.jsx)(d.DU,{type:"h7",as:"h2",color:"main0",children:"Connection methods"}),(0,t.jsxs)(L,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"SSH COMMAND"}),(0,t.jsx)("div",{children:V?(0,t.jsx)(r.Z,{iconName:"copy",onClick:ee,children:(0,t.jsxs)(o.xv,{children:[">_ ssh root@",V.ipv6Parsed]})}):(0,t.jsxs)(H,{children:[(0,t.jsx)(O,{className:"tp-body1 fs-16 text-main2",children:"Allocating"}),(0,t.jsx)(p.g4,{width:".8rem",height:"1rem",color:n.color.main2})]})})]}),(0,t.jsxs)(U,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"IPv6"}),(0,t.jsx)("div",{children:V&&(0,t.jsx)(r.Z,{iconName:"copy",onClick:ei,children:(0,t.jsx)(o.xv,{children:V.ipv6Parsed})})})]})]}),(0,t.jsxs)(G,{children:[(0,t.jsx)(d.DU,{type:"h7",as:"h2",color:"main0",children:"Accessible for"}),(0,t.jsx)(z,{children:Y.map((e,i)=>e&&(0,t.jsxs)(K,{children:[(0,t.jsxs)("div",{className:"tp-info text-main0",children:["SSH KEY #",i+1]}),(0,t.jsx)(x(),{className:"tp-body1 fs-16",href:"?hash="+e.id,referrerPolicy:"no-referrer",children:(0,t.jsx)(r.Z,{iconName:"square-up-right",children:(0,t.jsx)(o.xv,{children:e.label})})})]},null==e?void 0:e.id))})]}),Q&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Z0,{}),(0,t.jsx)(d.DU,{type:"h7",as:"h2",color:"main0",children:"Current CRN"}),(0,t.jsxs)(J,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"NAME"}),(0,t.jsx)("div",{children:(0,t.jsx)(o.xv,{children:Q.name})})]}),(0,t.jsxs)(W,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"URL"}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"tp-body1 fs-16",href:Q.url,target:"_blank",referrerPolicy:"no-referrer",children:(0,t.jsx)(r.Z,{iconName:"square-up-right",children:(0,t.jsx)(o.xv,{children:(0,c.bs)(Q.url,80)})})})})]})]}),es.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Z0,{}),(0,t.jsx)(d.DU,{type:"h7",as:"h2",color:"main0",children:"Linked Storage(s)"}),(0,t.jsx)(m.Z,{volumes:es})]})]}),(0,t.jsx)(X,{children:(0,t.jsx)(s.Z,{variant:"primary",href:"https://docs.aleph.im/computing/confidential/",target:"_blank",children:"Create new confidential instance"})})]})})]})}var b=(0,l.ZP)(d.Jy).withConfig({displayName:"cmp___StyledNoisyContainer",componentId:"sc-yblltq-0"})({marginTop:"1rem",marginBottom:"1rem"}),C=(0,l.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-yblltq-1"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),w=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-yblltq-2"})({display:"flex",flexDirection:"column",flexWrap:"wrap",justifyContent:"space-between",gap:"1rem",paddingBottom:"1.25rem","@media (min-width: 48rem)":{flexDirection:"row"}}),S=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-yblltq-3"})({display:"flex",alignItems:"center"}),Z=(0,l.ZP)(d.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-yblltq-4"})({marginRight:"1rem"}),P=(0,l.ZP)(d.__).withConfig({displayName:"cmp___StyledLabel",componentId:"sc-yblltq-5"})({marginLeft:"1rem"}),I=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-yblltq-6"})({display:"flex",alignItems:"center"}),q=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-yblltq-7"})({marginRight:"0.5rem"}),D=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-yblltq-8"})({display:"flex",alignItems:"center",justifyContent:"flex-start",overflow:"hidden"}),R=(0,l.ZP)(d.Vp).withConfig({displayName:"cmp___StyledTag",componentId:"sc-yblltq-9"})({marginRight:"1rem",whiteSpace:"nowrap"}),B=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-yblltq-10"})({flex:"1 1 auto"}),k=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv7",componentId:"sc-yblltq-11"})({marginTop:"1.25rem",marginBottom:"1.25rem",display:"flex"}),M=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv8",componentId:"sc-yblltq-12"})({marginRight:"1.25rem"}),T=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv9",componentId:"sc-yblltq-13"})({marginRight:"1.25rem"}),E=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv10",componentId:"sc-yblltq-14"})({marginRight:"1.25rem"}),A=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv11",componentId:"sc-yblltq-15"})({marginRight:"1.25rem"}),F=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv12",componentId:"sc-yblltq-16"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),L=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv13",componentId:"sc-yblltq-17"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),H=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv14",componentId:"sc-yblltq-18"})({display:"flex",alignItems:"flex-end"}),O=(0,l.ZP)("span").withConfig({displayName:"cmp___StyledSpan",componentId:"sc-yblltq-19"})({marginRight:"0.25rem"}),U=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv15",componentId:"sc-yblltq-20"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),G=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv16",componentId:"sc-yblltq-21"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),z=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv17",componentId:"sc-yblltq-22"})({marginTop:"1.25rem",marginBottom:"1.25rem",display:"flex"}),K=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv18",componentId:"sc-yblltq-23"})({marginRight:"1.25rem"}),J=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv19",componentId:"sc-yblltq-24"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),W=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv20",componentId:"sc-yblltq-25"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),X=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv21",componentId:"sc-yblltq-26"})({marginTop:"5rem",textAlign:"center"})}},function(e){e.O(0,[213,774,888,179],function(){return e(e.s=68798)}),_N_E=e.O()}]);