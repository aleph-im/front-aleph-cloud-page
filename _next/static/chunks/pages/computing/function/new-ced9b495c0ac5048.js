(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[630],{53831:function(e,r,d){(window.__NEXT_P=window.__NEXT_P||[]).push(["/computing/function/new",function(){return d(20684)}])},87699:function(e,r,d){"use strict";d.d(r,{Z:function(){return u}});var s=d(85893),l=d(19521),c=d(67294),m=d(79632);let p=(0,l.ZP)(m.zx).attrs(e=>({...e,forwardedAs:"a",kind:"default",variant:"textOnly",color:"main0",size:"md"})).withConfig({displayName:"styles__StyledExternalLinkButton",componentId:"sc-1fpmkx0-0"})([""]),ExternalLinkButton=e=>{let{children:r,href:d,...l}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(h,{href:d,target:"_blank",...l,children:[r||d,(0,s.jsx)(m.JO,{name:"square-up-right"})]})})};ExternalLinkButton.displayName="ExternalLinkButton";var u=(0,c.memo)(ExternalLinkButton),h=(0,l.ZP)(p).withConfig({displayName:"cmp___StyledStyledExternalLinkButton",componentId:"sc-7jgrdd-0"})({display:"inline-flex",alignItems:"center",gap:"0.625rem"})},20684:function(e,r,d){"use strict";d.r(r),d.d(r,{default:function(){return NewFunctionPage}});var s=d(85893),l=d(19521),c=d(79632),m=d(9911),p=d(67294),u=d(55032),h=d(48900),f=d(11163),g=d(18090),y=d(24959),x=d(33223),_=d(19643),j=d(87536),v=d(13017);let w='from fastapi import FastAPI\n\napp = FastAPI()\n@app.get("/")\nasync def root():\n  return {"message": "Hello World"}\n',P={lang:v.D.Python,type:"file",entrypoint:"main:app"};var b=d(56312),N=d(37419),C=d(86780),k=d(9324),S=d(50586),Z=d(29206),B=d(28565),I=d(68805),T=d(50219),D=d(34865),A=d(20782),E=d(52464),L=d(93963),F=d(87699),q=d(21836);let O=p.memo(e=>{let{langCtrl:r,typeCtrl:d,textCtrl:l,fileCtrl:m,entryPointCtrl:p,radioDirection:u}=function(e){let{name:r="code",control:d,defaultValue:s}=e,l=(0,j.bc)({control:d,name:"".concat(r,".lang"),defaultValue:null==s?void 0:s.lang}),m=(0,j.bc)({control:d,name:"".concat(r,".entrypoint"),defaultValue:null==s?void 0:s.entrypoint}),p=(0,j.bc)({control:d,name:"".concat(r,".type"),defaultValue:null==s?void 0:s.type}),u=(0,j.bc)({control:d,name:"".concat(r,".file"),defaultValue:null==s?void 0:s.file}),h=(0,j.bc)({control:d,name:"".concat(r,".text"),defaultValue:(null==s?void 0:s.text)||w}),f=(0,c._K)("sm");return{langCtrl:l,typeCtrl:p,fileCtrl:u,textCtrl:h,entryPointCtrl:m,radioDirection:f?"column":"row"}}(e);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(R,{children:(0,s.jsx)(c.mQ,{selected:d.field.value,align:"left",tabs:[{id:"file",name:"Upload code"},{id:"text",name:"Write code"}],onTabChange:d.field.onChange})}),(0,s.jsxs)("div",{role:"tabpanel",children:["text"===d.field.value?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(U,{children:"To get started you can start adding your code in the window below."}),(0,s.jsx)(V,{children:(0,s.jsxs)(c.Jy,{children:[(0,s.jsxs)(z,{...r.field,...r.fieldState,required:!0,direction:u,children:[(0,s.jsx)(c.Y8,{label:"Python 3.9",value:v.D.Python}),(0,s.jsx)(c.Y8,{label:"Node.js 18",value:v.D.Node}),(0,s.jsx)(c.Y8,{label:"Other",value:v.D.Other})]}),(0,s.jsx)(M,{...l.field,...l.fieldState,required:!0,defaultValue:w,defaultLanguage:r.field.value,language:r.field.value})]})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Y,{children:"To get started, compress your code into a zip or squashfs (.sqsh) file and upload it here."}),(0,s.jsxs)(c.Jy,{children:[(0,s.jsx)(W,{children:(0,s.jsxs)(c.Ee,{...r.field,...r.fieldState,required:!0,label:"Language",direction:u,children:[(0,s.jsx)(c.Y8,{label:"Python 3.9",value:v.D.Python}),(0,s.jsx)(c.Y8,{label:"Node.js 18",value:v.D.Node}),(0,s.jsx)(c.Y8,{label:"Other",value:v.D.Other})]})}),(0,s.jsxs)(J,{children:[(0,s.jsx)(q.Z,{plain:!0,my:"top-left",at:"top-right",vAlign:"top",tooltipContent:(0,s.jsxs)("div",{className:"text-left tp-body1 fs-18",children:[(0,s.jsx)(X,{children:"The entry point is the name of the script or file used to invoke your function. It's essentially the 'doorway' to your code."}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:"Examples:"}),(0,s.jsxs)(G,{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Python:"})," If you have a function named 'app' in a file called 'main.py', your entry point would be main:app"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Node.js:"})," If your primary file is 'index.js', then your entry point is simply index.js"]})]})]}),(0,s.jsx)(H,{children:"Different languages and frameworks may have unique conventions. Always refer to your language's documentation or the specific framework's guidance to determine the appropriate entry point for your code."})]}),children:(0,s.jsx)(c.lX,{label:"Define an entry point",required:!0})}),(0,s.jsx)(c.oi,{...p.field,...p.fieldState,required:!0,placeholder:"main:app, index.js, ..."})]}),(0,s.jsx)("div",{children:(0,s.jsx)(c.S2,{...m.field,...m.fieldState,required:!0,label:"Upload your code",accept:".zip,.sqsh"})})]})]}),(0,s.jsx)(K,{children:(0,s.jsx)(F.Z,{href:"https://docs.aleph.im/tools/webconsole/",children:"Learn more"})})]})]})});O.displayName="AddFunctionCode";var R=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1lgkru6-0"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"0.75rem",paddingTop:"1.5rem"}),U=(0,l.ZP)("p").withConfig({displayName:"cmp___StyledP",componentId:"sc-1lgkru6-1"})({marginBottom:"1.5rem"}),V=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-1lgkru6-2"})({marginBottom:"1.5rem"}),z=(0,l.ZP)(c.Ee).withConfig({displayName:"cmp___StyledRadioGroup",componentId:"sc-1lgkru6-3"})({marginBottom:"1.5rem"}),M=(0,l.ZP)(c.pq).withConfig({displayName:"cmp___StyledCodeEditor",componentId:"sc-1lgkru6-4"})({minHeight:"415px",borderRadius:"1.5rem",padding:"1.25rem"}),Y=(0,l.ZP)("p").withConfig({displayName:"cmp___StyledP2",componentId:"sc-1lgkru6-5"})({marginBottom:"1.5rem"}),W=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-1lgkru6-6"})({marginBottom:"2.5rem"}),J=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-1lgkru6-7"})({marginBottom:"2.5rem"}),X=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-1lgkru6-8"})({marginBottom:"2.5rem"}),G=(0,l.ZP)("ul").withConfig({displayName:"cmp___StyledUl",componentId:"sc-1lgkru6-9"})({listStyleType:"disc",paddingLeft:"1.5rem"}),H=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-1lgkru6-10"})({marginTop:"2.5rem"}),K=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv7",componentId:"sc-1lgkru6-11"})({marginTop:"1.5rem",textAlign:"right"});let Q=p.memo(e=>{let{isPersistentValue:r,isPersistentHandleChange:d,isPersistentCtrl:l}=function(e){let{name:r="isPersistent",control:d,defaultValue:s}=e,l=(0,j.bc)({control:d,name:r,defaultValue:s}),c=(0,p.useCallback)(e=>{let r="true"===e.target.value;l.field.onChange(r)},[l.field]),m=(0,p.useMemo)(()=>l.field.value+"",[l.field]);return{isPersistentCtrl:l,isPersistentValue:m,isPersistentHandleChange:c}}(e);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Jy,{children:(0,s.jsxs)(c.Ee,{...l.field,...l.fieldState,value:r,onChange:d,required:!0,direction:"row",children:[(0,s.jsx)(c.Y8,{label:"Persistent",value:"true"}),(0,s.jsx)(c.Y8,{label:"On-demand",value:"false"})]})}),(0,s.jsx)($,{children:(0,s.jsx)(F.Z,{href:"https://docs.aleph.im/computing/#persistent-execution",children:"Learn more"})})]})});Q.displayName="SelectFunctionPersistence";var $=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1tb2omg-0"})({marginTop:"1.5rem",textAlign:"right"}),ee=d(85661),en=d(49107),et=d(75650),ei=d(24607);let eo=p.memo(e=>{let{runtimeCtrl:r}=function(e){let{name:r="runtime",control:d,defaultValue:s}=e,l=(0,j.bc)({control:d,name:r,defaultValue:s,shouldUnregister:!0});return{runtimeCtrl:l}}(e);return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(er,{className:"bg-base1",children:[(0,s.jsx)(c.oi,{...r.field,...r.fieldState,label:"Runtime hash",placeholder:"f6872f58fd38cbc123e9e036861a858...079ff2c123e9e08c123e9e0368fa68e"}),(0,s.jsx)(ea,{children:(0,s.jsx)(F.Z,{href:"https://docs.aleph.im/computing/runtimes",children:"Learn more"})})]})})});eo.displayName="SelectCustomFunctionRuntime";var er=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-ivefrj-0"})({padding:"1.5rem"}),ea=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-ivefrj-1"})({marginTop:"1.5rem",textAlign:"right"}),ed=d(82690),es=d(49531),el=d(93788);function NewFunctionPage(e){let{mainRef:r}=e,{address:d,accountBalance:l,isCreateButtonDisabled:v,values:w,control:F,errors:q,cost:R,handleSubmit:U,handleBack:V}=function(){let e=(0,f.useRouter)(),[r,d]=(0,u.mr)(),{account:s,balance:l=0}=r.connection,c=(0,x.k)(),{next:v,stop:w}=(0,C.A)(),I=(0,p.useCallback)(async r=>{if(!c)throw S.Z.ConnectYourWallet;let s=await c.getAddSteps(r),l=s.map(e=>C.n[e]),m=c.addSteps(r);try{let r;for(;!r;){let{value:e,done:d}=await m.next();if(d){r=e;break}await v(l)}d(new k.Wy({name:"program",entities:r})),await e.replace("/")}finally{await w()}},[d,c,v,e,w]),{defaultTiers:T}=(0,Z.g)({type:m.py.Program}),D=(0,p.useMemo)(()=>({...g.y,code:{...P},specs:T[0],isPersistent:!1,paymentMethod:m.XL.Hold}),[T]),{control:A,handleSubmit:E,formState:{errors:L},setValue:F}=(0,y.c)({defaultValues:D,onSubmit:I,resolver:(0,b.F)(_.L.addSchema)}),q=(0,j.qo)({control:A}),O=(0,p.useMemo)(()=>({entityType:m.py.Program,props:{name:q.name||"MOCK",specs:q.specs,isPersistent:q.isPersistent,volumes:q.volumes,domains:q.domains,paymentMethod:q.paymentMethod,code:q.code}}),[q]),R=(0,N.F)(O),{isCreateButtonDisabled:U}=(0,B.U)({cost:R,accountBalance:l});return(0,h.s)({formPaymentMethod:q.paymentMethod,setValue:F}),{address:(null==s?void 0:s.address)||"",accountBalance:l,isCreateButtonDisabled:U,values:q,control:A,errors:L,cost:R,handleSubmit:E,handleBack:()=>{e.push(".")}}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(el.Z,{handleBack:V}),(0,s.jsxs)(et.Z,{onSubmit:U,errors:q,children:[(0,s.jsx)(ec,{children:(0,s.jsx)(L.Z,{children:(0,s.jsx)(ed.Z,{selected:"function"})})}),(0,s.jsx)(em,{children:(0,s.jsxs)(L.Z,{children:[(0,s.jsx)(es.N,{number:"1",children:"Code to execute"}),(0,s.jsx)("p",{children:"If your code has any dependencies, you can upload them separately in the volume section below to ensure a faster creation."}),(0,s.jsx)(O,{name:"code",control:F})]})}),(0,s.jsx)(ep,{children:(0,s.jsxs)(L.Z,{children:[(0,s.jsx)(es.N,{number:"2",children:"Type of scheduling"}),(0,s.jsx)(eu,{children:"Configure if this program should be running continuously, persistent, or only on-demand in response to a user request or an event."}),(0,s.jsx)(Q,{name:"isPersistent",control:F})]})}),(0,s.jsx)(eh,{children:(0,s.jsxs)(L.Z,{children:[(0,s.jsx)(es.N,{number:"3",children:"Select an instance size"}),(0,s.jsx)(ef,{children:"Select the hardware resources allocated to your functions, ensuring optimal performance and efficient resource usage tailored to your specific needs."}),(0,s.jsx)(T.Z,{name:"specs",control:F,type:m.py.Program,isPersistent:w.isPersistent})]})}),(0,s.jsx)(eg,{children:(0,s.jsxs)(L.Z,{children:[(0,s.jsx)(es.N,{number:"4",children:"Name and tags"}),(0,s.jsx)(ey,{children:"Organize and identify your functions more effectively by assigning a unique name, obtaining a hash reference, and defining multiple tags. This helps streamline your development process and makes it easier to manage your web3 functions."}),(0,s.jsx)(E.Z,{control:F,entityType:m.py.Program})]})}),(0,s.jsx)(ex,{children:(0,s.jsxs)(L.Z,{children:[(0,s.jsx)(es.N,{number:"5",children:"Advanced Configuration Options"}),(0,s.jsx)(e_,{children:"Customize your function with our Advanced Configuration Options. Add volumes and custom domains to meet your specific needs."}),(0,s.jsxs)(ej,{children:[(0,s.jsx)(ev,{children:(0,s.jsx)(ei.Z,{label:"Use Custom Runtime",children:(0,s.jsx)(eo,{name:"runtime",control:F})})}),(0,s.jsx)(ew,{children:(0,s.jsxs)(ei.Z,{label:"Add Volume",children:[(0,s.jsx)(c.DU,{forwardedAs:"h2",type:"h6",color:"main0",children:"Add volumes"}),w.specs&&(0,s.jsxs)(eP,{$color:"main2",className:"tp-body1",children:["Good news! Your selected package already includes"," ",(0,s.jsx)("span",{className:"text-main0",children:(0,en.Fx)(w.specs.storage,{from:"MiB",to:"GiB",displayUnit:!0})})," ","of storage at no additional cost. Feel free to add it here."]}),(0,s.jsx)(D.Z,{name:"volumes",control:F})]})}),(0,s.jsx)(eb,{children:(0,s.jsxs)(ei.Z,{label:"Add Custom Domain",children:[(0,s.jsx)(c.DU,{forwardedAs:"h2",type:"h6",color:"main0",children:"Custom domain"}),(0,s.jsx)(eN,{children:"Configure an user-friendly domain name for your web3 function, providing a more accessible and professional way for users to interact with your application."}),(0,s.jsx)(A.Z,{name:"domains",control:F,entityType:m.sY.Program})]})})]})]})}),(0,s.jsx)(I.Z,{control:F,address:d,cost:R,unlockedAmount:l,paymentMethod:w.paymentMethod,mainRef:r,description:(0,s.jsx)(s.Fragment,{children:"This amount needs to be present in your wallet until the function is removed. Tokens won't be locked nor consumed. The function will be garbage collected once funds are removed from the wallet."}),button:(0,s.jsx)(c.zx,{type:"submit",color:"main0",kind:"default",size:"lg",variant:"primary",disabled:v,onClick:U,children:"Create function"})})]})]})}var ec=(0,l.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-5neuko-0"})({paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",paddingBottom:"0px","@media (min-width: 48rem)":{paddingTop:"2rem",paddingBottom:"2rem"}}),em=(0,l.ZP)("section").withConfig({displayName:"cmp___StyledSection2",componentId:"sc-5neuko-1"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),ep=(0,l.ZP)("section").withConfig({displayName:"cmp___StyledSection3",componentId:"sc-5neuko-2"})({paddingLeft:"0px",paddingRight:"0px",paddingTop:"1.5rem",paddingBottom:"1.5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),eu=(0,l.ZP)("p").withConfig({displayName:"cmp___StyledP",componentId:"sc-5neuko-3"})({marginBottom:"1.5rem"}),eh=(0,l.ZP)("section").withConfig({displayName:"cmp___StyledSection4",componentId:"sc-5neuko-4"})({paddingLeft:"0px",paddingRight:"0px",paddingTop:"1.5rem",paddingBottom:"1.5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),ef=(0,l.ZP)("p").withConfig({displayName:"cmp___StyledP2",componentId:"sc-5neuko-5"})({marginBottom:"1.5rem"}),eg=(0,l.ZP)("section").withConfig({displayName:"cmp___StyledSection5",componentId:"sc-5neuko-6"})({paddingLeft:"0px",paddingRight:"0px",paddingTop:"1.5rem",paddingBottom:"1.5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),ey=(0,l.ZP)("p").withConfig({displayName:"cmp___StyledP3",componentId:"sc-5neuko-7"})({marginBottom:"1.5rem"}),ex=(0,l.ZP)("section").withConfig({displayName:"cmp___StyledSection6",componentId:"sc-5neuko-8"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),e_=(0,l.ZP)("p").withConfig({displayName:"cmp___StyledP4",componentId:"sc-5neuko-9"})({marginBottom:"1.5rem"}),ej=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-5neuko-10"})({marginTop:"1.5rem",marginBottom:"1.5rem",paddingLeft:"0px",paddingRight:"0px"}),ev=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-5neuko-11"})({marginBottom:"1rem"}),ew=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-5neuko-12"})({marginBottom:"1rem"}),eP=(0,l.ZP)(ee.Z).withConfig({displayName:"cmp___StyledBorderBox",componentId:"sc-5neuko-13"})({marginTop:"1rem",marginBottom:"1rem"}),eb=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-5neuko-14"})({marginBottom:"1rem"}),eN=(0,l.ZP)("p").withConfig({displayName:"cmp___StyledP5",componentId:"sc-5neuko-15"})({marginBottom:"1.5rem"})},56312:function(e,r,d){"use strict";d.d(r,{F:function(){return zod_t}});var s=d(87536),t=function(e,r,d){if(e&&"reportValidity"in e){var l=(0,s.U2)(d,r);e.setCustomValidity(l&&l.message||""),e.reportValidity()}},resolvers_i=function(e,r){var i=function(d){var s=r.fields[d];s&&s.ref&&"reportValidity"in s.ref?t(s.ref,d,e):s.refs&&s.refs.forEach(function(r){return t(r,d,e)})};for(var d in r.fields)i(d)},n=function(e,r){r.shouldUseNativeValidation&&resolvers_i(e,r);var d={};for(var l in e){var c=(0,s.U2)(r.fields,l),m=Object.assign(e[l]||{},{ref:c&&c.ref});if(a(r.names||Object.keys(e),l)){var p=Object.assign({},o((0,s.U2)(d,l)));(0,s.t8)(p,"root",m),(0,s.t8)(d,l,p)}else(0,s.t8)(d,l,m)}return d},o=function(e){return Array.isArray(e)?e.filter(Boolean):[]},a=function(e,r){return e.some(function(e){return e.startsWith(r+".")})},zod_n=function(e,r){for(var d={};e.length;){var l=e[0],c=l.code,m=l.message,p=l.path.join(".");if(!d[p]){if("unionErrors"in l){var u=l.unionErrors[0].errors[0];d[p]={message:u.message,type:u.code}}else d[p]={message:m,type:c}}if("unionErrors"in l&&l.unionErrors.forEach(function(r){return r.errors.forEach(function(r){return e.push(r)})}),r){var h=d[p].types,f=h&&h[l.code];d[p]=(0,s.KN)(p,r,d,c,f?[].concat(f,l.message):l.message)}e.shift()}return d},zod_t=function(e,r,d){return void 0===d&&(d={}),function(s,l,c){try{return Promise.resolve(function(l,m){try{var p=Promise.resolve(e["sync"===d.mode?"parse":"parseAsync"](s,r)).then(function(e){return c.shouldUseNativeValidation&&resolvers_i({},c),{errors:{},values:d.raw?s:e}})}catch(e){return m(e)}return p&&p.then?p.then(void 0,m):p}(0,function(e){if(null!=e.errors)return{values:{},errors:n(zod_n(e.errors,!c.shouldUseNativeValidation&&"all"===c.criteriaMode),c)};throw e}))}catch(e){return Promise.reject(e)}}}}},function(e){e.O(0,[536,893,727,747,532,774,888,179],function(){return e(e.s=53831)}),_N_E=e.O()}]);