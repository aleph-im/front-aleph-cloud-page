(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[143],{13190:function(e,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/computing/instance/[hash]",function(){return n(86871)}])},99978:function(e,i,n){"use strict";n.d(i,{U:function(){return useInstanceManager}});var t=n(55640);function useInstanceManager(){let[e]=(0,t.mr)(),{instanceManager:i}=e.manager;return i}},18395:function(e,i,n){"use strict";n.d(i,{p:function(){return useSSHKeyManager}});var t=n(55640);function useSSHKeyManager(){let[e]=(0,t.mr)(),{sshKeyManager:i}=e.manager;return i}},96370:function(e,i,n){"use strict";n.d(i,{u:function(){return useRequestInstances}});var t=n(68607),s=n(99978),a=n(36949),r=n(55640);function useRequestInstances(){let{id:e,triggerDeps:i=[],triggerOnMount:n=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[l]=(0,r.mr)(),{account:c}=l.connection;i=[c,...i];let d=(0,s.U)(),{data:o,request:m}=(0,t.M)({name:"instance",doRequest:async()=>{if(!d)return[];if(!e)return d.getAll();{let i=await d.get(e);return i?[i]:[]}},onSuccess:()=>null,flushData:!e,triggerOnMount:n,triggerDeps:i});return(0,a.C)({entities:o,request:m,triggerOnMount:n}),{entities:o}}},86871:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return ManageInstance}});var t=n(85893),s=n(19521),a=n(34517),r=n(76696),l=n(79632),c=n(9911),d=n(11163),o=n(67294),m=n(69368),p=n(73107),h=n(99978),f=n(55640),x=n(18395),g=n(45520),u=n(59658),v=n(18735),_=n(76175),y=n(96370),j=n(9324),N=n(86780),w=n(50586),C=n(83474),S=n(49107),I=n(70150),Z=n(5598),q=n(11505),P=n(41664),D=n.n(P);function ManageInstance(){var e;let{instance:i,status:n,handleCopyHash:P,handleCopyConnect:es,handleCopyIpv6:ea,handleDelete:er,copyAndNotify:el,mappedKeys:ec}=function(){let[e,i]=(0,f.mr)(),{account:n,blockchain:t}=e.connection,{handleConnect:s}=(0,u.R)({triggerOnMount:!1}),a=(0,d.useRouter)(),{hash:r}=a.query,{entities:l}=(0,y.u)({id:r}),[c]=l||[],[S,I]=(0,o.useState)([]),[,Z]=(0,m.vx)(),q=function(e){let[i,n]=(0,o.useState)(void 0),t=(0,h.U)();return(0,o.useEffect)(()=>{if(!t||!e||i)return;async function request(){if(!t||!e)return;let i=await t.checkStatus(e);n(i)}i||request();let s=setInterval(request,1e4);return()=>clearInterval(s)},[i,e,t]),i}(c),P=(0,h.U)(),D=(0,x.p)(),{next:k,stop:b}=(0,N.A)({});(0,o.useEffect)(()=>{if(!c||!D)return;let getMapped=async()=>{let e=await (null==D?void 0:D.getByValues(c.authorized_keys||[]));I(e)};getMapped()},[D,c]);let R=(0,p.j)(c),E=(0,o.useCallback)(()=>{Z("ssh root@".concat(null==q?void 0:q.vm_ipv6))},[Z,q]),B=(0,o.useCallback)(()=>{Z((null==q?void 0:q.vm_ipv6)||"")},[Z,q]),M=(0,o.useCallback)(async()=>{if(!P)throw w.Z.ConnectYourWallet;if(!c)throw w.Z.InstanceNotFound;try{var e;let r;if((null===(e=c.payment)||void 0===e?void 0:e.type)===v.uG.superfluid){if(t!==C.Ek.AVAX||!(n instanceof _.Bp))throw s({blockchain:C.Ek.AVAX}),w.Z.ConnectYourPaymentWallet;r=(0,g.vG)(n),await r.init()}else t!==C.Ek.ETH&&s({blockchain:C.Ek.ETH});let l=await P.getDelSteps(c),d=l.map(e=>N.n[e]),o=P.delSteps(c,r);for(;;){let{done:e}=await o.next();if(e)break;await k(d)}i(new j.gg({name:"instance",keys:[c.id]})),await a.replace("/")}catch(e){}finally{await b()}},[P,c,t,n,i,a,s,k,b]);return{instance:c,status:q,handleCopyHash:R,handleCopyConnect:E,handleCopyIpv6:B,handleDelete:M,copyAndNotify:Z,mappedKeys:S}}(),ed=(0,s.Fg)();if(!i)return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(I.W2,{children:(0,t.jsx)(k,{children:"Loading..."})})});let eo=(null==i?void 0:null===(e=i.metadata)||void 0===e?void 0:e.name)||(0,S.zN)(i.id),em=c.K_[i.type],ep=i.volumes;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(b,{children:(0,t.jsxs)(I.W2,{children:[(0,t.jsxs)(R,{children:[(0,t.jsxs)(E,{children:[(0,t.jsx)(B,{name:"alien-8bit",className:"text-main0"}),(0,t.jsx)("div",{className:"tp-body2",children:eo}),(0,t.jsx)(M,{kind:"secondary",variant:i.time<Date.now()-45e3&&(null==n?void 0:n.vm_ipv6)?"success":"warning",children:(null==n?void 0:n.vm_ipv6)?"READY":(0,t.jsxs)(T,{children:[(0,t.jsx)(A,{children:"CONFIRMING"}),(0,t.jsx)(q.s5,{strokeColor:ed.color.base2,width:".8rem"})]})})]}),(0,t.jsx)("div",{children:(0,t.jsx)(l.zx,{kind:"functional",variant:"warning",size:"md",onClick:er,children:"Delete"})})]}),(0,t.jsxs)(l.Jy,{children:[(0,t.jsxs)(U,{children:[(0,t.jsx)(F,{variant:"accent",children:em}),(0,t.jsxs)(H,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"ITEM HASH"}),(0,t.jsx)(r.Z,{iconName:"copy",onClick:P,children:i.id})]})]}),(0,t.jsx)(I.Z0,{}),(0,t.jsxs)(O,{children:[(0,t.jsxs)(L,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"CORES"}),(0,t.jsx)("div",{children:(0,t.jsxs)(I.xv,{children:[i.resources.vcpus," x86 64bit"]})})]}),(0,t.jsxs)(z,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"RAM"}),(0,t.jsx)("div",{children:(0,t.jsx)(I.xv,{children:(0,S.Fx)(i.resources.memory,{from:"MiB",to:"GiB",displayUnit:!0})})})]}),(0,t.jsxs)(G,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"HDD"}),(0,t.jsx)("div",{children:(0,t.jsx)(I.xv,{children:(0,S.Fx)(i.size,{from:"MiB",to:"GiB",displayUnit:!0})})})]})]}),(0,t.jsxs)(X,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"EXPLORER"}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"tp-body1 fs-16",href:i.url,target:"_blank",referrerPolicy:"no-referrer",children:(0,t.jsx)(r.Z,{iconName:"square-up-right",children:(0,t.jsx)(I.xv,{children:(0,S.bs)(i.url,80)})})})})]}),(0,t.jsx)(I.Z0,{}),(0,t.jsxs)(K,{children:[(0,t.jsx)(l.DU,{type:"h7",as:"h2",color:"main0",children:"Connection methods"}),(0,t.jsxs)(V,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"SSH COMMAND"}),(0,t.jsx)("div",{children:n?(0,t.jsx)(r.Z,{iconName:"copy",onClick:es,children:(0,t.jsxs)(I.xv,{children:[">_ ssh root@",n.vm_ipv6]})}):(0,t.jsxs)(W,{children:[(0,t.jsx)(Y,{className:"tp-body1 fs-16 text-main2",children:"Allocating"}),(0,t.jsx)(q.g4,{width:".8rem",height:"1rem",color:ed.color.main2})]})})]}),(0,t.jsxs)(J,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"IPv6"}),(0,t.jsx)("div",{children:n&&(0,t.jsx)(r.Z,{iconName:"copy",onClick:ea,children:(0,t.jsx)(I.xv,{children:n.vm_ipv6})})})]})]}),(0,t.jsxs)(Q,{children:[(0,t.jsx)(l.DU,{type:"h7",as:"h2",color:"main0",children:"Accessible for"}),(0,t.jsx)($,{children:ec.map((e,i)=>e&&(0,t.jsxs)(ee,{children:[(0,t.jsxs)("div",{className:"tp-info text-main0",children:["SSH KEY #",i+1]}),(0,t.jsx)(D(),{className:"tp-body1 fs-16",href:"?hash="+e.id,referrerPolicy:"no-referrer",children:(0,t.jsx)(r.Z,{iconName:"square-up-right",children:(0,t.jsx)(I.xv,{children:e.label})})})]},null==e?void 0:e.id))})]}),(null==n?void 0:n.node)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.Z0,{}),(0,t.jsx)(l.DU,{type:"h7",as:"h2",color:"main0",children:"Current CRN"}),(0,t.jsxs)(ei,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"NAME"}),(0,t.jsx)("div",{children:(0,t.jsx)(I.xv,{children:n.node.node_id})})]}),(0,t.jsxs)(en,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"URL"}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"tp-body1 fs-16",href:n.node.url,target:"_blank",referrerPolicy:"no-referrer",children:(0,t.jsx)(r.Z,{iconName:"square-up-right",children:(0,t.jsx)(I.xv,{children:(0,S.bs)(n.node.url,80)})})})})]})]}),ep.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.Z0,{}),(0,t.jsx)(l.DU,{type:"h7",as:"h2",color:"main0",children:"Linked Storage(s)"}),(0,t.jsx)(Z.Z,{volumes:ep,copyAndNotify:el})]})]}),(0,t.jsx)(et,{children:(0,t.jsx)(a.Z,{variant:"primary",href:"/computing/instance/new",children:"Create new instance"})})]})})})}var k=(0,s.ZP)(l.Jy).withConfig({displayName:"cmp___StyledNoisyContainer",componentId:"sc-104qfl5-0"})({marginTop:"1rem",marginBottom:"1rem"}),b=(0,s.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-104qfl5-1"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),R=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-104qfl5-2"})({display:"flex",justifyContent:"space-between",paddingBottom:"1.25rem"}),E=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-104qfl5-3"})({display:"flex",alignItems:"center"}),B=(0,s.ZP)(l.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-104qfl5-4"})({marginRight:"1rem"}),M=(0,s.ZP)(l.__).withConfig({displayName:"cmp___StyledLabel",componentId:"sc-104qfl5-5"})({marginLeft:"1rem"}),T=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-104qfl5-6"})({display:"flex",alignItems:"center"}),A=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-104qfl5-7"})({marginRight:"0.5rem"}),U=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-104qfl5-8"})({display:"flex",alignItems:"center",justifyContent:"flex-start",overflow:"hidden"}),F=(0,s.ZP)(l.Vp).withConfig({displayName:"cmp___StyledTag",componentId:"sc-104qfl5-9"})({marginRight:"1rem",whiteSpace:"nowrap"}),H=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-104qfl5-10"})({flex:"1 1 auto"}),O=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv7",componentId:"sc-104qfl5-11"})({marginTop:"1.25rem",marginBottom:"1.25rem",display:"flex"}),L=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv8",componentId:"sc-104qfl5-12"})({marginRight:"1.25rem"}),z=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv9",componentId:"sc-104qfl5-13"})({marginRight:"1.25rem"}),G=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv10",componentId:"sc-104qfl5-14"})({marginRight:"1.25rem"}),X=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv11",componentId:"sc-104qfl5-15"})({marginRight:"1.25rem"}),K=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv12",componentId:"sc-104qfl5-16"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),V=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv13",componentId:"sc-104qfl5-17"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),W=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv14",componentId:"sc-104qfl5-18"})({display:"flex",alignItems:"flex-end"}),Y=(0,s.ZP)("span").withConfig({displayName:"cmp___StyledSpan",componentId:"sc-104qfl5-19"})({marginRight:"0.25rem"}),J=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv15",componentId:"sc-104qfl5-20"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),Q=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv16",componentId:"sc-104qfl5-21"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),$=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv17",componentId:"sc-104qfl5-22"})({marginTop:"1.25rem",marginBottom:"1.25rem",display:"flex"}),ee=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv18",componentId:"sc-104qfl5-23"})({marginRight:"1.25rem"}),ei=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv19",componentId:"sc-104qfl5-24"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),en=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv20",componentId:"sc-104qfl5-25"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),et=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv21",componentId:"sc-104qfl5-26"})({marginTop:"5rem",textAlign:"center"})}},function(e){e.O(0,[667,774,888,179],function(){return e(e.s=13190)}),_N_E=e.O()}]);