(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[143],{13190:function(e,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/computing/instance/[hash]",function(){return n(11988)}])},4450:function(e,i,n){"use strict";n.d(i,{Z:function(){return LogsFeed}});var t=n(85893),s=n(19521),r=n(79632),a=n(70150),d=n(45866);function LogsFeed(e){let{logs:i}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.DU,{type:"h7",as:"h2",color:"main0",children:"Stdout"}),(0,t.jsxs)(l,{children:[(0,t.jsx)(d.Z,{show:!(null==i?void 0:i.stdout),color:"white"}),(0,t.jsx)(o,{readOnly:!0,name:"stdout",placeholder:"Loading logs...",value:null==i?void 0:i.stdout,variant:"code"})]}),(0,t.jsx)(a.Z0,{}),(0,t.jsx)(r.DU,{type:"h7",as:"h2",color:"main0",children:"Stderr"}),(0,t.jsxs)(c,{children:[(0,t.jsx)(d.Z,{show:!(null==i?void 0:i.stderr),color:"white"}),(0,t.jsx)(m,{readOnly:!0,name:"stderr",placeholder:"Loading logs...",value:null==i?void 0:i.stderr,variant:"code"})]})]})}var l=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-fvcqgm-0"})({position:"relative"}),o=(0,s.ZP)(r.Kx).withConfig({displayName:"cmp___StyledTextArea",componentId:"sc-fvcqgm-1"})({height:"30rem"}),c=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-fvcqgm-2"})({position:"relative"}),m=(0,s.ZP)(r.Kx).withConfig({displayName:"cmp___StyledTextArea2",componentId:"sc-fvcqgm-3"})({height:"30rem"})},65426:function(e,i,n){"use strict";n.d(i,{Z:function(){return useFetchTermsAndConditions}});var t=n(55032),s=n(67294);function useFetchTermsAndConditions(e){let{termsAndConditionsMessageHash:i}=e,[n]=(0,t.mr)(),{manager:{messageManager:r}}=n,[a,d]=(0,s.useState)(!0),[l,o]=(0,s.useState)();return(0,s.useEffect)(()=>{let fetchTermsAndConditions=async()=>{try{var e;let n;if(!r||!i)return o(void 0);d(!0);try{let{content:e}=await r.get(i);n=e}catch(e){console.error(e)}if(!n)return o(void 0);let t=n.item_hash,s=null===(e=n.metadata)||void 0===e?void 0:e.name;o({cid:t,name:s,url:"https://ipfs.aleph.im/ipfs/".concat(t,"?filename=").concat(s)})}catch(e){console.error(e)}finally{d(!1)}};fetchTermsAndConditions()},[r,i]),{loading:a,termsAndConditions:l}}},18395:function(e,i,n){"use strict";n.d(i,{p:function(){return useSSHKeyManager}});var t=n(55032);function useSSHKeyManager(){let[e]=(0,t.mr)(),{sshKeyManager:i}=e.manager;return i}},96370:function(e,i,n){"use strict";n.d(i,{u:function(){return useRequestInstances}});var t=n(99978),s=n(77205);function useRequestInstances(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,t.U)();return(0,s.F)({...e,manager:i,name:"instance"})}},11988:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return ManageInstance}});var t=n(85893),s=n(19521),r=n(41664),a=n.n(r),d=n(11505),l=n(34517),o=n(76696),c=n(79632),m=n(9911),h=n(11163),p=n(67294),x=n(99978),f=n(18395),g=n(96370),v=n(55304),j=n(65426),u=n(49107),y=n(70150),_=n(5598),N=n(93788),C=n(4450);function ManageInstance(){var e;let{instance:i,termsAndConditions:n,status:r,mappedKeys:Y,nodeDetails:Q,isRunning:$,stopDisabled:ee,startDisabled:ei,rebootDisabled:en,logs:et,tabs:es,tabId:er,theme:ea,handleStop:ed,handleStart:el,handleReboot:eo,handleCopyHash:ec,handleCopyConnect:em,handleCopyIpv6:eh,handleDelete:ep,handleBack:ex,setTabId:ef}=function(){var e,i;let n=(0,h.useRouter)(),{hash:t}=n.query,{entities:r}=(0,g.u)({ids:t}),[a]=r||[],d=(0,x.U)(),l=(0,s.Fg)(),[o,m]=(0,p.useState)("detail"),u=(0,v.y)({executable:a,manager:d,subscribeLogs:"log"===o}),{logsDisabled:y,status:_}=u,{termsAndConditions:N}=(0,j.Z)({termsAndConditionsMessageHash:null==a?void 0:null===(i=a.requirements)||void 0===i?void 0:null===(e=i.node)||void 0===e?void 0:e.terms_and_conditions}),C=(0,p.useMemo)(()=>[{id:"detail",name:"Details"},{id:"log",name:"Logs",disabled:y}],[y]),[w,Z]=(0,p.useState)([]),S=(0,c.vx)((null==a?void 0:a.id)||""),I=(0,c.vx)((null==_?void 0:_.ipv6Parsed)||""),P=(0,c.vx)("ssh root@".concat(null==_?void 0:_.ipv6Parsed)),q=(0,f.p)();return(0,p.useEffect)(()=>{if(!a||!q)return;let getMapped=async()=>{let e=await (null==q?void 0:q.getByValues(a.authorized_keys||[]));Z(e)};getMapped()},[q,a]),{...u,instance:a,termsAndConditions:N,mappedKeys:w,theme:l,tabs:C,tabId:o,setTabId:m,handleCopyHash:S,handleCopyConnect:P,handleCopyIpv6:I,handleBack:()=>{n.push(".")}}}();if(!i)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Z,{handleBack:ex}),(0,t.jsx)(y.W2,{children:(0,t.jsx)(w,{children:"Loading..."})})]});let eg=(null==i?void 0:null===(e=i.metadata)||void 0===e?void 0:e.name)||(0,u.zN)(i.id),ev=m.K_[i.type],ej=i.volumes;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Z,{handleBack:ex}),(0,t.jsx)(Z,{children:(0,t.jsxs)(y.W2,{children:[(0,t.jsxs)(S,{children:[(0,t.jsxs)(I,{children:[(0,t.jsx)(P,{name:"alien-8bit",className:"text-main0"}),(0,t.jsx)("div",{className:"tp-body2",children:eg}),(0,t.jsx)(q,{kind:"secondary",variant:i.time<Date.now()-45e3&&$?"success":"warning",children:$?"READY":(0,t.jsxs)(D,{children:[(0,t.jsx)(b,{children:"CONFIRMING"}),(0,t.jsx)(d.s5,{strokeColor:ea.color.base2,width:".8rem"})]})})]}),(0,t.jsxs)(T,{children:[(0,t.jsx)(c.u,{content:"Stop Instance",my:"bottom-center",at:"top-center",children:(0,t.jsx)(c.zx,{variant:"secondary",size:"md",onClick:ed,disabled:ee,children:(0,t.jsx)(c.JO,{name:"stop"})})}),(0,t.jsx)(c.u,{content:"Reallocate Instance",my:"bottom-center",at:"top-center",children:(0,t.jsx)(c.zx,{variant:"secondary",size:"md",onClick:el,disabled:ei,children:(0,t.jsx)(c.JO,{name:"play"})})}),(0,t.jsx)(c.u,{content:"Reboot Instance",my:"bottom-center",at:"top-center",children:(0,t.jsx)(c.zx,{variant:"secondary",size:"md",onClick:eo,disabled:en,children:(0,t.jsx)(c.JO,{name:"arrow-rotate-backward"})})}),(0,t.jsx)(c.zx,{kind:"functional",variant:"error",size:"md",onClick:ep,children:(0,t.jsx)(c.JO,{name:"trash"})})]})]}),(0,t.jsxs)(c.Jy,{children:[(0,t.jsxs)(k,{children:[(0,t.jsx)(B,{variant:"accent",children:ev}),(0,t.jsxs)(R,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"ITEM HASH"}),(0,t.jsx)(o.Z,{iconName:"copy",onClick:ec,children:i.id})]})]}),(0,t.jsx)(y.Z0,{}),(0,t.jsxs)(F,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"CORES"}),(0,t.jsx)("div",{children:(0,t.jsxs)(y.xv,{children:[i.resources.vcpus," x86 64bit"]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"RAM"}),(0,t.jsx)("div",{children:(0,t.jsx)(y.xv,{children:(0,u.Fx)(i.resources.memory,{from:"MiB",to:"GiB",displayUnit:!0})})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"HDD"}),(0,t.jsx)("div",{children:(0,t.jsx)(y.xv,{children:(0,u.Fx)(i.size,{from:"MiB",to:"GiB",displayUnit:!0})})})]})]}),(0,t.jsxs)(A,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"EXPLORER"}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"tp-body1 fs-16",href:i.url,target:"_blank",referrerPolicy:"no-referrer",children:(0,t.jsx)(o.Z,{iconName:"square-up-right",children:(0,t.jsx)(y.xv,{children:(0,u.bs)(i.url,80)})})})})]}),(0,t.jsx)(y.Z0,{}),(0,t.jsx)(c.mQ,{selected:er,align:"left",onTabChange:ef,tabs:es}),(0,t.jsx)(E,{role:"tabpanel",children:"detail"===er?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(M,{children:[(0,t.jsx)(c.DU,{type:"h7",as:"h2",color:"main0",children:"Connection methods"}),(0,t.jsxs)(L,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"SSH COMMAND"}),(0,t.jsx)("div",{children:r?(0,t.jsx)(o.Z,{iconName:"copy",onClick:em,children:(0,t.jsxs)(y.xv,{children:[">_ ssh root@",r.ipv6Parsed]})}):(0,t.jsxs)(O,{children:[(0,t.jsx)(U,{className:"tp-body1 fs-16 text-main2",children:"Allocating"}),(0,t.jsx)(d.g4,{width:".8rem",height:"1rem",color:ea.color.main2})]})})]}),(0,t.jsxs)(z,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"IPv6"}),(0,t.jsx)("div",{children:r&&(0,t.jsx)(o.Z,{iconName:"copy",onClick:eh,children:(0,t.jsx)(y.xv,{children:r.ipv6Parsed})})})]})]}),(0,t.jsxs)(H,{children:[(0,t.jsx)(c.DU,{type:"h7",as:"h2",color:"main0",children:"Accessible for"}),(0,t.jsx)(J,{children:Y.map((e,i)=>e&&(0,t.jsxs)(K,{children:[(0,t.jsxs)("div",{className:"tp-info text-main0",children:["SSH KEY #",i+1]}),(0,t.jsx)(a(),{className:"tp-body1 fs-16",href:"?hash="+e.id,referrerPolicy:"no-referrer",children:(0,t.jsx)(o.Z,{iconName:"square-up-right",children:(0,t.jsx)(y.xv,{children:e.label})})})]},null==e?void 0:e.id))})]}),Q&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Z0,{}),(0,t.jsx)(c.DU,{type:"h7",as:"h2",color:"main0",children:"Current CRN"}),(0,t.jsxs)(W,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"NAME"}),(0,t.jsx)("div",{children:(0,t.jsx)(y.xv,{children:Q.name})})]}),(0,t.jsxs)(G,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"URL"}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"tp-body1 fs-16",href:Q.url,target:"_blank",referrerPolicy:"no-referrer",children:(0,t.jsx)(o.Z,{iconName:"square-up-right",children:(0,t.jsx)(y.xv,{children:(0,u.bs)(Q.url,80)})})})})]})]}),ej.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Z0,{}),(0,t.jsx)(c.DU,{type:"h7",as:"h2",color:"main0",children:"Linked Storage(s)"}),(0,t.jsx)(_.Z,{volumes:ej})]}),void 0!==n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Z0,{}),(0,t.jsx)(c.DU,{type:"h7",as:"h2",color:"main0",children:"Terms & Conditions"}),(0,t.jsxs)(X,{children:[(0,t.jsx)("div",{className:"tp-info text-main0",children:"ACCEPTED T&C"}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"tp-body1 fs-16",href:n.url,target:"_blank",referrerPolicy:"no-referrer",children:(0,t.jsx)(o.Z,{iconName:"square-up-right",children:(0,t.jsx)(y.xv,{children:n.name})})})})]})]})]}):"log"===er?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(C.Z,{logs:et})}):(0,t.jsx)(t.Fragment,{})})]}),(0,t.jsx)(V,{children:(0,t.jsx)(l.Z,{variant:"primary",href:"/computing/instance/new",children:"Create new instance"})})]})})]})}var w=(0,s.ZP)(c.Jy).withConfig({displayName:"cmp___StyledNoisyContainer",componentId:"sc-104qfl5-0"})({marginTop:"1rem",marginBottom:"1rem"}),Z=(0,s.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-104qfl5-1"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),S=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-104qfl5-2"})({display:"flex",flexDirection:"column",flexWrap:"wrap",justifyContent:"space-between",gap:"1rem",paddingBottom:"1.25rem","@media (min-width: 48rem)":{flexDirection:"row"}}),I=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-104qfl5-3"})({display:"flex",alignItems:"center"}),P=(0,s.ZP)(c.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-104qfl5-4"})({marginRight:"1rem"}),q=(0,s.ZP)(c.__).withConfig({displayName:"cmp___StyledLabel",componentId:"sc-104qfl5-5"})({marginLeft:"1rem"}),D=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-104qfl5-6"})({display:"flex",alignItems:"center"}),b=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-104qfl5-7"})({marginRight:"0.5rem"}),T=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-104qfl5-8"})({display:"flex",gap:"1rem"}),k=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-104qfl5-9"})({display:"flex",alignItems:"center",justifyContent:"flex-start",overflow:"hidden"}),B=(0,s.ZP)(c.Vp).withConfig({displayName:"cmp___StyledTag",componentId:"sc-104qfl5-10"})({marginRight:"1rem",whiteSpace:"nowrap"}),R=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv7",componentId:"sc-104qfl5-11"})({flex:"1 1 auto"}),F=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv8",componentId:"sc-104qfl5-12"})({marginTop:"1.25rem",marginBottom:"1.25rem",display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:"1.25rem"}),A=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv9",componentId:"sc-104qfl5-13"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),E=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv10",componentId:"sc-104qfl5-14"})({marginTop:"1.5rem"}),M=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv11",componentId:"sc-104qfl5-15"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),L=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv12",componentId:"sc-104qfl5-16"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),O=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv13",componentId:"sc-104qfl5-17"})({display:"flex",alignItems:"flex-end"}),U=(0,s.ZP)("span").withConfig({displayName:"cmp___StyledSpan",componentId:"sc-104qfl5-18"})({marginRight:"0.25rem"}),z=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv14",componentId:"sc-104qfl5-19"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),H=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv15",componentId:"sc-104qfl5-20"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),J=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv16",componentId:"sc-104qfl5-21"})({marginTop:"1.25rem",marginBottom:"1.25rem",display:"flex"}),K=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv17",componentId:"sc-104qfl5-22"})({marginRight:"1.25rem"}),W=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv18",componentId:"sc-104qfl5-23"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),G=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv19",componentId:"sc-104qfl5-24"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),X=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv20",componentId:"sc-104qfl5-25"})({marginTop:"1.25rem",marginBottom:"1.25rem"}),V=(0,s.ZP)("div").withConfig({displayName:"cmp___StyledDiv21",componentId:"sc-104qfl5-26"})({marginTop:"5rem",textAlign:"center"})}},function(e){e.O(0,[118,774,888,179],function(){return e(e.s=13190)}),_N_E=e.O()}]);