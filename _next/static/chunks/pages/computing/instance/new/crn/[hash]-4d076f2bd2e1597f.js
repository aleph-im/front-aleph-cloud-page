(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{96212:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/computing/instance/new/crn/[hash]",function(){return t(18271)}])},34517:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var i=t(85893),a=t(67294),o=t(41664),s=t.n(o),r=t(79632);let ButtonLink=e=>{let{href:n,variant:t="secondary",color:a="main0",kind:o="default",size:d="md",disabled:m,children:c,...l}=e,p=(0,i.jsx)(r.zx,{as:m?void 0:"a",variant:t,color:a,kind:o,size:d,disabled:m,...l,children:c});return m?p:(0,i.jsx)(s(),{href:n,passHref:!0,legacyBehavior:!0,children:p})};ButtonLink.displayName="ButtonLink";var d=(0,a.memo)(ButtonLink)},39674:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var i=t(85893),a=t(19521),o=t(67294),s=t(20665);let r=(0,a.ZP)(s.Z).attrs(e=>({borderType:"solid",rowNoise:!0,stickyHeader:!1,...e})).withConfig({displayName:"styles__StyledTable",componentId:"sc-edtxuy-0"})(["thead th{font-size:0.8125rem;","}td,th{padding:0.75rem 1rem;width:0;}tr,td{border:none;}"],{whiteSpace:"nowrap"}),NodesTable=e=>{let{children:n,...t}=e;return(0,i.jsx)(m,{children:(0,i.jsx)(r,{...t,children:n})})};NodesTable.displayName="NodesTable";var d=(0,o.memo)(NodesTable),m=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-c0xaff-0"})({maxWidth:"100%",overflowX:"auto"})},60539:function(e,n,t){"use strict";t.d(n,{O:function(){return useRequestCRNSpecs}});var i=t(67294),a=t(93787);function useRequestCRNSpecs(e){let{nodes:n}=e,t=(0,a.z)(),[o,s]=(0,i.useState)({}),[r,d]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{(async function(){n&&(await Promise.allSettled(n.filter(e=>!t.isStreamPaymentNotSupported(e)).map(async e=>{if(o[e.hash])return;s(n=>({...n,[e.hash]:{loading:!0,data:void 0,error:void 0}}));let n=await t.getCRNspecs(e);s(t=>({...t,[e.hash]:{data:n,loading:!1,error:void 0}}))})),d(!1))})()},[t,n,o]),{specs:o,loading:r}}},90104:function(e,n,t){"use strict";t.d(n,{k:function(){return useRequestCRNs}});var i=t(79632),a=t(93787);function useRequestCRNs(e){let{triggerDeps:n}=e,t=(0,a.z)(),{data:o}=(0,i.GO)({doRequest:()=>t.getCRNNodes(),onSuccess:()=>null,flushData:!1,triggerOnMount:!0,triggerDeps:n}),{data:s}=(0,i.GO)({doRequest:()=>t.getLatestCRNVersion(),onSuccess:()=>null,onError:()=>null,flushData:!1,triggerOnMount:!0});return{nodes:o,lastVersion:s}}},18271:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return NewInstancePage}});var i=t(85893),a=t(19521),o=t(25675),s=t.n(o),r=t(79632),d=t(47465),m=t(78265),c=t(34865),l=t(4304),p=t(48998),u=t(20782),h=t(52464),y=t(31626),g=t(9911),f=t(93963),w=t(55640),x=t(67294),v=t(11163),_=t(73603),S=t(45520),j=t(24959),N=t(18090),b=t(31776),C=t(70007),Z=t(99978),I=t(72933),P=t(87536),T=t(56312),B=t(37419),R=t(90104),k=t(60539),A=t(13450),D=t(86780),E=t(93787),M=t(9324),L=t(59658),z=t(76175);let O={...(0,C.Fk)(!0,g.XL.Stream)[0]},V={...N.y,image:b.iJ,specs:O,systemVolumeSize:O.storage,paymentMethod:g.XL.Stream,streamDuration:A.xe,streamCost:Number.POSITIVE_INFINITY};var X=t(75650),q=t(12155),G=t(82690),F=t(39674),Y=t(34517),H=t(45866),J=t(49531);function NewInstancePage(e){let{mainRef:n}=e,{address:t,accountBalance:a,isCreateButtonDisabled:o,values:N,control:b,errors:A,node:O,nodeSpecs:ey,lastVersion:eg,handleSubmit:ef}=function(){let e=(0,v.useRouter)(),[n,t]=(0,w.mr)(),{blockchain:i,account:a,balance:o=0}=n.connection,{handleConnect:s}=(0,L.R)({triggerOnMount:!1}),{hash:r}=e.query,{nodes:d,lastVersion:m}=(0,R.k)({}),c=(0,x.useMemo)(()=>{if(d)return d.find(e=>e.hash===r)},[d,r]),l=(0,x.useMemo)(()=>{if(c)return[c]},[c]),{specs:p}=(0,k.O)({nodes:l}),u=(0,x.useMemo)(()=>{var e;if(c&&p)return null===(e=p[c.hash])||void 0===e?void 0:e.data},[p,c]),h=(0,x.useMemo)(()=>{let[e]=(0,C.Fk)(!0);return e},[]),y=(0,E.z)();(0,x.useEffect)(()=>{if(!u)return;let n=y.validateMinNodeSpecs(h,u);n||e.replace(".")},[y,h,u,e]);let f=(0,Z.U)(),{next:N,stop:b}=(0,D.A)({}),A=(0,x.useCallback)(async n=>{var o;if(!f)throw Error("Manager not ready");if(!a)throw Error("Invalid account");if(!c||!c.stream_reward)throw Error("Invalid node");if(!(null==n?void 0:n.streamCost))throw Error("Invalid stream cost");if((null===(o=window)||void 0===o?void 0:o.ethereum)===void 0)throw Error("No wallet found");if(i!==_.$O.AVAX||!(a instanceof z.Bp))throw s({blockchain:_.$O.AVAX}),Error("Invalid network");let r=(0,S.vG)(a),d=await f.getSteps(n),m=d.map(e=>D.n[e]),l=f.addSteps({...n,payment:{chain:_.$O.AVAX,type:g.XL.Stream,sender:a.address,receiver:c.stream_reward,streamCost:n.streamCost,streamDuration:n.streamDuration},node:c},r);try{let n;for(;!n;){let{value:e,done:t}=await l.next();if(t){n=e;break}await N(m)}t(new M.Wy({name:"instance",entities:n})),await e.replace("/")}finally{await b()}},[f,a,c,i,s,t,e,N,b]),{control:O,handleSubmit:X,formState:{errors:q},setValue:G}=(0,j.c)({defaultValues:V,onSubmit:A,resolver:(0,T.F)(I.u.addStreamSchema),readyDeps:[]}),F=(0,P.qo)({control:O}),{storage:Y}=F.specs,{systemVolumeSize:H}=F;(0,x.useEffect)(()=>{Y&&H!==Y&&G("systemVolumeSize",Y)},[Y,G,H]),(0,x.useEffect)(()=>{G("nodeSpecs",u)},[u,G]);let{cost:J}=(0,B.F)({entityType:g.py.Instance,props:{specs:F.specs,volumes:F.volumes,paymentMethod:F.paymentMethod,streamDuration:F.streamDuration}});(0,x.useEffect)(()=>{J&&F.streamCost!==J.totalStreamCost&&G("streamCost",J.totalStreamCost)},[J,G,F]);let U=o>((null==J?void 0:J.totalCost)||Number.MAX_SAFE_INTEGER);return{address:(null==a?void 0:a.address)||"",accountBalance:o,isCreateButtonDisabled:!U,values:F,control:O,errors:q,node:c,lastVersion:m,nodeSpecs:u,handleSubmit:X}}(),ew=(0,x.useMemo)(()=>[{label:"NAME",render:e=>(0,i.jsx)(r.tJ,{hash:e.hash,name:e.name,picture:e.picture,ImageCmp:s(),apiServer:g.pf})},{label:"SCORE",render:e=>(0,i.jsx)(r.WG,{score:e.score})},{label:"VERSION",render:e=>{var n;return(0,i.jsx)(r.pJ,{version:(null===(n=e.metricsData)||void 0===n?void 0:n.version)||"",lastVersion:eg})}},{label:"",align:"right",render:()=>(0,i.jsx)(U,{children:(0,i.jsx)(Y.Z,{kind:"functional",size:"md",variant:"warning",href:".",children:"Change"})})}],[eg]);return(0,i.jsxs)(X.Z,{onSubmit:ef,errors:A,children:[(0,i.jsx)(W,{children:(0,i.jsx)(f.Z,{children:(0,i.jsx)(G.Z,{selected:"instance"})})}),(0,i.jsx)($,{children:(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(J.N,{number:"1",children:"Selected instance"}),(0,i.jsx)(K,{children:(0,i.jsxs)(r.Jy,{children:[(0,i.jsx)(H.Z,{show:!O}),(0,i.jsx)(F.Z,{columns:ew,data:O?[O]:[],rowProps:()=>({className:"_active"})})]})})]})}),(0,i.jsx)(Q,{children:(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(J.N,{number:"2",children:"Select an instance size"}),(0,i.jsx)("p",{children:"Please select one of the available instance size as a base for your VM. You will be able to customize the volumes later."}),(0,i.jsxs)(ee,{children:[(0,i.jsx)(H.Z,{show:!ey}),(0,i.jsx)(m.Z,{name:"specs",control:b,type:g.py.Instance,isPersistent:!0,paymentMethod:N.paymentMethod,nodeSpecs:ey})]})]})}),(0,i.jsx)(en,{children:(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(J.N,{number:"3",children:"Choose an image"}),(0,i.jsx)("p",{children:"Chose a base image for your VM. It’s the base system that you will be able to customize."}),(0,i.jsx)(et,{children:(0,i.jsx)(d.Z,{name:"image",control:b})})]})}),(0,i.jsx)(ei,{children:(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(J.N,{number:"4",children:"Configure SSH Key"}),(0,i.jsx)("p",{children:"Access your cloud instances securely. Give existing key’s below access to this instance or add new keys. Remember, storing private keys safely is crucial for security. If you need help, our support team is always ready to assist."}),(0,i.jsx)(ea,{children:(0,i.jsx)(p.Z,{name:"sshKeys",control:b})})]})}),(0,i.jsx)(eo,{children:(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(J.N,{number:"5",children:"Name and tags"}),(0,i.jsx)(es,{children:"Organize and identify your instances more effectively by assigning a unique name, obtaining a hash reference, and defining multiple tags. This helps streamline your development process and makes it easier to manage your web3 instances."}),(0,i.jsx)(h.Z,{control:b,entityType:g.py.Instance})]})}),(0,i.jsx)(er,{children:(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(J.N,{number:"6",children:"Advanced Configuration Options"}),(0,i.jsx)(ed,{children:"Customize your instance with our Advanced Configuration Options. Add volumes, SSH keys, environment variables, and custom domains to meet your specific needs."}),(0,i.jsxs)(em,{children:[(0,i.jsx)(ec,{children:(0,i.jsxs)(q.Z,{label:"Add Volume",children:[(0,i.jsx)(r.DU,{forwardedAs:"h2",type:"h6",color:"main0",children:"Add volumes"}),(0,i.jsx)(c.Z,{name:"volumes",control:b,systemVolumeSize:N.systemVolumeSize})]})}),(0,i.jsx)(el,{children:(0,i.jsxs)(q.Z,{label:"Add Environmental Variables",children:[(0,i.jsx)(r.DU,{forwardedAs:"h2",type:"h6",color:"main0",children:"Add environment variables"}),(0,i.jsx)(ep,{children:"Define key-value pairs that act as configuration settings for your web3 instance. Environment variables offer a convenient way to store information, manage configurations, and modify your application's behaviour without altering the source code."}),(0,i.jsx)(l.Z,{name:"envVars",control:b})]})}),(0,i.jsx)(eu,{children:(0,i.jsxs)(q.Z,{label:"Add Custom Domain",children:[(0,i.jsx)(r.DU,{forwardedAs:"h2",type:"h6",color:"main0",children:"Custom domain"}),(0,i.jsx)(eh,{children:"You have the ability to configure a domain name to access your cloud instances. By setting up a user-friendly custom domain, accessing your instances becomes easier and more intuitive. It&s another way we&re making web3 cloud management as straightforward as possible."}),(0,i.jsx)(u.Z,{name:"domains",control:b,entityType:g.py.Instance})]})})]})]})}),(0,i.jsx)(y.Z,{control:b,address:t,type:g.py.Instance,isPersistent:!0,specs:N.specs,volumes:N.volumes,domains:N.domains,receiverAddress:null==O?void 0:O.reward,unlockedAmount:a,paymentMethod:N.paymentMethod,streamDuration:N.streamDuration,mainRef:n,description:(0,i.jsx)(i.Fragment,{children:"You can either leverage the traditional method of holding tokens in your wallet for resource access, or opt for the Pay-As-You-Go (PAYG) system, which allows you to pay precisely for what you use, for the duration you need. The PAYG option includes a token stream feature, enabling real-time payment for resources as you use them."}),button:(0,i.jsx)(r.zx,{type:"submit",color:"main0",kind:"default",size:"lg",variant:"primary",disabled:o,onClick:ef,children:"Create instance"})})]})}var U=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1y7s4wn-0"})({display:"flex",justifyContent:"flex-end",gap:"0.75rem"}),W=(0,a.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-1y7s4wn-1"})({paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",paddingBottom:"0px","@media (min-width: 48rem)":{paddingTop:"2rem",paddingBottom:"2rem"}}),$=(0,a.ZP)("section").withConfig({displayName:"cmp___StyledSection2",componentId:"sc-1y7s4wn-2"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),K=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-1y7s4wn-3"})({position:"relative",marginBottom:"1.5rem",marginTop:"3rem",minHeight:"6rem",paddingLeft:"0px",paddingRight:"0px"}),Q=(0,a.ZP)("section").withConfig({displayName:"cmp___StyledSection3",componentId:"sc-1y7s4wn-4"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),ee=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-1y7s4wn-5"})({position:"relative",marginTop:"1.5rem",marginBottom:"1.5rem",paddingLeft:"0px",paddingRight:"0px"}),en=(0,a.ZP)("section").withConfig({displayName:"cmp___StyledSection4",componentId:"sc-1y7s4wn-6"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),et=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-1y7s4wn-7"})({marginBottom:"1.5rem",marginTop:"3rem",paddingLeft:"0px",paddingRight:"0px"}),ei=(0,a.ZP)("section").withConfig({displayName:"cmp___StyledSection5",componentId:"sc-1y7s4wn-8"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),ea=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-1y7s4wn-9"})({marginTop:"1.5rem",marginBottom:"1.5rem",paddingLeft:"0px",paddingRight:"0px"}),eo=(0,a.ZP)("section").withConfig({displayName:"cmp___StyledSection6",componentId:"sc-1y7s4wn-10"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),es=(0,a.ZP)("p").withConfig({displayName:"cmp___StyledP",componentId:"sc-1y7s4wn-11"})({marginBottom:"1.5rem"}),er=(0,a.ZP)("section").withConfig({displayName:"cmp___StyledSection7",componentId:"sc-1y7s4wn-12"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),ed=(0,a.ZP)("p").withConfig({displayName:"cmp___StyledP2",componentId:"sc-1y7s4wn-13"})({marginBottom:"1.5rem"}),em=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-1y7s4wn-14"})({marginTop:"1.5rem",marginBottom:"1.5rem",paddingLeft:"0px",paddingRight:"0px"}),ec=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv7",componentId:"sc-1y7s4wn-15"})({marginBottom:"1rem"}),el=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv8",componentId:"sc-1y7s4wn-16"})({marginBottom:"1rem"}),ep=(0,a.ZP)("p").withConfig({displayName:"cmp___StyledP3",componentId:"sc-1y7s4wn-17"})({marginBottom:"1.5rem"}),eu=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv9",componentId:"sc-1y7s4wn-18"})({marginBottom:"1rem"}),eh=(0,a.ZP)("p").withConfig({displayName:"cmp___StyledP4",componentId:"sc-1y7s4wn-19"})({marginBottom:"1.5rem"})}},function(e){e.O(0,[675,834,122,730,774,888,179],function(){return e(e.s=96212)}),_N_E=e.O()}]);