(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{93494:function(e,r,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/earn/crn/new",function(){return o(78803)}])},34517:function(e,r,o){"use strict";o.d(r,{Z:function(){return m}});var a=o(85893),d=o(67294),l=o(41664),c=o.n(l),u=o(31515);let ButtonLink=e=>{let{href:r,variant:o="secondary",color:d="main0",kind:l="default",size:m="md",disabled:p,children:f,...h}=e,g=(0,a.jsx)(u.zx,{as:p?void 0:"a",variant:o,color:d,kind:l,size:m,disabled:p,...h,children:f});return p?g:(0,a.jsx)(c(),{href:r,passHref:!0,legacyBehavior:!0,children:g})};ButtonLink.displayName="ButtonLink";var m=(0,d.memo)(ButtonLink)},72882:function(e,r,o){"use strict";o.d(r,{ZP:function(){return f}});var a=o(85893),d=o(67294),l=o(31515),c=o(43251),u=o(57833);let m=(0,u.ZP)(l.JO).attrs(e=>{let{buttonSize:r}=e;return{size:(()=>{switch(r){case"xs":return"xs";case"sm":return"sm";case"lg":return"md-lg";case"xl":return"lg";default:return"md"}})()}}).withConfig({displayName:"styles__InfoIcon",componentId:"sc-15zds0b-0"})(["opacity:0.8;"]),p=(0,d.forwardRef)((e,r)=>{let{tooltipContent:o,tooltipPosition:u,children:p,disabled:f,size:h,...g}=e,[v,x]=(0,d.useState)(!1);(0,d.useEffect)(()=>{x(!0)},[]);let y=(0,d.useRef)(null),w=r||y;return(0,a.jsxs)("div",{className:"inline-flex relative",children:[(0,a.jsx)(l.zx,{ref:w,disabled:f,size:h,...g,children:(0,a.jsxs)(a.Fragment,{children:[p,f&&o&&(0,a.jsx)(m,{name:"info-circle",buttonSize:h})]})}),v&&f&&o&&(0,a.jsx)(c.Z,{my:(null==u?void 0:u.my)||"bottom-center",at:(null==u?void 0:u.at)||"top-center",targetRef:w,content:o})]})});p.displayName="ButtonWithInfoTooltip";var f=p},99983:function(e,r,o){"use strict";o.d(r,{F:function(){return c}});var a=o(57833);let d={xl:90,lg:60.0625,md:44.6875},l=a.ZP.div.withConfig({displayName:"styles__StyledContainer",componentId:"sc-1bpjbi2-0"})(["",""],e=>{let{$variant:r="lg"}=e;return(0,a.iv)([""," max-width:","rem;"],{marginLeft:"auto",marginRight:"auto",width:"100%",paddingLeft:"1.5rem",paddingRight:"1.5rem","@media (min-width: 62rem)":{paddingLeft:"4rem",paddingRight:"4rem"}},d[r])});var c=l},87699:function(e,r,o){"use strict";o.d(r,{Z:function(){return m}});var a=o(85893),d=o(57833),l=o(67294),c=o(31515);let u=(0,d.ZP)(c.zx).attrs(e=>({...e,forwardedAs:"a",kind:"default",variant:"textOnly",color:"main0"})).withConfig({displayName:"styles__StyledExternalLinkButton",componentId:"sc-1fpmkx0-0"})([""]),ExternalLinkButton=e=>{let{children:r,href:o,size:d="md",forwardedAs:l,...c}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(u,{href:o,size:d,...c,target:"_blank",children:[r||o,(0,a.jsx)(p,{name:"square-up-right"})]})})};ExternalLinkButton.displayName="ExternalLinkButton";var m=(0,l.memo)(ExternalLinkButton),p=(0,d.ZP)(c.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-7jgrdd-0"})({marginLeft:"0.625rem"})},43251:function(e,r,o){"use strict";o.d(r,{Z:function(){return u}});var a=o(85893),d=o(57833),l=o(67294),c=o(31515);let ResponsiveTooltip=e=>{let{forwardedAs:r,as:o,...d}=e,l=(0,c._K)("md");return(0,a.jsx)(m,{...d,$_css:l?{position:"fixed !important",left:"0px !important",top:"0px !important",zIndex:"20 !important",margin:"1.5rem",height:"calc(100% - 3rem) !important",width:"calc(100% - 3rem) !important",maxWidth:"100% !important",transform:"none !important"}:""})};ResponsiveTooltip.displayName="ResponsiveTooltip";var u=(0,l.memo)(ResponsiveTooltip),m=(0,d.ZP)(c.u).withConfig({displayName:"cmp___StyledTooltip",componentId:"sc-vdmo8c-0"})(["",""],e=>e.$_css)},75650:function(e,r,o){"use strict";o.d(r,{l:function(){return cmp},Z:function(){return cmp}});var a=o(85893),d=o(57833);let l=d.ZP.form.withConfig({displayName:"styles__StyledForm",componentId:"sc-faebcb-0"})(["",""],{display:"flex",flex:"1 1 0%",flexDirection:"column"});var c=o(31515),u=o(99983),cmp=e=>{let{children:r,onSubmit:o,errors:d,id:c}=e;return(0,a.jsxs)(l,{id:c,onSubmit:o,noValidate:!0,children:[r,(null==d?void 0:d.root)&&(0,a.jsx)(u.F,{children:Object.values(d.root).map(e=>(0,a.jsx)(m,{error:e},e+""))})]})},m=(0,d.ZP)(c.Xq).withConfig({displayName:"cmp___StyledFormError",componentId:"sc-tai6p3-0"})({wordBreak:"break-all"})},81990:function(e,r,o){"use strict";o.d(r,{P:function(){return unsupportedNetworkDisabledMessage}});var a=o(85893);function unsupportedNetworkDisabledMessage(e){return function(e){let{title:r,description:o}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"tp-body3 fs-18 text-base2",children:r}),(0,a.jsx)("p",{className:"tp-body1 fs-14 text-base2",children:o})]})}({title:"Ethereum network required",description:(0,a.jsxs)(a.Fragment,{children:[e," doesn't support this action. Please switch to the"," ",(0,a.jsx)("strong",{children:"Ethereum"})," chain using the dropdown at the top of the page."]})})}o(67294)},37940:function(e,r,o){"use strict";o.d(r,{Y:function(){return useEthereumNetwork}});var a=o(67294),d=o(9754),l=o(72077),c=o(81990);function useEthereumNetwork(){let[e]=(0,d.mr)(),{blockchain:r}=e.connection,o=(0,a.useMemo)(()=>r===l.Ek.ETH,[r]),u=(0,a.useMemo)(()=>{var e;return r?null===(e=l.DR[r])||void 0===e?void 0:e.name:"Current network"},[r]),m=(0,a.useMemo)(()=>()=>o?void 0:(0,c.P)(u),[o,u]);return{isEthereumNetwork:o,blockchainName:u,getEthereumNetworkTooltip:m}}},24959:function(e,r,o){"use strict";o.d(r,{c:function(){return useForm}});var a=o(31515),d=o(67294),l=o(87536),c=o(79711),u=o(50586);function useForm(e){let{onSubmit:r,onSuccess:o,onError:m,readyDeps:p=[],...f}=e,h=(0,l.cI)(f);(0,d.useEffect)(()=>{"object"==typeof f.defaultValues&&h.reset(f.defaultValues)},[...p]);let[g,v]=(0,d.useState)({data:void 0,error:void 0,loading:!1}),[x,{onLoad:y,onSuccess:w,onError:j}]=(0,a.g7)({flushData:!0,state:g,setState:v,onSuccess:o,onError:m}),N=(0,d.useCallback)(async e=>{try{y();let o=await r(e);w(o)}catch(r){let e=r instanceof c.jm?u.Z.ValidationError:(null==r?void 0:r.cause)||r;h.setError("root.serverError",{...e,message:null==e?void 0:e.message}),j(e)}},[h,j,y,r,w]),b=(0,d.useCallback)(async e=>{let r;if(console.log(e),!r){let o=function getFirstError(e){let[r]=Object.entries(e);if(!r)return;let[o,a]=r;if(Array.isArray(a)){let e=a[a.length-1];return getFirstError(e)}return[o,a]}(e);if(o){let[e,a]=o,d="string"==typeof a?a:(null==a?void 0:a.message)?": ".concat(a.message):(null==a?void 0:a.type)?': "'.concat(null==a?void 0:a.type,'" validation not satisfied'):"";r=u.Z.FieldError(e,d)}}r||(r=u.Z.ValidationError),j(r)},[j]),_=(0,d.useMemo)(()=>h.handleSubmit(N,b),[h,N,b]);return{...h,requestState:x,handleSubmit:_}}},78803:function(e,r,o){"use strict";o.r(r),o.d(r,{default:function(){return V}});var a=o(85893),d=o(57833),l=o(67294),c=o(9008),u=o.n(c),m=o(75650),p=o(31515),f=o(72882),h=o(9754),g=o(11163),v=o(24959),x=o(87536),y=o(56312),w=o(68885),j=o(9324),N=o(37940),b=o(93787);let _={name:"",address:""};var E=o(87699),k=o(34517),P=o(99983);let NewComputeResourceNodePage=()=>{let{nameCtrl:e,addressCtrl:r,errors:o,handleSubmit:d,isEthereumNetwork:c,getEthereumNetworkTooltip:m}=function(){let e=(0,g.useRouter)(),[r,o]=(0,h.mr)(),{connection:{account:a}}=r,d=(0,b.z)(),{isEthereumNetwork:c,getEthereumNetworkTooltip:u}=(0,N.Y)(),m=(0,p.lm)(),f=(0,l.useCallback)(async e=>{if(!d)throw Error("Manager not ready");if(!a)throw Error("Invalid account");let r=await d.newComputeResourceNode(e),o=function(e,r,o){let a={hash:r,owner:o,manager:o,reward:o,locked:!1,authorized:[],parent:null,time:Date.now(),status:"waiting",score:0,score_updated:!1,decentralization:0,performance:0,type:"compute",...e,virtual:Date.now()};return a}(e,r,a.address);return o},[a,d]),E=(0,l.useCallback)(async r=>{if(!m)throw Error("Notification not ready");m.add({variant:"success",title:"Success",text:'Your node "'.concat(r.hash,'" was created successfully.')}),o(new j.Wy({name:"crns",entities:[r]})),e.replace("/account/earn/crn/".concat(r.hash))},[o,m,e]),{control:k,handleSubmit:P,formState:{errors:C}}=(0,v.c)({defaultValues:_,onSubmit:f,onSuccess:E,resolver:(0,y.F)(w.B.newCRNSchema)}),Z=(0,x.qo)({control:k}),R=(0,x.bc)({control:k,name:"name"}),S=(0,x.bc)({control:k,name:"address"});return{values:Z,control:k,nameCtrl:R,addressCtrl:S,errors:C,isEthereumNetwork:c,getEthereumNetworkTooltip:u,handleSubmit:P}}();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u(),{children:[(0,a.jsx)("title",{children:"Account | CreateCRN | Aleph Cloud"}),(0,a.jsx)("meta",{name:"description",content:"Aleph Cloud Create Compute Resource Node"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,a.jsx)(P.F,{$variant:"xl",children:(0,a.jsxs)("section",{children:[(0,a.jsx)(Z,{type:"h5",forwardedAs:"h1",children:"Create compute resource node"}),(0,a.jsxs)(R,{onSubmit:d,errors:o,children:[(0,a.jsxs)(S,{children:[(0,a.jsx)(p.NP,{as:"h2",number:"1",color:"main0",children:"Set a name"}),(0,a.jsx)(B,{children:"Your node name should be short and meaningful."}),(0,a.jsxs)(p.Jy,{children:[(0,a.jsx)(p.oi,{...e.field,...e.fieldState,required:!0,label:"Node name",placeholder:"Give it a name"}),(0,a.jsx)(F,{children:"You can change this later if you want, even add a picture and description."})]})]}),(0,a.jsxs)(I,{children:[(0,a.jsx)(p.NP,{as:"h2",number:"2",color:"main0",children:"Set address"}),(0,a.jsx)(T,{children:"The physical node has a unique identifier address. It links the wallet and interface to the physical node. This address is mandatory to proceed and the install procedure below will explain how to retrieve this address."}),(0,a.jsxs)(p.Jy,{children:[(0,a.jsx)(p.oi,{...r.field,...r.fieldState,required:!0,label:"Set address",placeholder:"https://my-domain.tld/"}),(0,a.jsx)(z,{children:(0,a.jsx)(E.Z,{href:"https://docs.aleph.cloud/nodes/compute/installation/ubuntu-24.04/",children:"How to install your node and retrieve your address"})})]})]}),(0,a.jsxs)(L,{children:[(0,a.jsx)(f.ZP,{color:"main0",kind:"gradient",variant:"primary",size:"md",type:"submit",disabled:!c,tooltipContent:m(),tooltipPosition:{my:"bottom-center",at:"top-center"},children:"Register compute node"}),(0,a.jsx)(k.Z,{size:"md",variant:"textOnly",href:"/account/earn/crn",children:"Cancel"})]})]})]})})]})};NewComputeResourceNodePage.displayName="NewComputeResourceNodePage";var C=(0,l.memo)(NewComputeResourceNodePage),Z=(0,d.ZP)(p.DU)({marginBottom:"2rem"}),R=(0,d.ZP)(m.Z)({maxWidth:"44.6875rem"}),S=(0,d.ZP)("div")({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem","@media (min-width: 48rem)":{paddingBottom:"2.5rem"}}),B=(0,d.ZP)("p")({marginBottom:"1.5rem",marginTop:"0.25rem"}),F=(0,d.ZP)("p")({marginTop:"1rem"}),I=(0,d.ZP)("div")({paddingLeft:"0px",paddingRight:"0px",paddingTop:"1.5rem",paddingBottom:"1.5rem","@media (min-width: 48rem)":{paddingBottom:"2.5rem"}}),T=(0,d.ZP)("p")({marginBottom:"1.5rem",marginTop:"0.25rem"}),z=(0,d.ZP)("div")({marginTop:"0.5rem"}),L=(0,d.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-hy6za5-0"})({display:"flex",gap:"2.5rem"}),V=C},56312:function(e,r,o){"use strict";o.d(r,{F:function(){return t}});var a=o(87536);let s=(e,r,o)=>{if(e&&"reportValidity"in e){let d=(0,a.U2)(o,r);e.setCustomValidity(d&&d.message||""),e.reportValidity()}},resolvers_o=(e,r)=>{for(let o in r.fields){let a=r.fields[o];a&&a.ref&&"reportValidity"in a.ref?s(a.ref,o,e):a.refs&&a.refs.forEach(r=>s(r,o,e))}},resolvers_r=(e,r)=>{r.shouldUseNativeValidation&&resolvers_o(e,r);let o={};for(let d in e){let l=(0,a.U2)(r.fields,d),c=Object.assign(e[d]||{},{ref:l&&l.ref});if(i(r.names||Object.keys(e),d)){let e=Object.assign({},(0,a.U2)(o,d));(0,a.t8)(e,"root",c),(0,a.t8)(o,d,e)}else(0,a.t8)(o,d,c)}return o},i=(e,r)=>e.some(e=>e.startsWith(r+"."));var n=function(e,r){for(var o={};e.length;){var d=e[0],l=d.code,c=d.message,u=d.path.join(".");if(!o[u]){if("unionErrors"in d){var m=d.unionErrors[0].errors[0];o[u]={message:m.message,type:m.code}}else o[u]={message:c,type:l}}if("unionErrors"in d&&d.unionErrors.forEach(function(r){return r.errors.forEach(function(r){return e.push(r)})}),r){var p=o[u].types,f=p&&p[d.code];o[u]=(0,a.KN)(u,r,o,l,f?[].concat(f,d.message):d.message)}e.shift()}return o},t=function(e,r,o){return void 0===o&&(o={}),function(a,d,l){try{return Promise.resolve(function(d,c){try{var u=Promise.resolve(e["sync"===o.mode?"parse":"parseAsync"](a,r)).then(function(e){return l.shouldUseNativeValidation&&resolvers_o({},l),{errors:{},values:o.raw?a:e}})}catch(e){return c(e)}return u&&u.then?u.then(void 0,c):u}(0,function(e){if(Array.isArray(null==e?void 0:e.errors))return{values:{},errors:resolvers_r(n(e.errors,!l.shouldUseNativeValidation&&"all"===l.criteriaMode),l)};throw e}))}catch(e){return Promise.reject(e)}}}}},function(e){e.O(0,[7536,9774,2888,179],function(){return e(e.s=93494)}),_N_E=e.O()}]);