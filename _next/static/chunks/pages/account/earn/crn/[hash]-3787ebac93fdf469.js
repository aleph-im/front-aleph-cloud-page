(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8512],{98983:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/earn/crn/[hash]",function(){return t(68560)}])},93161:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var i=t(85893),o=t(19521),r=t(67294),a=t(79632);let s=o.ZP.a.withConfig({displayName:"styles__StyledExternalLink",componentId:"sc-1kmpaq1-0"})(["",""],e=>{let{theme:n,$color:t="white",$typo:i,$underline:r=!1}=e;return(0,o.iv)(["color:",";text-decoration:",";",""],n.color[t],r?"underline":"none",i?(0,a.pX)(i):"")}),ExternalLink=e=>{let{text:n,href:t,color:o,typo:r,underline:a,...l}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s,{href:t,target:"_blank",$color:o,$typo:r,$underline:a,...l,children:[n||t,(0,i.jsx)(d,{name:"square-up-right"})]})})};ExternalLink.displayName="ExternalLink";var l=(0,r.memo)(ExternalLink),d=(0,o.ZP)(a.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-mxjtpv-0"})({marginLeft:"0.625rem"})},36538:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var i=t(85893),o=t(19521),r=t(67294);let a=o.ZP.div.withConfig({displayName:"styles__StyledDotIcon",componentId:"sc-yqbriy-0"})(e=>{let{theme:n,$active:t}=e,i=t?n.color.success:n.color.disabled2;return[{height:"0.75rem",width:"0.5rem"},(0,o.iv)(["background-color:",";"],i)]}),NodeDecentralization=e=>{let{decentralization:n}=e,step=e=>(e+1)*.3;return(0,i.jsx)(l,{children:(0,i.jsx)(d,{children:Array.from({length:3},(e,t)=>(0,i.jsx)(a,{$active:n>=step(t)},t))})})};NodeDecentralization.displayName="NodeDecentralization";var s=(0,r.memo)(NodeDecentralization),l=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-4pdcek-0"})({display:"inline-flex",alignItems:"center",gap:"0.75rem"}),d=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-4pdcek-1"})({display:"flex",alignItems:"stretch",gap:"0.125rem"})},69325:function(e,n,t){"use strict";t.d(n,{d:function(){return useHostingProviderTop}});var i=t(67294);function useHostingProviderTop(e){let{nodes:n}=e,t=(0,i.useMemo)(()=>{let e=n||Array.from({length:4},(e,n)=>({metricsData:{as_name:"Provider ".concat(n)}}));return e.reduce((e,n)=>{var t;let i=(null===(t=n.metricsData)||void 0===t?void 0:t.as_name)||"others";return e[i]=(e[i]||0)+1,e},{others:0})},[n]),o=(0,i.useMemo)(()=>Object.values(t).reduce((e,n)=>e+n,0),[t]),r=(0,i.useMemo)(()=>{let e=Object.entries(t).filter(e=>{let[n]=e;return"others"!==n}).sort((e,n)=>{let[,t]=e,[,i]=n;return i-t}),n=e.slice(0,3),i=e.slice(3),r=["others",t.others+i.reduce((e,n)=>{let[,t]=n;return e+t},0)];return[...n,r].map((e,n)=>{let[t,i]=e,r=i/o;return{tier:n+1,name:t,count:i,percentage:r,color:0===n?"error":1===n?"main2":2===n?"main0":"main1"}})},[t,o]);return{total:o,buckets:t,top:r}}},16112:function(e,n,t){"use strict";t.d(n,{h:function(){return useUserCoreChannelNode}});var i=t(9754),o=t(67294),r=t(5783);function useUserCoreChannelNode(){let{nodes:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[n]=(0,i.mr)(),{entities:t}=n.ccns,{userNodes:a}=(0,r.M)({nodes:e||t}),s=(0,o.useMemo)(()=>null==a?void 0:a[0],[a]);return{userNode:s}}},60539:function(e,n,t){"use strict";t.d(n,{O:function(){return useRequestCRNSpecs}});var i=t(67294),o=t(93787);function useRequestCRNSpecs(e){let n=(0,o.z)(),{nodes:t}=e||{},[r,a]=(0,i.useState)({}),[s,l]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{if(t){let loadNodeSpecs=async()=>{await Promise.allSettled(t.map(async e=>{let t=await n.getCRNspecs(e);a(n=>({...n,[e.hash]:{data:t,loading:!1,error:void 0}}))})),l(!1)};loadNodeSpecs()}},[n,t]),(0,i.useEffect)(()=>{if(!t){let loadAllSpecs=async()=>{let e=await n.getAllCRNsSpecs();e.forEach(e=>{a(n=>({...n,[e.hash]:{data:e,loading:!1,error:void 0}}))}),l(!1)};loadAllSpecs()}},[n,t]),{specs:r,loading:s}}},68560:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return eS}});var i=t(85893),o=t(19521),r=t(67294),a=t(9008),s=t.n(a),l=t(9754),d=t(68885),c=t(11163),m=t.n(c),u=t(50721),p=t(16112),h=t(24959),v=t(87536),f=t(56312),x=t(79632),g=t(9324),j=t(93787),y=t(68518),C=t(69325),w=t(60539),_=t(49107),N=t(20109),S=t(25819),P=t(72882),b=t(81990),D=t(84550),I=t(41664),R=t.n(I),k=t(90255),E=t(16434),Z=t(36538),T=t(64885),M=t(44270),A=t(9911),O=t(25675),H=t.n(O),L=t(91489),z=t(34517),U=t(11505),B=t(33910);let OverviewTabContent=e=>{var n,t,o,a,s,c,m,u,p;let{theme:h,node:v,nodesOnSameASN:f,baseLatency:g,lastMetricsCheck:j,calculatedRewards:y,creationDate:C,isOwner:w,rewardCtrl:N,streamRewardCtrl:D,addressCtrl:I,asnTier:O,nodeSpecs:F,nodeIssue:el,createInstanceUrl:ed,isLinked:ec,isLinkableByUser:em,isUnlinkableByUser:eu,handleLink:ep,handleUnlink:eh}=e,[ev]=(0,l.mr)(),{blockchain:ef}=ev.connection,ex=(0,r.useMemo)(()=>ef===S.Ek.ETH,[ef]),eg=(0,r.useMemo)(()=>{var e;return ef?null===(e=S.DR[ef])||void 0===e?void 0:e.name:"Current network"},[ef]);return(0,i.jsx)(W,{children:(0,i.jsxs)(J,{children:[(0,i.jsxs)(q,{children:[(0,i.jsxs)(k.ZP,{title:"GENERAL INFO",children:[(0,i.jsx)(E.Z,{status:null==v?void 0:v.status}),(0,i.jsx)(k.HC,{name:"NAME",value:null==v?void 0:v.name}),(0,i.jsx)(k.HC,{name:"ASN",value:null==v?void 0:null===(n=v.metricsData)||void 0===n?void 0:n.as_name}),(0,i.jsx)(k.HC,{name:"OWNER",value:(0,i.jsx)(M.Z,{href:(0,_.tz)({address:null==v?void 0:v.owner}),isOwner:!1,textToCopy:null==v?void 0:v.owner,children:(null==v?void 0:v.owner)&&(0,_.zN)(null==v?void 0:v.owner)}),big:!0}),(0,i.jsx)(k.HC,{name:"REWARD ADDRESS",value:(0,i.jsx)(T.Z,{...N.field,...N.fieldState,placeholder:"reward address",isOwner:w,children:(0,i.jsx)(M.Z,{href:(0,_.tz)({tokenAddress:N.field.value}),isOwner:w,textToCopy:N.field.value,children:N.field.value&&(0,_.zN)(N.field.value)})}),big:!0}),(0,i.jsx)(k.HC,{name:"STREAM REWARD ADDRESS",value:(0,i.jsx)(T.Z,{...D.field,...D.fieldState,placeholder:"PAYG reward address",isOwner:w,children:(0,i.jsx)(M.Z,{href:(0,_.gl)({tokenAddress:D.field.value}),isOwner:w,textToCopy:D.field.value,children:D.field.value&&(0,_.zN)(D.field.value)})}),big:!0}),(0,i.jsx)(k.HC,{name:"ADDRESS",value:(0,i.jsx)(T.Z,{...I.field,...I.fieldState,placeholder:"address",isOwner:w,children:(0,i.jsx)(M.Z,{href:null==v?void 0:v.address,isOwner:w,textToCopy:null==v?void 0:v.address,children:null==v?void 0:v.address})}),big:!0})]}),(0,i.jsxs)(k.ZP,{title:"HARDWARE",children:[(0,i.jsx)(k.HC,{name:"CPU",value:null==F?void 0:null===(t=F.properties)||void 0===t?void 0:t.cpu.vendor}),(0,i.jsx)(k.HC,{name:"CPU ARCHITECTURE",value:null==F?void 0:null===(o=F.properties)||void 0===o?void 0:o.cpu.architecture}),(0,i.jsx)(k.HC,{name:"CPU COUNT",value:null==F?void 0:null===(a=F.cpu)||void 0===a?void 0:a.count}),(0,i.jsx)(k.HC,{name:"CPU FREQUENCY",value:"".concat((((null==F?void 0:null===(s=F.cpu)||void 0===s?void 0:s.core_frequencies.max)||0)/1024).toFixed(2)," GHz")}),(0,i.jsx)(k.HC,{name:"RAM",value:(0,_.eB)(null==F?void 0:null===(c=F.mem)||void 0===c?void 0:c.total_kB,"KiB")}),(0,i.jsx)(k.HC,{name:"HDD",value:(0,_.eB)(null==F?void 0:null===(m=F.disk)||void 0===m?void 0:m.total_kB,"KiB")}),(0,i.jsxs)(G,{children:[(0,i.jsx)(z.Z,{href:ed||"#",kind:"gradient",variant:"primary",size:"md",disabled:!ed,children:(0,i.jsxs)(i.Fragment,{children:["Create Instance",void 0===el&&(0,i.jsx)(U.g4,{width:"1em",height:"1em",color:h.color.background})]})}),!ed&&(0,i.jsx)(Y,{className:"fs-10",children:el?(0,i.jsx)(x.u,{my:"top-center",at:"bottom-center",content:(0,i.jsxs)("div",{className:"tp-body1 fs-12",children:[(0,i.jsx)("div",{className:"tp-body3 fs-16",children:"Why is my node unavailable?"}),(0,i.jsx)("div",{children:"A node may be not eligible for PAYG for the following reasons:"}),(0,i.jsxs)(V,{children:[el===d.r.IPV6&&(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"IPv6 Egress Issue:"})," The node's compute resource (CRN) is unable to establish an IPv6 egress connection."]}),el===d.r.MinSpecs&&(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Minimum Specifications:"})," The node does not meet the required minimum hardware or software specifications."]}),el===d.r.Version&&(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Version Compatibility:"})," Only nodes with version 0.4.0 or higher are eligible for selection."]}),el===d.r.RewardAddress&&(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Stream Reward Configuration:"})," ","The node lacks a configured stream reward address, which is necessary for operation."]})]})]}),children:(0,i.jsxs)($,{children:["Not eligible for pay-as-you-go (PAYG)",(0,i.jsx)(X,{name:"exclamation-circle"})]})}):(0,i.jsx)(K,{children:"Not eligible for pay-as-you-go (PAYG)"})})]})]})]}),(0,i.jsxs)(Q,{children:[(0,i.jsxs)(k.ZP,{title:"REWARD INDICATORS",children:[(0,i.jsx)(k.HC,{name:"LAST CHECK",value:j}),(0,i.jsx)(k.HC,{name:"NODES ON ASN",value:(0,i.jsxs)(ee,{className:O&&"text-".concat(O.color),children:[f,!!O&&(0,i.jsx)(x.JO,{name:"hexagon-exclamation",color:O.color})]})}),(0,i.jsx)(k.HC,{name:"VERSION",value:null==v?void 0:null===(u=v.metricsData)||void 0===u?void 0:u.version}),(0,i.jsx)(k.HC,{name:"BASE LATENCY",value:g})]}),(0,i.jsx)(k.ZP,{title:"POTENTIAL REWARD",children:(0,i.jsx)(k.HC,{name:"ESTIMATED MONTHLY REWARD",value:(0,i.jsx)(L.Z,{value:y})})})]}),(0,i.jsxs)(en,{children:[(0,i.jsx)(k.ZP,{title:"LINKED CORE NODE",children:(0,i.jsx)(et,{children:ec?(0,i.jsxs)(i.Fragment,{children:[(null==v?void 0:v.parentData)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(B.Rr,{$score:v.parentData.score}),(0,i.jsx)(R(),{href:"/account/earn/ccn/".concat(v.parentData.hash),legacyBehavior:!0,children:(0,i.jsx)(ea,{hash:v.parentData.hash,name:v.parentData.name,picture:v.parentData.picture,apiServer:A.pf,ImageCmp:H()})})]}),eu&&(0,i.jsx)(P.ZP,{kind:"flat",variant:"textOnly",onClick:eh,disabled:!ex,tooltipContent:ex?void 0:(0,b.P)(eg),tooltipPosition:{my:"bottom-center",at:"top-center"},children:(0,i.jsx)(x.JO,{name:"trash",color:"error"})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(B.Rr,{}),(0,i.jsx)(ei,{}),(0,i.jsx)(eo,{className:"fs-10",children:em?(0,i.jsx)(P.ZP,{color:"main0",size:"md",kind:"gradient",variant:"textOnly",onClick:ep,disabled:!ex,tooltipContent:ex?void 0:(0,b.P)(eg),tooltipPosition:{my:"bottom-center",at:"top-center"},children:(0,i.jsxs)("div",{children:[(0,i.jsx)(er,{name:"link"})," link now"]})}):(0,i.jsx)(i.Fragment,{children:"not linked"})})]})})}),(0,i.jsxs)(k.ZP,{title:"DECENTRALIZED SCORE",children:[(0,i.jsxs)(es,{className:O&&"text-".concat(O.color),children:[(0,i.jsx)(Z.Z,{decentralization:(null==v?void 0:null===(p=v.scoreData)||void 0===p?void 0:p.decentralization)||0}),!!O&&(0,i.jsx)(x.JO,{name:"hexagon-exclamation",color:O.color})]}),!!O&&(0,i.jsxs)("p",{className:"tp-body3 fs-10",children:["There are ",f," nodes on this ASN. Please consider to migrate your node to a different ASN."]})]}),(0,i.jsx)(k.ZP,{title:"PERFORMANCE",children:(0,i.jsx)(k.HC,{name:"CREATION TIME",value:C})})]})]})})};OverviewTabContent.displayName="OverviewTabContent";var F=(0,r.memo)(OverviewTabContent),W=(0,o.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-1dnj60j-0"})({marginTop:"2rem"}),J=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1dnj60j-1"})({display:"flex",flexWrap:"wrap",gap:"2.25rem"}),q=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-1dnj60j-2"})({display:"flex",width:"33.333333%",minWidth:"20rem",flex:"1 1 0%",flexDirection:"column",gap:"2.25rem"}),G=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-1dnj60j-3"})({paddingTop:"1.5rem",textAlign:"center"}),Y=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-1dnj60j-4"})({marginTop:"1rem"}),V=(0,o.ZP)("ul").withConfig({displayName:"cmp___StyledUl",componentId:"sc-1dnj60j-5"})({marginTop:"1rem",marginBottom:"1rem",listStyleType:"disc",paddingLeft:"1.5rem"}),$=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-1dnj60j-6"})({display:"flex",cursor:"help",alignItems:"center",justifyContent:"center"}),X=(0,o.ZP)(x.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-1dnj60j-7"})({marginLeft:"0.5rem"}),K=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-1dnj60j-8"})({textAlign:"center"}),Q=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv7",componentId:"sc-1dnj60j-9"})({display:"flex",width:"33.333333%",minWidth:"20rem",flex:"1 1 0%",flexDirection:"column",gap:"2.25rem"}),ee=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv8",componentId:"sc-1dnj60j-10"})({display:"flex",alignItems:"center",gap:"0.75rem"}),en=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv9",componentId:"sc-1dnj60j-11"})({display:"flex",width:"33.333333%",minWidth:"20rem",flex:"1 1 0%",flexDirection:"column",gap:"2.25rem"}),et=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv10",componentId:"sc-1dnj60j-12"})({display:"flex",alignItems:"center",gap:"0.75rem"}),ei=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv11",componentId:"sc-1dnj60j-13"})({height:"1.5rem",width:"1.5rem",borderRadius:"9999px",backgroundColor:"#C4C4C433"}),eo=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv12",componentId:"sc-1dnj60j-14"})({lineHeight:"1rem"}),er=(0,o.ZP)(x.JO).withConfig({displayName:"cmp___StyledIcon2",componentId:"sc-1dnj60j-15"})({height:"0.875rem",width:"0.875rem"}),ea=(0,o.ZP)(x.tJ).withConfig({displayName:"cmp___StyledNodeName",componentId:"sc-1dnj60j-16"})({marginRight:"auto",width:"auto",cursor:"pointer"}),es=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv13",componentId:"sc-1dnj60j-17"})({display:"flex",alignItems:"center",gap:"0.75rem"}),el=t(93161),ed=t(4031),ec=t(36286),em=t(56979);let PoliciesTabContent=e=>{let{isOwner:n,documentName:t,documentCID:o,documentLink:a,termsAndConditionsCtrl:s,isLoadingHistoryMessages:d,policiesHistory:c,fileValue:m,removePoliciesDisabled:u,isCurrentVersion:p,handleFileChange:h,handleDownloadFile:v,handleRemovePolicies:f}=function(e){let{node:n,termsAndConditionsCtrl:t,handleRemovePolicies:i,...o}=e,{field:{onChange:a,value:s}}=t,[l,d]=(0,r.useState)(),[c,m]=(0,r.useState)(!0),[u,p]=(0,r.useState)(),[h,v]=(0,r.useState)(!0),f=(0,r.useMemo)(()=>new ed.U,[]),x=(0,r.useMemo)(()=>new em.p,[]),g=(0,r.useMemo)(()=>{if(!u)return;let e=null==u?void 0:u.entries().next().value;if(e)return e[1]},[u]),j=(0,r.useMemo)(()=>h?"":(null==g?void 0:g.name)||" ",[h,g]),y=(0,r.useMemo)(()=>h?"":(null==g?void 0:g.cid)||" ",[h,g]),C=(0,r.useMemo)(()=>h?"":g?"".concat(A.pf,"/api/v0/storage/raw/").concat(null==g?void 0:g.cid):" ",[h,g]),w=(0,r.useMemo)(()=>!(null==u?void 0:u.size),[u]),_=(0,r.useMemo)(()=>{if(s instanceof File)return s},[s]),N=(0,r.useCallback)(e=>!!g&&e===g,[g]),S=(0,r.useCallback)(e=>{let n=Array.isArray(e)?e[0]:e;a(n)},[a]),P=(0,r.useCallback)(async(e,n)=>{let t=await x.downloadFile(e),i=window.URL.createObjectURL(t),o=document.createElement("a");o.href=i,o.download=n,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(i)},[x]);return(0,r.useEffect)(()=>{let fetchMessages=async()=>{if(m(!0),!f||!n)return d(void 0);try{let{messages:e}=await (null==f?void 0:f.getAll({messageTypes:[ec.Cs.post],refs:[n.hash],addresses:[n.owner]}));d(e)}catch(e){console.error(e)}finally{m(!1)}};fetchMessages()},[f,n]),(0,r.useEffect)(()=>{let fetchMessages=async()=>{if(v(!0),c||!f||!l)return p(void 0);try{let i=new Map;for(let o of l){var e,n,t;let r;let a=null===(n=o.content)||void 0===n?void 0:null===(e=n.content)||void 0===e?void 0:e.details.terms_and_conditions;if(!a)break;try{let{content:e}=await (null==f?void 0:f.get(a));r=e}catch(e){console.error(e)}r&&i.set(a,{time:new Date(1e3*o.content.time),cid:r.item_hash,name:null===(t=r.metadata)||void 0===t?void 0:t.name})}let o=new Map(Array.from(i).sort((e,n)=>{let[,{time:t}]=e,[,{time:i}]=n;return i.getTime()-t.getTime()}));p(o)}catch(e){console.error(e)}finally{v(!1)}};fetchMessages()},[l,c,f]),{documentName:j,documentCID:y,documentLink:C,policiesHistory:u,termsAndConditionsCtrl:t,isLoadingHistoryMessages:h,fileValue:_,removePoliciesDisabled:w,isCurrentVersion:N,handleFileChange:S,handleDownloadFile:P,handleRemovePolicies:i,...o}}(e),[g]=(0,l.mr)(),{blockchain:j}=g.connection,y=(0,r.useMemo)(()=>j===S.Ek.ETH,[j]),C=(0,r.useMemo)(()=>{var e;return j?null===(e=S.DR[j])||void 0===e?void 0:e.name:"Current network"},[j]);return(0,i.jsx)(ep,{children:(0,i.jsxs)(x.X2,{count:1,xl:5,xlGap:"2rem",children:[(0,i.jsxs)(x.JX,{span:3,children:[(0,i.jsxs)(k.ZP,{title:"CURRENT VERSION",children:[(0,i.jsx)(k.HC,{name:"DOCUMENT NAME",value:t}),(0,i.jsx)(k.HC,{name:"CID",value:o}),(0,i.jsx)(k.HC,{name:"LINK",value:a})]}),n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eh,{kind:"flat",variant:"secondary",size:"md",color:"error",onClick:f,disabled:u||!y,tooltipContent:y?void 0:(0,b.P)(C),tooltipPosition:{my:"bottom-center",at:"top-center"},children:[(0,i.jsx)(x.JO,{name:"trash",color:u||!y?"":"error",size:"lg"}),"remove policies"]}),(0,i.jsx)(x.S2,{...s.field,...s.fieldState,value:m,onChange:h}),(0,i.jsx)(ev,{className:"tp-info text-base",children:"Max. file size is 100 MB"})]})]}),(0,i.jsxs)(x.JX,{span:2,children:[(0,i.jsx)(ef,{className:"tp-h7",children:"History"}),d?(0,i.jsx)(x.$j,{}):c&&(0,i.jsx)("ol",{children:Array.from(c).map((e,n)=>{let[,t]=e;return(0,i.jsxs)(ex,{children:[(0,i.jsx)(eg,{className:"fs-12",children:p(t)?"Now":t.time.toLocaleDateString()}),(0,i.jsx)(el.Z,{text:t.name||(0,x.bs)(t.cid,12,6),href:"#",onClick:()=>v(t.cid,t.name||t.cid),target:"_self"}),n<c.size-1&&(0,i.jsx)(ej,{})]},t.cid)})})]})]})})};PoliciesTabContent.displayName="PoliciesTabContent";var eu=(0,r.memo)(PoliciesTabContent),ep=(0,o.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-cwh146-0"})({marginTop:"2rem"}),eh=(0,o.ZP)(P.ZP).withConfig({displayName:"cmp___StyledButtonWithInfoTooltip",componentId:"sc-cwh146-1"})({marginTop:"2rem !important",marginBottom:"2rem !important"}),ev=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-cwh146-2"})({marginTop:"0.5rem",width:"100%",paddingRight:"1.75rem",textAlign:"right",opacity:"0.7"}),ef=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-cwh146-3"})({marginTop:"2rem",marginBottom:"2rem"}),ex=(0,o.ZP)("li").withConfig({displayName:"cmp___StyledLi",componentId:"sc-cwh146-4"})({marginTop:"0.5rem"}),eg=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-cwh146-5"})({marginBottom:"0.125rem",fontWeight:"400",fontStyle:"italic",opacity:"0.4"}),ej=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-cwh146-6"})({position:"relative",marginLeft:"0.25rem",marginTop:"0.5rem",height:"2rem",borderInlineStartWidth:"1px"}),ey=t(99983);let ComputeResourceNodeDetailPage=()=>{let{theme:e,node:n,nodesOnSameASN:t,baseLatency:a,lastMetricsCheck:I,calculatedRewards:R,creationDate:k,nameCtrl:E,descriptionCtrl:Z,bannerCtrl:T,pictureCtrl:M,isOwner:A,isDirty:O,rewardCtrl:H,streamRewardCtrl:L,addressCtrl:z,termsAndConditionsCtrl:U,asnTier:B,nodeSpecs:W,nodeIssue:J,createInstanceUrl:q,isLinked:G,isLinkableByUser:Y,isUnlinkableByUser:V,tabId:$,setTabId:X,tabs:K,handleRemovePolicies:Q,handleRemove:ee,handleSubmit:en,handleLink:et,handleUnlink:ei}=function(){let e=(0,o.Fg)(),n=(0,c.useRouter)(),{hash:t}=n.query,[i]=(0,l.mr)(),{connection:{account:a},crns:{entities:s}}=i,S=(0,j.z)(),{node:P}=function(e){let{hash:n}=e,[t]=(0,l.mr)(),{entities:i}=t.crns,o=(0,r.useMemo)(()=>{if(i)return i.filter(e=>e.hash===n)},[i,n]),[a]=o||[];return{node:a}}({hash:t}),{userNode:b}=(0,p.h)(),D=(0,r.useMemo)(()=>new N.S(a),[a]),I=(0,r.useMemo)(()=>P?D.CRNRewardsPerDay(P)*(365/12):0,[P,D]),R=(0,u._)({node:P,nodes:s}),[k,E]=(0,r.useState)("overview"),Z=(0,r.useMemo)(()=>[{id:"overview",name:"Overview"},{id:"policies",name:"Policies"}],[]),{isLinked:T,isLinkableByUser:M,isUnlinkableByUser:A,handleLink:O,handleUnlink:H}=(0,y.i)(),L=(0,r.useMemo)(()=>P&&T(P),[T,P]),z=(0,r.useMemo)(()=>P&&b&&M(P,b),[M,P,b]),U=(0,r.useMemo)(()=>P&&A(P),[A,P]),B=(0,r.useCallback)(async()=>{if(!P||!b)return!1;let e=await O(P.hash,b.hash);return e&&b&&n.replace("/account/earn/ccn/".concat(b.hash)),e},[O,n,P,b]),F=(0,r.useCallback)(async()=>{if(!P)return!1;let e=await H(P.hash);return e&&b&&n.replace("/account/earn/ccn/".concat(null==b?void 0:b.hash)),e},[H,n,P,b]),{top:W}=(0,C.d)({nodes:s}),J=W.find(e=>{var n;return e.name===(null==P?void 0:null===(n=P.metricsData)||void 0===n?void 0:n.as_name)}),q=(0,r.useMemo)(()=>{if(P)return[P]},[P]),{specs:G}=(0,w.O)({nodes:q}),{ips:Y}=function(e){let{nodes:n}=e,t=(0,j.z)(),[i,o]=(0,r.useState)({}),[a,s]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let load=async()=>{n&&(await Promise.allSettled(n.filter(e=>!t.isStreamPaymentNotSupported(e)).map(async e=>{if(i[e.hash])return;let n=await t.getCRNips(e);o(t=>({...t,[e.hash]:{data:n,loading:!1,error:void 0}}))})),s(!1))};load()},[i,t,n]),{ips:i,loading:a}}({nodes:q}),V=(0,r.useMemo)(()=>({cpu:1,ram:(0,_.Fx)(2,{from:"GiB",to:"MiB"}),storage:(0,_.Fx)(20,{from:"GiB",to:"MiB"})}),[]),$=(0,r.useMemo)(()=>{if(q)return q.reduce((e,n)=>{var t,i;let o=S.isStreamPaymentNotSupported(n);if(o)return e[n.hash]=o,e;let r=null===(t=G[n.hash])||void 0===t?void 0:t.data;if(r){let t=S.validateMinNodeSpecs(V,r);if(!t)return e[n.hash]=d.r.MinSpecs,e}let a=null===(i=Y[n.hash])||void 0===i?void 0:i.data;if(a){let t=!!a.vm;if(!t)return e[n.hash]=d.r.IPV6,e}return r&&a&&(e[n.hash]=d.r.Valid),e},{})},[q,S,G,Y,V]),X=(0,r.useMemo)(()=>{var e;if(P)return null===(e=G[P.hash])||void 0===e?void 0:e.data},[G,P]),K=(0,r.useMemo)(()=>{if(P)return null==$?void 0:$[P.hash]},[$,P]),Q=(0,r.useMemo)(()=>{if(!P)return;let e=void 0===K;return e||K?void 0:"/console/computing/instance/new?crn=".concat(P.hash)},[P,K]),ee=(0,r.useMemo)(()=>({hash:null==P?void 0:P.hash,name:null==P?void 0:P.name,description:null==P?void 0:P.description,reward:null==P?void 0:P.reward,stream_reward:null==P?void 0:P.stream_reward,authorized:null==P?void 0:P.authorized,locked:null==P?void 0:P.locked,registration_url:null==P?void 0:P.registration_url,picture:null==P?void 0:P.picture,banner:null==P?void 0:P.banner,address:null==P?void 0:P.address,terms_and_conditions:null==P?void 0:P.terms_and_conditions}),[P]),en=function(e){let{defaultValues:n}=e,[t,i]=(0,l.mr)(),{connection:{account:o},crns:{entities:a}}=t,s=(0,j.z)(),c=(0,x.lm)(),m=(0,r.useCallback)(async e=>{if(!s)throw Error("Manager not ready");if(!o)throw Error("Invalid account");let[,n]=await s.updateComputeResourceNode(e),t=null==a?void 0:a.find(e=>e.hash===n.hash),i=function(e,n){let t={...e||{},...n,virtual:Date.now()};return t}(t,n);return i},[o,s,a]),u=(0,r.useCallback)(async e=>{if(!c)throw Error("Notification not ready");c.add({variant:"success",title:"Success",text:'Your node "'.concat(e.hash,'" was updated successfully.')}),i(new g.Wy({name:"crns",entities:[e]}))},[i,c]),{control:p,handleSubmit:y,formState:{errors:C,isDirty:w}}=(0,h.c)({defaultValues:n,onSubmit:m,onSuccess:u,resolver:(0,f.F)(d.B.updateCRNSchema),readyDeps:[n]}),_=(0,v.qo)({control:p}),N=(0,v.bc)({control:p,name:"name"}),S=(0,v.bc)({control:p,name:"description"}),P=(0,v.bc)({control:p,name:"address"}),b=(0,v.bc)({control:p,name:"picture"}),D=(0,v.bc)({control:p,name:"banner"}),I=(0,v.bc)({control:p,name:"reward"}),R=(0,v.bc)({control:p,name:"stream_reward"}),k=(0,v.bc)({control:p,name:"authorized"}),E=(0,v.bc)({control:p,name:"locked"}),Z=(0,v.bc)({control:p,name:"registration_url"}),T=(0,v.bc)({control:p,name:"terms_and_conditions"});return{values:_,control:p,nameCtrl:N,descriptionCtrl:S,addressCtrl:P,pictureCtrl:b,bannerCtrl:D,rewardCtrl:I,streamRewardCtrl:R,authorizedCtrl:k,lockedCtrl:E,registrationUrlCtrl:Z,termsAndConditionsCtrl:T,errors:C,isDirty:w,handleSubmit:y}}({defaultValues:ee}),et=(0,r.useCallback)(async()=>{await S.updateComputeResourceNode({...en.values,terms_and_conditions:""}),m().reload()},[en.values,S]);return{theme:e,nodes:s,node:P,userNode:b,calculatedRewards:I,asnTier:J,nodeSpecs:X,nodeIssue:K,createInstanceUrl:Q,isLinked:L,isLinkableByUser:z,isUnlinkableByUser:U,tabs:Z,tabId:k,setTabId:E,handleRemovePolicies:et,handleLink:B,handleUnlink:F,...en,...R}}(),[eo]=(0,l.mr)(),{blockchain:er}=eo.connection,ea=(0,r.useMemo)(()=>er===S.Ek.ETH,[er]),es=(0,r.useMemo)(()=>{var e;return er?null===(e=S.DR[er])||void 0===e?void 0:e.name:"Current network"},[er]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s(),{children:[(0,i.jsx)("title",{children:"Account | CRN Detail | Aleph Cloud"}),(0,i.jsx)("meta",{name:"description",content:"Aleph Cloud Compute Resource Node"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,i.jsx)(ey.F,{$variant:"xl",children:(0,i.jsxs)(ew,{children:[(0,i.jsx)(D.Z,{node:n,nameCtrl:E,descriptionCtrl:Z,bannerCtrl:T,pictureCtrl:M,isOwner:A}),A&&(0,i.jsxs)(e_,{children:[(0,i.jsxs)(P.ZP,{kind:"flat",variant:"textOnly",size:"md",color:"error",onClick:ee,disabled:!ea,tooltipContent:ea?void 0:(0,b.P)(es),tooltipPosition:{my:"bottom-center",at:"top-center"},children:[(0,i.jsx)(x.JO,{name:"trash",color:"error",size:"lg"}),"remove node"]}),(0,i.jsx)(P.ZP,{kind:"gradient",variant:"primary",size:"md",color:"main0",onClick:en,disabled:!O||!ea,tooltipContent:ea?void 0:(0,b.P)(es),tooltipPosition:{my:"bottom-center",at:"top-center"},children:"save changes"})]}),(0,i.jsx)(eN,{children:(0,i.jsx)(x.mQ,{selected:$,tabs:K,onTabChange:X})}),"overview"===$?(0,i.jsx)(F,{theme:e,node:n,nodesOnSameASN:t,baseLatency:a,lastMetricsCheck:I,calculatedRewards:R,creationDate:k,isOwner:A,rewardCtrl:H,streamRewardCtrl:L,addressCtrl:z,asnTier:B,nodeSpecs:W,nodeIssue:J,createInstanceUrl:q,isLinked:G,isLinkableByUser:Y,isUnlinkableByUser:V,handleLink:et,handleUnlink:ei}):"policies"===$?(0,i.jsx)(eu,{node:n,isOwner:A,termsAndConditionsCtrl:U,handleRemovePolicies:Q}):""]})})]})};ComputeResourceNodeDetailPage.displayName="ComputeResourceNodeDetailPage";var eC=(0,r.memo)(ComputeResourceNodeDetailPage),ew=(0,o.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-1pc7550-0"})({paddingTop:"0px"}),e_=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1pc7550-1"})({marginTop:"2rem",marginBottom:"2rem",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"1.75rem"}),eN=(0,o.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-1pc7550-2"})({marginTop:"2rem",marginBottom:"2rem",display:"flex"}),eS=eC}},function(e){e.O(0,[7536,1505,5675,6946,9774,2888,179],function(){return e(e.s=98983)}),_N_E=e.O()}]);