(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8512],{98983:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/earn/crn/[hash]",function(){return t(68560)}])},93161:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var i=t(85893),a=t(19521),o=t(67294),r=t(79632);let s=a.ZP.a.withConfig({displayName:"styles__StyledExternalLink",componentId:"sc-1kmpaq1-0"})(["",""],e=>{let{theme:n,$color:t="white",$typo:i,$underline:o=!1}=e;return(0,a.iv)(["color:",";text-decoration:",";",""],n.color[t],o?"underline":"none",i?(0,r.pX)(i):"")}),ExternalLink=e=>{let{text:n,href:t,color:a,typo:o,underline:r,...l}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s,{href:t,target:"_blank",$color:a,$typo:o,$underline:r,...l,children:[n||t,(0,i.jsx)(d,{name:"square-up-right"})]})})};ExternalLink.displayName="ExternalLink";var l=(0,o.memo)(ExternalLink),d=(0,a.ZP)(r.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-mxjtpv-0"})({marginLeft:"0.625rem"})},36538:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var i=t(85893),a=t(19521),o=t(67294);let r=a.ZP.div.withConfig({displayName:"styles__StyledDotIcon",componentId:"sc-yqbriy-0"})(e=>{let{theme:n,$active:t}=e,i=t?n.color.success:n.color.disabled2;return[{height:"0.75rem",width:"0.5rem"},(0,a.iv)(["background-color:",";"],i)]}),NodeDecentralization=e=>{let{decentralization:n}=e,step=e=>(e+1)*.3;return(0,i.jsx)(l,{children:(0,i.jsx)(d,{children:Array.from({length:3},(e,t)=>(0,i.jsx)(r,{$active:n>=step(t)},t))})})};NodeDecentralization.displayName="NodeDecentralization";var s=(0,o.memo)(NodeDecentralization),l=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-4pdcek-0"})({display:"inline-flex",alignItems:"center",gap:"0.75rem"}),d=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-4pdcek-1"})({display:"flex",alignItems:"stretch",gap:"0.125rem"})},69325:function(e,n,t){"use strict";t.d(n,{d:function(){return useHostingProviderTop}});var i=t(67294);function useHostingProviderTop(e){let{nodes:n}=e,t=(0,i.useMemo)(()=>{let e=n||Array.from({length:4},(e,n)=>({metricsData:{as_name:"Provider ".concat(n)}}));return e.reduce((e,n)=>{var t;let i=(null===(t=n.metricsData)||void 0===t?void 0:t.as_name)||"others";return e[i]=(e[i]||0)+1,e},{others:0})},[n]),a=(0,i.useMemo)(()=>Object.values(t).reduce((e,n)=>e+n,0),[t]),o=(0,i.useMemo)(()=>{let e=Object.entries(t).filter(e=>{let[n]=e;return"others"!==n}).sort((e,n)=>{let[,t]=e,[,i]=n;return i-t}),n=e.slice(0,3),i=e.slice(3),o=["others",t.others+i.reduce((e,n)=>{let[,t]=n;return e+t},0)];return[...n,o].map((e,n)=>{let[t,i]=e,o=i/a;return{tier:n+1,name:t,count:i,percentage:o,color:0===n?"error":1===n?"main2":2===n?"main0":"main1"}})},[t,a]);return{total:a,buckets:t,top:o}}},16112:function(e,n,t){"use strict";t.d(n,{h:function(){return useUserCoreChannelNode}});var i=t(28417),a=t(67294),o=t(5783);function useUserCoreChannelNode(){let{nodes:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[n]=(0,i.mr)(),{entities:t}=n.ccns,{userNodes:r}=(0,o.M)({nodes:e||t}),s=(0,a.useMemo)(()=>null==r?void 0:r[0],[r]);return{userNode:s}}},60539:function(e,n,t){"use strict";t.d(n,{O:function(){return useRequestCRNSpecs}});var i=t(67294),a=t(93787);function useRequestCRNSpecs(e){let n=(0,a.z)(),{nodes:t}=e||{},[o,r]=(0,i.useState)({}),[s,l]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{if(t){let loadNodeSpecs=async()=>{await Promise.allSettled(t.map(async e=>{let t=await n.getCRNspecs(e);r(n=>({...n,[e.hash]:{data:t,loading:!1,error:void 0}}))})),l(!1)};loadNodeSpecs()}},[n,t]),(0,i.useEffect)(()=>{if(!t){let loadAllSpecs=async()=>{let e=await n.getAllCRNsSpecs();e.forEach(e=>{r(n=>({...n,[e.hash]:{data:e,loading:!1,error:void 0}}))}),l(!1)};loadAllSpecs()}},[n,t]),{specs:o,loading:s}}},68560:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return eS}});var i=t(85893),a=t(19521),o=t(67294),r=t(9008),s=t.n(r),l=t(28417),d=t(68885),c=t(11163),m=t.n(c),u=t(50721),p=t(16112),h=t(24959),v=t(87536),f=t(56312),x=t(79632),g=t(9324),j=t(68518),y=t(69325),C=t(60539),w=t(9911),_=t(49107),N=t(93787),S=t(20109),P=t(25819),b=t(72882),D=t(81990),R=t(84550),I=t(41664),k=t.n(I),E=t(90255),Z=t(16434),T=t(36538),M=t(64885),A=t(44270),O=t(25675),H=t.n(O),L=t(91489),z=t(34517),U=t(11505),B=t(33910);let OverviewTabContent=e=>{var n,t,a,r,s,c,m,u,p;let{theme:h,node:v,nodesOnSameASN:f,baseLatency:g,lastMetricsCheck:j,calculatedRewards:y,creationDate:C,isOwner:N,rewardCtrl:S,streamRewardCtrl:R,addressCtrl:I,asnTier:O,nodeSpecs:F,nodeIssue:el,createInstanceUrl:ed,isLinked:ec,isLinkableByUser:em,isUnlinkableByUser:eu,handleLink:ep,handleUnlink:eh}=e,[ev]=(0,l.mr)(),{blockchain:ef}=ev.connection,ex=(0,o.useMemo)(()=>ef===P.Ek.ETH,[ef]),eg=(0,o.useMemo)(()=>{var e;return ef?null===(e=P.DR[ef])||void 0===e?void 0:e.name:"Current network"},[ef]);return(0,i.jsx)(W,{children:(0,i.jsxs)(J,{children:[(0,i.jsxs)(G,{children:[(0,i.jsxs)(E.ZP,{title:"GENERAL INFO",children:[(0,i.jsx)(Z.Z,{status:null==v?void 0:v.status}),(0,i.jsx)(E.HC,{name:"NAME",value:null==v?void 0:v.name}),(0,i.jsx)(E.HC,{name:"ASN",value:null==v?void 0:null===(n=v.metricsData)||void 0===n?void 0:n.as_name}),(0,i.jsx)(E.HC,{name:"OWNER",value:(0,i.jsx)(A.Z,{href:(0,_.tz)({address:null==v?void 0:v.owner}),isOwner:!1,textToCopy:null==v?void 0:v.owner,children:(null==v?void 0:v.owner)&&(0,_.zN)(null==v?void 0:v.owner)}),big:!0}),(0,i.jsx)(E.HC,{name:"REWARD ADDRESS",value:(0,i.jsx)(M.Z,{...S.field,...S.fieldState,placeholder:"reward address",isOwner:N,children:(0,i.jsx)(A.Z,{href:(0,_.tz)({tokenAddress:S.field.value}),isOwner:N,textToCopy:S.field.value,children:S.field.value&&(0,_.zN)(S.field.value)})}),big:!0}),(0,i.jsx)(E.HC,{name:"STREAM REWARD ADDRESS",value:(0,i.jsx)(M.Z,{...R.field,...R.fieldState,placeholder:"PAYG reward address",isOwner:N,children:(0,i.jsx)(A.Z,{href:(0,_.gl)({tokenAddress:R.field.value}),isOwner:N,textToCopy:R.field.value,children:R.field.value&&(0,_.zN)(R.field.value)})}),big:!0}),(0,i.jsx)(E.HC,{name:"ADDRESS",value:(0,i.jsx)(M.Z,{...I.field,...I.fieldState,placeholder:"address",isOwner:N,children:(0,i.jsx)(A.Z,{href:null==v?void 0:v.address,isOwner:N,textToCopy:null==v?void 0:v.address,children:null==v?void 0:v.address})}),big:!0})]}),(0,i.jsxs)(E.ZP,{title:"HARDWARE",children:[(0,i.jsx)(E.HC,{name:"CPU",value:null==F?void 0:null===(t=F.properties)||void 0===t?void 0:t.cpu.vendor}),(0,i.jsx)(E.HC,{name:"CPU ARCHITECTURE",value:null==F?void 0:null===(a=F.properties)||void 0===a?void 0:a.cpu.architecture}),(0,i.jsx)(E.HC,{name:"CPU COUNT",value:null==F?void 0:null===(r=F.cpu)||void 0===r?void 0:r.count}),(0,i.jsx)(E.HC,{name:"CPU FREQUENCY",value:"".concat((((null==F?void 0:null===(s=F.cpu)||void 0===s?void 0:s.core_frequencies.max)||0)/1024).toFixed(2)," GHz")}),(0,i.jsx)(E.HC,{name:"RAM",value:(0,_.eB)(null==F?void 0:null===(c=F.mem)||void 0===c?void 0:c.total_kB,"KiB")}),(0,i.jsx)(E.HC,{name:"HDD",value:(0,_.eB)(null==F?void 0:null===(m=F.disk)||void 0===m?void 0:m.total_kB,"KiB")}),(0,i.jsxs)(q,{children:[(0,i.jsx)(z.Z,{href:ed||"#",target:"_blank",kind:"gradient",variant:"primary",size:"md",disabled:!ed,children:(0,i.jsxs)(i.Fragment,{children:["Create Instance",void 0===el&&(0,i.jsx)(U.g4,{width:"1em",height:"1em",color:h.color.background})]})}),!ed&&(0,i.jsx)(Y,{className:"fs-10",children:el?(0,i.jsx)(x.u,{my:"top-center",at:"bottom-center",content:(0,i.jsxs)("div",{className:"tp-body1 fs-12",children:[(0,i.jsx)("div",{className:"tp-body3 fs-16",children:"Why is my node unavailable?"}),(0,i.jsx)("div",{children:"A node may be not eligible for PAYG for the following reasons:"}),(0,i.jsxs)(V,{children:[el===d.r.IPV6&&(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"IPv6 Egress Issue:"})," The node's compute resource (CRN) is unable to establish an IPv6 egress connection."]}),el===d.r.MinSpecs&&(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Minimum Specifications:"})," The node does not meet the required minimum hardware or software specifications."]}),el===d.r.Version&&(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Version Compatibility:"})," Only nodes with version 0.4.0 or higher are eligible for selection."]}),el===d.r.RewardAddress&&(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Stream Reward Configuration:"})," ","The node lacks a configured stream reward address, which is necessary for operation."]})]})]}),children:(0,i.jsxs)($,{children:["Not eligible for pay-as-you-go (PAYG)",(0,i.jsx)(X,{name:"exclamation-circle"})]})}):(0,i.jsx)(K,{children:"Not eligible for pay-as-you-go (PAYG)"})})]})]})]}),(0,i.jsxs)(Q,{children:[(0,i.jsxs)(E.ZP,{title:"REWARD INDICATORS",children:[(0,i.jsx)(E.HC,{name:"LAST CHECK",value:j}),(0,i.jsx)(E.HC,{name:"NODES ON ASN",value:(0,i.jsxs)(ee,{className:O&&"text-".concat(O.color),children:[f,!!O&&(0,i.jsx)(x.JO,{name:"hexagon-exclamation",color:O.color})]})}),(0,i.jsx)(E.HC,{name:"VERSION",value:null==v?void 0:null===(u=v.metricsData)||void 0===u?void 0:u.version}),(0,i.jsx)(E.HC,{name:"BASE LATENCY",value:g})]}),(0,i.jsx)(E.ZP,{title:"POTENTIAL REWARD",children:(0,i.jsx)(E.HC,{name:"ESTIMATED MONTHLY REWARD",value:(0,i.jsx)(L.Z,{value:y})})})]}),(0,i.jsxs)(en,{children:[(0,i.jsx)(E.ZP,{title:"LINKED CORE NODE",children:(0,i.jsx)(et,{children:ec?(0,i.jsxs)(i.Fragment,{children:[(null==v?void 0:v.parentData)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(B.Rr,{$score:v.parentData.score}),(0,i.jsx)(k(),{href:"/account/earn/ccn/".concat(v.parentData.hash),legacyBehavior:!0,children:(0,i.jsx)(er,{hash:v.parentData.hash,name:v.parentData.name,picture:v.parentData.picture,apiServer:w.pf,ImageCmp:H()})})]}),eu&&(0,i.jsx)(b.ZP,{kind:"flat",variant:"textOnly",onClick:eh,disabled:!ex,tooltipContent:ex?void 0:(0,D.P)(eg),tooltipPosition:{my:"bottom-center",at:"top-center"},children:(0,i.jsx)(x.JO,{name:"trash",color:"error"})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(B.Rr,{}),(0,i.jsx)(ei,{}),(0,i.jsx)(ea,{className:"fs-10",children:em?(0,i.jsx)(b.ZP,{color:"main0",size:"md",kind:"gradient",variant:"textOnly",onClick:ep,disabled:!ex,tooltipContent:ex?void 0:(0,D.P)(eg),tooltipPosition:{my:"bottom-center",at:"top-center"},children:(0,i.jsxs)("div",{children:[(0,i.jsx)(eo,{name:"link"})," link now"]})}):(0,i.jsx)(i.Fragment,{children:"not linked"})})]})})}),(0,i.jsxs)(E.ZP,{title:"DECENTRALIZED SCORE",children:[(0,i.jsxs)(es,{className:O&&"text-".concat(O.color),children:[(0,i.jsx)(T.Z,{decentralization:(null==v?void 0:null===(p=v.scoreData)||void 0===p?void 0:p.decentralization)||0}),!!O&&(0,i.jsx)(x.JO,{name:"hexagon-exclamation",color:O.color})]}),!!O&&(0,i.jsxs)("p",{className:"tp-body3 fs-10",children:["There are ",f," nodes on this ASN. Please consider to migrate your node to a different ASN."]})]}),(0,i.jsx)(E.ZP,{title:"PERFORMANCE",children:(0,i.jsx)(E.HC,{name:"CREATION TIME",value:C})})]})]})})};OverviewTabContent.displayName="OverviewTabContent";var F=(0,o.memo)(OverviewTabContent),W=(0,a.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-1dnj60j-0"})({marginTop:"2rem"}),J=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1dnj60j-1"})({display:"flex",flexWrap:"wrap",gap:"2.25rem"}),G=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-1dnj60j-2"})({display:"flex",width:"33.333333%",minWidth:"20rem",flex:"1 1 0%",flexDirection:"column",gap:"2.25rem"}),q=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-1dnj60j-3"})({paddingTop:"1.5rem",textAlign:"center"}),Y=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-1dnj60j-4"})({marginTop:"1rem"}),V=(0,a.ZP)("ul").withConfig({displayName:"cmp___StyledUl",componentId:"sc-1dnj60j-5"})({marginTop:"1rem",marginBottom:"1rem",listStyleType:"disc",paddingLeft:"1.5rem"}),$=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-1dnj60j-6"})({display:"flex",cursor:"help",alignItems:"center",justifyContent:"center"}),X=(0,a.ZP)(x.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-1dnj60j-7"})({marginLeft:"0.5rem"}),K=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-1dnj60j-8"})({textAlign:"center"}),Q=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv7",componentId:"sc-1dnj60j-9"})({display:"flex",width:"33.333333%",minWidth:"20rem",flex:"1 1 0%",flexDirection:"column",gap:"2.25rem"}),ee=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv8",componentId:"sc-1dnj60j-10"})({display:"flex",alignItems:"center",gap:"0.75rem"}),en=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv9",componentId:"sc-1dnj60j-11"})({display:"flex",width:"33.333333%",minWidth:"20rem",flex:"1 1 0%",flexDirection:"column",gap:"2.25rem"}),et=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv10",componentId:"sc-1dnj60j-12"})({display:"flex",alignItems:"center",gap:"0.75rem"}),ei=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv11",componentId:"sc-1dnj60j-13"})({height:"1.5rem",width:"1.5rem",borderRadius:"9999px",backgroundColor:"#C4C4C433"}),ea=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv12",componentId:"sc-1dnj60j-14"})({lineHeight:"1rem"}),eo=(0,a.ZP)(x.JO).withConfig({displayName:"cmp___StyledIcon2",componentId:"sc-1dnj60j-15"})({height:"0.875rem",width:"0.875rem"}),er=(0,a.ZP)(x.tJ).withConfig({displayName:"cmp___StyledNodeName",componentId:"sc-1dnj60j-16"})({marginRight:"auto",width:"auto",cursor:"pointer"}),es=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv13",componentId:"sc-1dnj60j-17"})({display:"flex",alignItems:"center",gap:"0.75rem"}),el=t(93161),ed=t(4031),ec=t(36286),em=t(56979);let PoliciesTabContent=e=>{let{isOwner:n,documentName:t,documentCID:a,documentLink:r,termsAndConditionsCtrl:s,isLoadingHistoryMessages:d,policiesHistory:c,fileValue:m,removePoliciesDisabled:u,isCurrentVersion:p,handleFileChange:h,handleDownloadFile:v,handleRemovePolicies:f}=function(e){let{node:n,termsAndConditionsCtrl:t,handleRemovePolicies:i,...a}=e,{field:{onChange:r,value:s}}=t,[l,d]=(0,o.useState)(),[c,m]=(0,o.useState)(!0),[u,p]=(0,o.useState)(),[h,v]=(0,o.useState)(!0),f=(0,o.useMemo)(()=>new ed.U,[]),x=(0,o.useMemo)(()=>new em.p,[]),g=(0,o.useMemo)(()=>{if(!u)return;let e=null==u?void 0:u.entries().next().value;if(e)return e[1]},[u]),j=(0,o.useMemo)(()=>h?"":(null==g?void 0:g.name)||" ",[h,g]),y=(0,o.useMemo)(()=>h?"":(null==g?void 0:g.cid)||" ",[h,g]),C=(0,o.useMemo)(()=>h?"":g?"".concat(w.pf,"/api/v0/storage/raw/").concat(null==g?void 0:g.cid):" ",[h,g]),_=(0,o.useMemo)(()=>!(null==u?void 0:u.size),[u]),N=(0,o.useMemo)(()=>{if(s instanceof File)return s},[s]),S=(0,o.useCallback)(e=>!!g&&e===g,[g]),P=(0,o.useCallback)(e=>{let n=Array.isArray(e)?e[0]:e;r(n)},[r]),b=(0,o.useCallback)(async(e,n)=>{let t=await x.downloadFile(e),i=window.URL.createObjectURL(t),a=document.createElement("a");a.href=i,a.download=n,document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(i)},[x]);return(0,o.useEffect)(()=>{let fetchMessages=async()=>{if(m(!0),!f||!n)return d(void 0);try{let{messages:e}=await (null==f?void 0:f.getAll({messageTypes:[ec.Cs.post],refs:[n.hash],addresses:[n.owner]}));d(e)}catch(e){console.error(e)}finally{m(!1)}};fetchMessages()},[f,n]),(0,o.useEffect)(()=>{let fetchMessages=async()=>{if(v(!0),c||!f||!l)return p(void 0);try{let i=new Map;for(let a of l){var e,n,t;let o;let r=null===(n=a.content)||void 0===n?void 0:null===(e=n.content)||void 0===e?void 0:e.details.terms_and_conditions;if(!r)break;try{let{content:e}=await (null==f?void 0:f.get(r));o=e}catch(e){console.error(e)}o&&i.set(r,{time:new Date(1e3*a.content.time),cid:o.item_hash,name:null===(t=o.metadata)||void 0===t?void 0:t.name})}let a=new Map(Array.from(i).sort((e,n)=>{let[,{time:t}]=e,[,{time:i}]=n;return i.getTime()-t.getTime()}));p(a)}catch(e){console.error(e)}finally{v(!1)}};fetchMessages()},[l,c,f]),{documentName:j,documentCID:y,documentLink:C,policiesHistory:u,termsAndConditionsCtrl:t,isLoadingHistoryMessages:h,fileValue:N,removePoliciesDisabled:_,isCurrentVersion:S,handleFileChange:P,handleDownloadFile:b,handleRemovePolicies:i,...a}}(e),[g]=(0,l.mr)(),{blockchain:j}=g.connection,y=(0,o.useMemo)(()=>j===P.Ek.ETH,[j]),C=(0,o.useMemo)(()=>{var e;return j?null===(e=P.DR[j])||void 0===e?void 0:e.name:"Current network"},[j]);return(0,i.jsx)(ep,{children:(0,i.jsxs)(x.X2,{count:1,xl:5,xlGap:"2rem",children:[(0,i.jsxs)(x.JX,{span:3,children:[(0,i.jsxs)(E.ZP,{title:"CURRENT VERSION",children:[(0,i.jsx)(E.HC,{name:"DOCUMENT NAME",value:t}),(0,i.jsx)(E.HC,{name:"CID",value:a}),(0,i.jsx)(E.HC,{name:"LINK",value:r})]}),n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eh,{kind:"flat",variant:"secondary",size:"md",color:"error",onClick:f,disabled:u||!y,tooltipContent:y?void 0:(0,D.P)(C),tooltipPosition:{my:"bottom-center",at:"top-center"},children:[(0,i.jsx)(x.JO,{name:"trash",color:u||!y?"":"error",size:"lg"}),"remove policies"]}),(0,i.jsx)(x.S2,{...s.field,...s.fieldState,value:m,onChange:h}),(0,i.jsx)(ev,{className:"tp-info text-base",children:"Max. file size is 100 MB"})]})]}),(0,i.jsxs)(x.JX,{span:2,children:[(0,i.jsx)(ef,{className:"tp-h7",children:"History"}),d?(0,i.jsx)(x.$j,{}):c&&(0,i.jsx)("ol",{children:Array.from(c).map((e,n)=>{let[,t]=e;return(0,i.jsxs)(ex,{children:[(0,i.jsx)(eg,{className:"fs-12",children:p(t)?"Now":t.time.toLocaleDateString()}),(0,i.jsx)(el.Z,{text:t.name||(0,x.bs)(t.cid,12,6),href:"#",onClick:()=>v(t.cid,t.name||t.cid),target:"_self"}),n<c.size-1&&(0,i.jsx)(ej,{})]},t.cid)})})]})]})})};PoliciesTabContent.displayName="PoliciesTabContent";var eu=(0,o.memo)(PoliciesTabContent),ep=(0,a.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-cwh146-0"})({marginTop:"2rem"}),eh=(0,a.ZP)(b.ZP).withConfig({displayName:"cmp___StyledButtonWithInfoTooltip",componentId:"sc-cwh146-1"})({marginTop:"2rem !important",marginBottom:"2rem !important"}),ev=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-cwh146-2"})({marginTop:"0.5rem",width:"100%",paddingRight:"1.75rem",textAlign:"right",opacity:"0.7"}),ef=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-cwh146-3"})({marginTop:"2rem",marginBottom:"2rem"}),ex=(0,a.ZP)("li").withConfig({displayName:"cmp___StyledLi",componentId:"sc-cwh146-4"})({marginTop:"0.5rem"}),eg=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-cwh146-5"})({marginBottom:"0.125rem",fontWeight:"400",fontStyle:"italic",opacity:"0.4"}),ej=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-cwh146-6"})({position:"relative",marginLeft:"0.25rem",marginTop:"0.5rem",height:"2rem",borderInlineStartWidth:"1px"}),ey=t(99983);let ComputeResourceNodeDetailPage=()=>{let{theme:e,node:n,nodesOnSameASN:t,baseLatency:r,lastMetricsCheck:I,calculatedRewards:k,creationDate:E,nameCtrl:Z,descriptionCtrl:T,bannerCtrl:M,pictureCtrl:A,isOwner:O,isDirty:H,rewardCtrl:L,streamRewardCtrl:z,addressCtrl:U,termsAndConditionsCtrl:B,asnTier:W,nodeSpecs:J,nodeIssue:G,createInstanceUrl:q,isLinked:Y,isLinkableByUser:V,isUnlinkableByUser:$,tabId:X,setTabId:K,tabs:Q,handleRemovePolicies:ee,handleRemove:en,handleSubmit:et,handleLink:ei,handleUnlink:ea}=function(){let e=(0,a.Fg)(),n=(0,c.useRouter)(),{hash:t}=n.query,[i]=(0,l.mr)(),{connection:{account:r},manager:{nodeManager:s},crns:{entities:P}}=i,{node:b}=function(e){let{hash:n}=e,[t]=(0,l.mr)(),{entities:i}=t.crns,a=(0,o.useMemo)(()=>{if(i)return i.filter(e=>e.hash===n)},[i,n]),[r]=a||[];return{node:r}}({hash:t}),{userNode:D}=(0,p.h)(),R=(0,o.useMemo)(()=>new S.S(r),[r]),I=(0,o.useMemo)(()=>b?R.CRNRewardsPerDay(b)*(365/12):0,[b,R]),k=(0,u._)({node:b,nodes:P}),[E,Z]=(0,o.useState)("overview"),T=(0,o.useMemo)(()=>[{id:"overview",name:"Overview"},{id:"policies",name:"Policies"}],[]),{isLinked:M,isLinkableByUser:A,isUnlinkableByUser:O,handleLink:H,handleUnlink:L}=(0,j.i)(),z=(0,o.useMemo)(()=>b&&M(b),[M,b]),U=(0,o.useMemo)(()=>b&&D&&A(b,D),[A,b,D]),B=(0,o.useMemo)(()=>b&&O(b),[O,b]),F=(0,o.useCallback)(async()=>{if(!b||!D)return!1;let e=await H(b.hash,D.hash);return e&&D&&n.replace("/account/earn/ccn/".concat(D.hash)),e},[H,n,b,D]),W=(0,o.useCallback)(async()=>{if(!b)return!1;let e=await L(b.hash);return e&&D&&n.replace("/account/earn/ccn/".concat(null==D?void 0:D.hash)),e},[L,n,b,D]),{top:J}=(0,y.d)({nodes:P}),G=J.find(e=>{var n;return e.name===(null==b?void 0:null===(n=b.metricsData)||void 0===n?void 0:n.as_name)}),q=(0,o.useMemo)(()=>{if(b)return[b]},[b]),{specs:Y}=(0,C.O)({nodes:q}),{ips:V}=function(e){let{nodes:n}=e,t=(0,N.z)(),[i,a]=(0,o.useState)({}),[r,s]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let load=async()=>{n&&(await Promise.allSettled(n.filter(e=>!t.isStreamPaymentNotSupported(e)).map(async e=>{if(i[e.hash])return;let n=await t.getCRNips(e);a(t=>({...t,[e.hash]:{data:n,loading:!1,error:void 0}}))})),s(!1))};load()},[i,t,n]),{ips:i,loading:r}}({nodes:q}),$=(0,o.useMemo)(()=>({cpu:1,ram:(0,_.Fx)(2,{from:"GiB",to:"MiB"}),storage:(0,_.Fx)(20,{from:"GiB",to:"MiB"})}),[]),X=(0,o.useMemo)(()=>{if(q)return q.reduce((e,n)=>{var t,i;let a=s.isStreamPaymentNotSupported(n);if(a)return e[n.hash]=a,e;let o=null===(t=Y[n.hash])||void 0===t?void 0:t.data;if(o){let t=s.validateMinNodeSpecs($,o);if(!t)return e[n.hash]=d.r.MinSpecs,e}let r=null===(i=V[n.hash])||void 0===i?void 0:i.data;if(r){let t=!!r.vm;if(!t)return e[n.hash]=d.r.IPV6,e}return o&&r&&(e[n.hash]=d.r.Valid),e},{})},[q,s,Y,V,$]),K=(0,o.useMemo)(()=>{var e;if(b)return null===(e=Y[b.hash])||void 0===e?void 0:e.data},[Y,b]),Q=(0,o.useMemo)(()=>{if(b)return null==X?void 0:X[b.hash]},[X,b]),ee=(0,o.useMemo)(()=>{if(!b)return;let e=void 0===Q;return e||Q?void 0:"".concat(w.RG,"?crn=").concat(b.hash)},[b,Q]),en=(0,o.useMemo)(()=>({hash:null==b?void 0:b.hash,name:null==b?void 0:b.name,description:null==b?void 0:b.description,reward:null==b?void 0:b.reward,stream_reward:null==b?void 0:b.stream_reward,authorized:null==b?void 0:b.authorized,locked:null==b?void 0:b.locked,registration_url:null==b?void 0:b.registration_url,picture:null==b?void 0:b.picture,banner:null==b?void 0:b.banner,address:null==b?void 0:b.address,terms_and_conditions:null==b?void 0:b.terms_and_conditions}),[b]),et=function(e){let{defaultValues:n}=e,[t,i]=(0,l.mr)(),{connection:{account:a},manager:{nodeManager:r},crns:{entities:s}}=t,c=(0,x.lm)(),m=(0,o.useCallback)(async e=>{if(!r)throw Error("Manager not ready");if(!a)throw Error("Invalid account");let[,n]=await r.updateComputeResourceNode(e),t=null==s?void 0:s.find(e=>e.hash===n.hash),i=function(e,n){let t={...e||{},...n,virtual:Date.now()};return t}(t,n);return i},[a,r,s]),u=(0,o.useCallback)(async e=>{if(!c)throw Error("Notification not ready");c.add({variant:"success",title:"Success",text:'Your node "'.concat(e.hash,'" was updated successfully.')}),i(new g.Wy({name:"crns",entities:[e]}))},[i,c]),{control:p,handleSubmit:j,formState:{errors:y,isDirty:C}}=(0,h.c)({defaultValues:n,onSubmit:m,onSuccess:u,resolver:(0,f.F)(d.B.updateCRNSchema),readyDeps:[n]}),w=(0,v.qo)({control:p}),_=(0,v.bc)({control:p,name:"name"}),N=(0,v.bc)({control:p,name:"description"}),S=(0,v.bc)({control:p,name:"address"}),P=(0,v.bc)({control:p,name:"picture"}),b=(0,v.bc)({control:p,name:"banner"}),D=(0,v.bc)({control:p,name:"reward"}),R=(0,v.bc)({control:p,name:"stream_reward"}),I=(0,v.bc)({control:p,name:"authorized"}),k=(0,v.bc)({control:p,name:"locked"}),E=(0,v.bc)({control:p,name:"registration_url"}),Z=(0,v.bc)({control:p,name:"terms_and_conditions"});return{values:w,control:p,nameCtrl:_,descriptionCtrl:N,addressCtrl:S,pictureCtrl:P,bannerCtrl:b,rewardCtrl:D,streamRewardCtrl:R,authorizedCtrl:I,lockedCtrl:k,registrationUrlCtrl:E,termsAndConditionsCtrl:Z,errors:y,isDirty:C,handleSubmit:j}}({defaultValues:en}),ei=(0,o.useCallback)(async()=>{await s.updateComputeResourceNode({...et.values,terms_and_conditions:""}),m().reload()},[et.values,s]);return{theme:e,nodes:P,node:b,userNode:D,calculatedRewards:I,asnTier:G,nodeSpecs:K,nodeIssue:Q,createInstanceUrl:ee,isLinked:z,isLinkableByUser:U,isUnlinkableByUser:B,tabs:T,tabId:E,setTabId:Z,handleRemovePolicies:ei,handleLink:F,handleUnlink:W,...et,...k}}(),[eo]=(0,l.mr)(),{blockchain:er}=eo.connection,es=(0,o.useMemo)(()=>er===P.Ek.ETH,[er]),el=(0,o.useMemo)(()=>{var e;return er?null===(e=P.DR[er])||void 0===e?void 0:e.name:"Current network"},[er]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s(),{children:[(0,i.jsx)("title",{children:"Aleph Cloud | CRN Detail"}),(0,i.jsx)("meta",{name:"description",content:"Aleph Cloud Compute Resource Node"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,i.jsx)(ey.F,{$variant:"xl",children:(0,i.jsxs)(ew,{children:[(0,i.jsx)(R.Z,{node:n,nameCtrl:Z,descriptionCtrl:T,bannerCtrl:M,pictureCtrl:A,isOwner:O}),O&&(0,i.jsxs)(e_,{children:[(0,i.jsxs)(b.ZP,{kind:"flat",variant:"textOnly",size:"md",color:"error",onClick:en,disabled:!es,tooltipContent:es?void 0:(0,D.P)(el),tooltipPosition:{my:"bottom-center",at:"top-center"},children:[(0,i.jsx)(x.JO,{name:"trash",color:"error",size:"lg"}),"remove node"]}),(0,i.jsx)(b.ZP,{kind:"gradient",variant:"primary",size:"md",color:"main0",onClick:et,disabled:!H||!es,tooltipContent:es?void 0:(0,D.P)(el),tooltipPosition:{my:"bottom-center",at:"top-center"},children:"save changes"})]}),(0,i.jsx)(eN,{children:(0,i.jsx)(x.mQ,{selected:X,tabs:Q,onTabChange:K})}),"overview"===X?(0,i.jsx)(F,{theme:e,node:n,nodesOnSameASN:t,baseLatency:r,lastMetricsCheck:I,calculatedRewards:k,creationDate:E,isOwner:O,rewardCtrl:L,streamRewardCtrl:z,addressCtrl:U,asnTier:W,nodeSpecs:J,nodeIssue:G,createInstanceUrl:q,isLinked:Y,isLinkableByUser:V,isUnlinkableByUser:$,handleLink:ei,handleUnlink:ea}):"policies"===X?(0,i.jsx)(eu,{node:n,isOwner:O,termsAndConditionsCtrl:B,handleRemovePolicies:ee}):""]})})]})};ComputeResourceNodeDetailPage.displayName="ComputeResourceNodeDetailPage";var eC=(0,o.memo)(ComputeResourceNodeDetailPage),ew=(0,a.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-1pc7550-0"})({paddingTop:"0px"}),e_=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1pc7550-1"})({marginTop:"2rem",marginBottom:"2rem",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"1.75rem"}),eN=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-1pc7550-2"})({marginTop:"2rem",marginBottom:"2rem",display:"flex"}),eS=eC}},function(e){e.O(0,[7536,1505,5675,1335,9774,2888,179],function(){return e(e.s=98983)}),_N_E=e.O()}]);