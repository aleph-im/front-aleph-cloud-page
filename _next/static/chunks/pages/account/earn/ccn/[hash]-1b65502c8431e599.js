(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3733],{63047:function(e,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/earn/ccn/[hash]",function(){return n(50002)}])},85033:function(e,i,n){"use strict";n.d(i,{Z:function(){return l}});var a=n(19521);let t=a.ZP.div.withConfig({displayName:"styles__StyledProgressBar",componentId:"sc-1ndtz6e-0"})(e=>{var i;let{theme:n,$color:t="main0",$gradient:l,$percent:r}=e,o=l?null===(i=n.gradient[l])||void 0===i?void 0:i.fn:void 0,d=o||n.color[t]||t,s=n.color.disabled2;return[{position:"relative",height:"0.125rem",width:"100%"},(0,a.iv)(["background-color:",";&:after{"," content:'';background-color:",";width:","%;}"],s,{position:"absolute",left:"0px",top:"0px",height:"100%"},d,100*r)]});var l=t},50002:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return $}});var a=n(85893),t=n(19521),l=n(67294),r=n(9008),o=n.n(r),d=n(41664),s=n.n(d),c=n(28417),u=n(11163),m=n(50721),h=n(24959),g=n(87536),v=n(56312),N=n(68885),x=n(79632),p=n(9324),j=n(68518),C=n(20109),f=n(49107),D=n(25819),M=n(72882),I=n(81990),b=n(84550),y=n(90255),w=n(85033),z=n(33910),A=n(34517);let T=(0,t.ZP)(x.rs).withConfig({displayName:"styles__StyledSwitch",componentId:"sc-16blqjh-0"})(["& span{background-image:url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAxNyAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgb3BhY2l0eT0iMC4zIj4KPHBhdGggZD0iTTEwLjA4MyA0LjY4NzVWNkgxMi43MDhWMTQuNzVIMC40NTgwMDhWNkg4LjMzMzAxVjQuNjg3NUM4LjMzMzAxIDIuNTI3MzQgMTAuMDgzIDAuNzUgMTIuMjcwNSAwLjc1QzE0LjQzMDcgMC43NSAxNi4yMDggMi41MjczNCAxNi4yMDggNC42ODc1VjZWNi44NzVIMTQuNDU4VjZWNC42ODc1QzE0LjQ1OCAzLjQ4NDM4IDEzLjQ3MzYgMi41IDEyLjI3MDUgMi41QzExLjA0IDIuNSAxMC4wODMgMy40ODQzOCAxMC4wODMgNC42ODc1WiIgZmlsbD0iIzE0MTMyNyIvPgo8L2c+Cjwvc3ZnPgo=');background-repeat:no-repeat;background-position:50%;&::after{background-image:url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAxNSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgb3BhY2l0eT0iMC41Ij4KPHBhdGggZD0iTTUuNDc4NTIgNC42ODc1VjZIOS44NTM1MlY0LjY4NzVDOS44NTM1MiAzLjQ4NDM4IDguODY5MTQgMi41IDcuNjY2MDIgMi41QzYuNDM1NTUgMi41IDUuNDc4NTIgMy40ODQzOCA1LjQ3ODUyIDQuNjg3NVpNMy43Mjg1MiA2VjQuNjg3NUMzLjcyODUyIDIuNTI3MzQgNS40Nzg1MiAwLjc1IDcuNjY2MDIgMC43NUM5LjgyNjE3IDAuNzUgMTEuNjAzNSAyLjUyNzM0IDExLjYwMzUgNC42ODc1VjZIMTMuNzkxVjE0Ljc1SDEuNTQxMDJWNkgzLjcyODUyWiIgZmlsbD0iIzE0MTMyNyIvPgo8L2c+Cjwvc3ZnPgo='),linear-gradient(90deg,#00d1ff 0%,#0054ff 100%);background-repeat:no-repeat;background-position:50%;}}"]);var E=n(16434),Z=n(64885),_=n(44270),S=n(9911),O=n(25675),P=n.n(O),L=n(91489),k=n(99983);let CoreChannelNodeDetailPage=()=>{var e,i,n;let{node:t,baseLatency:r,aggregateLatency:d,fileDownloadLatency:O,metricsLatency:R,relativeETHHeightPercent:$,lastMetricsCheck:q,calculatedRewards:ee,creationDate:ei,isOwner:en,nameCtrl:ea,descriptionCtrl:et,multiaddressCtrl:el,pictureCtrl:er,bannerCtrl:eo,rewardCtrl:ed,managerCtrl:es,lockedCtrl:ec,registrationUrlCtrl:eu,isDirty:em,isUnlinkableByUser:eh,handleUnlink:eg,handleRemove:ev,handleSubmit:eN}=function(){let e=(0,u.useRouter)(),{hash:i}=e.query,[n]=(0,c.mr)(),{entities:a}=n.ccns,{node:t}=function(e){let{hash:i}=e,[n]=(0,c.mr)(),{entities:a}=n.ccns,t=(0,l.useMemo)(()=>{if(a)return a.filter(e=>e.hash===i)},[a,i]),[r]=t||[];return{node:r}}({hash:i}),r=(0,m._)({node:t,nodes:a}),o=(0,l.useMemo)(()=>new C.S,[]),d=(0,l.useMemo)(()=>t&&a?o.CCNRewardsPerDay(t,a)*(365/12):0,[t,a,o]),{aggregate_latency:s,file_download_latency:f,metrics_latency:D,eth_height_remaining:M}=(null==t?void 0:t.metricsData)||{},I=(0,l.useMemo)(()=>s?"".concat(Number(100*(s||0)).toFixed(2)," %"):void 0,[s]),b=(0,l.useMemo)(()=>f?"".concat(Number(100*(f||0)).toFixed(2)," %"):void 0,[f]),y=(0,l.useMemo)(()=>D?"".concat(Number(100*(D||0)).toFixed(2)," %"):void 0,[D]),w=(0,l.useMemo)(()=>{if(void 0!==M)return 0===M?0:Math.trunc((18643103-M)/18643103*10)/10},[M]),{isUnlinkableByUser:z,handleUnlink:A}=(0,j.i)(),T=(0,l.useMemo)(()=>({hash:null==t?void 0:t.hash,name:null==t?void 0:t.name,picture:null==t?void 0:t.picture,banner:null==t?void 0:t.banner,description:null==t?void 0:t.description,reward:null==t?void 0:t.reward,authorized:null==t?void 0:t.authorized,locked:null==t?void 0:t.locked,registration_url:null==t?void 0:t.registration_url,manager:null==t?void 0:t.manager,multiaddress:null==t?void 0:t.multiaddress}),[t]),E=function(e){let{defaultValues:i}=e,[n,a]=(0,c.mr)(),{connection:{account:t},manager:{nodeManager:r},ccns:{entities:o}}=n,d=(0,x.lm)(),s=(0,l.useCallback)(async e=>{if(!r)throw Error("Manager not ready");if(!t)throw Error("Invalid account");let[,i]=await r.updateCoreChannelNode(e),n=null==o?void 0:o.find(e=>e.hash===i.hash),a=function(e,i){let n={...e||{},...i,virtual:Date.now()};return n}(n,i);return a},[t,r,o]),u=(0,l.useCallback)(async e=>{if(!d)throw Error("Notification not ready");d.add({variant:"success",title:"Success",text:'Your node "'.concat(e.hash,'" was updated successfully.')}),a(new p.Wy({name:"ccns",entities:[e]}))},[a,d]),{control:m,handleSubmit:j,formState:{errors:C,isDirty:f}}=(0,h.c)({defaultValues:i,onSubmit:s,onSuccess:u,resolver:(0,v.F)(N.B.updateCCNSchema),readyDeps:[i]}),D=(0,g.qo)({control:m}),M=(0,g.bc)({control:m,name:"name"}),I=(0,g.bc)({control:m,name:"description"}),b=(0,g.bc)({control:m,name:"multiaddress"}),y=(0,g.bc)({control:m,name:"picture"}),w=(0,g.bc)({control:m,name:"banner"}),z=(0,g.bc)({control:m,name:"reward"}),A=(0,g.bc)({control:m,name:"manager"}),T=(0,g.bc)({control:m,name:"authorized"}),E=(0,g.bc)({control:m,name:"locked"}),Z=(0,g.bc)({control:m,name:"registration_url"});return{values:D,control:m,nameCtrl:M,descriptionCtrl:I,multiaddressCtrl:b,pictureCtrl:y,bannerCtrl:w,rewardCtrl:z,managerCtrl:A,authorizedCtrl:T,lockedCtrl:E,registrationUrlCtrl:Z,errors:C,isDirty:f,handleSubmit:j}}({defaultValues:T});return{aggregateLatency:I,fileDownloadLatency:b,metricsLatency:y,relativeETHHeightPercent:w,calculatedRewards:d,isUnlinkableByUser:z,handleUnlink:A,...E,...r}}(),[ex]=(0,c.mr)(),{blockchain:ep}=ex.connection,ej=(0,l.useMemo)(()=>ep===D.Ek.ETH,[ep]),eC=(0,l.useMemo)(()=>{var e;return ep?null===(e=D.DR[ep])||void 0===e?void 0:e.name:"Current network"},[ep]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o(),{children:[(0,a.jsx)("title",{children:"Aleph Cloud | CCN Detail"}),(0,a.jsx)("meta",{name:"description",content:"Aleph Cloud Compute Resource Node"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,a.jsx)(k.F,{$variant:"xl",children:(0,a.jsxs)(H,{children:[(0,a.jsx)(b.Z,{node:t,nameCtrl:ea,descriptionCtrl:et,bannerCtrl:eo,pictureCtrl:er,isOwner:en}),en&&(0,a.jsxs)(W,{children:[(0,a.jsxs)(M.ZP,{kind:"flat",variant:"textOnly",size:"md",color:"error",onClick:ev,disabled:!ej,tooltipContent:ej?void 0:(0,I.P)(eC),tooltipPosition:{my:"bottom-center",at:"top-center"},children:[(0,a.jsx)(x.JO,{name:"trash",color:"error",size:"lg"}),"remove node"]}),(0,a.jsx)(M.ZP,{kind:"gradient",variant:"primary",size:"md",color:"main0",onClick:eN,disabled:!em||!ej,tooltipContent:ej?void 0:(0,I.P)(eC),tooltipPosition:{my:"bottom-center",at:"top-center"},children:"save changes"})]}),(0,a.jsx)(U,{children:(0,a.jsxs)(Q,{children:[(0,a.jsxs)(G,{children:[(0,a.jsxs)(y.ZP,{title:"GENERAL INFO",children:[(0,a.jsx)(E.Z,{status:null==t?void 0:t.status}),(0,a.jsx)(y.HC,{name:"NAME",value:null==t?void 0:t.name}),(0,a.jsx)(y.HC,{name:"ASN",value:null==t?void 0:null===(e=t.metricsData)||void 0===e?void 0:e.as_name}),(0,a.jsx)(y.HC,{name:"OWNER",value:(0,a.jsx)(_.Z,{href:(0,f.tz)({address:null==t?void 0:t.owner}),isOwner:!1,textToCopy:null==t?void 0:t.owner,children:(null==t?void 0:t.owner)&&(0,f.zN)(null==t?void 0:t.owner)}),big:!0}),(0,a.jsx)(y.HC,{name:"REWARD ADDRESS",value:(0,a.jsx)(Z.Z,{...ed.field,...ed.fieldState,placeholder:"address",isOwner:en,children:(0,a.jsx)(_.Z,{href:(0,f.tz)({tokenAddress:ed.field.value}),isOwner:en,textToCopy:ed.field.value,children:ed.field.value&&(0,f.zN)(ed.field.value)})}),big:!0}),(0,a.jsx)(y.HC,{name:"MULTI ADDRESS",value:(0,a.jsx)(Z.Z,{...el.field,...el.fieldState,placeholder:"multi address",isOwner:en,children:(0,a.jsx)(_.Z,{href:(0,f.k2)({multiaddress:el.field.value}),isOwner:en,textToCopy:el.field.value,children:el.field.value&&(0,f.zN)(el.field.value)})}),big:!0})]}),(0,a.jsxs)(y.ZP,{title:"ADDITIONAL SETTINGS",children:[(0,a.jsx)(y.HC,{name:"MANAGER",value:(0,a.jsx)(Z.Z,{...es.field,...es.fieldState,placeholder:"manager address",isOwner:en,children:(0,a.jsx)(_.Z,{href:(0,f.tz)({address:es.field.value}),isOwner:en,textToCopy:es.field.value,children:es.field.value&&(0,f.zN)(es.field.value)})}),big:!0}),(0,a.jsx)(y.HC,{name:"REGISTRATION URL",value:(0,a.jsx)(Z.Z,{...eu.field,...eu.fieldState,placeholder:"registration url",isOwner:en,children:(0,a.jsx)(_.Z,{href:eu.field.value,isOwner:en,textToCopy:eu.field.value,children:eu.field.value})}),big:!0}),(0,a.jsx)(y.HC,{name:ec.field.value?"LOCKED":"UNLOCKED",value:(0,a.jsx)(T,{...ec.field,...ec.fieldState,checked:ec.field.value,disabled:!en})})]})]}),(0,a.jsxs)(Y,{children:[(0,a.jsxs)(y.ZP,{title:"REWARD INDICATORS",children:[(0,a.jsx)(y.HC,{name:"LAST CHECK",value:q}),(0,a.jsx)(y.HC,{name:"VERSION",value:null==t?void 0:null===(i=t.metricsData)||void 0===i?void 0:i.version}),(0,a.jsx)(y.HC,{name:"BASE LATENCY",value:r}),(0,a.jsx)(y.HC,{name:"AGGREGATE LATENCY",value:d}),(0,a.jsx)(y.HC,{name:"FILE DOWNLOAD LATENCY",value:O}),(0,a.jsx)(y.HC,{name:"METRICS LATENCY",value:R}),(0,a.jsx)(y.HC,{name:"ETH HEIGHT REMAINING",value:null==t?void 0:null===(n=t.metricsData)||void 0===n?void 0:n.eth_height_remaining}),(0,a.jsx)(w.Z,{$percent:$||0,$color:"main0"}),(0,a.jsx)(y.HC,{name:"linked resources",value:(0,a.jsx)(z.ZP,{nodes:null==t?void 0:t.crnsData,subfix:" linked"})})]}),(0,a.jsx)(y.ZP,{title:"POTENTIAL REWARD",children:(0,a.jsx)(y.HC,{name:"ESTIMATED MONTHLY REWARD",value:(0,a.jsx)(L.Z,{value:ee})})})]}),(0,a.jsxs)(V,{children:[(0,a.jsx)(y.ZP,{title:"LINKED RESOURCES",children:Array.from({length:Math.max(N.B.maxLinkedPerNode,(null==t?void 0:t.crnsData.length)||0)},(e,i)=>{let n=null==t?void 0:t.crnsData[i];return(0,a.jsx)(B,{children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z.Rr,{$score:n.score}),(0,a.jsx)(s(),{href:"/account/earn/crn/".concat(n.hash),legacyBehavior:!0,children:(0,a.jsx)(X,{hash:n.hash,name:n.name,picture:n.picture,apiServer:S.pf,ImageCmp:P()})}),eh(n)&&(0,a.jsx)(M.ZP,{kind:"flat",variant:"textOnly",onClick:()=>eg(n),disabled:!ej,tooltipContent:ej?void 0:(0,I.P)(eC),tooltipPosition:{my:"bottom-center",at:"top-center"},children:(0,a.jsx)(x.JO,{name:"trash",color:"error"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z.Rr,{}),(0,a.jsx)(F,{}),(0,a.jsx)(K,{className:"fs-10",children:en?(0,a.jsx)(A.Z,{href:"/account/earn/crn",color:"main0",size:"md",kind:"gradient",variant:"textOnly",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(J,{name:"link"})," link now"]})}):(0,a.jsx)(a.Fragment,{children:"not linked"})})]})},i)})}),(0,a.jsxs)(y.ZP,{title:"PERFORMANCE",children:[(0,a.jsx)(y.HC,{name:"TOTAL STAKED",value:(0,a.jsx)(L.Z,{value:null==t?void 0:t.total_staked})}),(0,a.jsx)(y.HC,{name:"CREATION TIME",value:ei})]})]})]})})]})})]})};CoreChannelNodeDetailPage.displayName="CoreChannelNodeDetailPage";var R=(0,l.memo)(CoreChannelNodeDetailPage),H=(0,t.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-1bwzbmc-0"})({paddingTop:"0px"}),W=(0,t.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1bwzbmc-1"})({marginTop:"2rem",marginBottom:"2rem",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"1.75rem"}),U=(0,t.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-1bwzbmc-2"})({marginTop:"2rem"}),Q=(0,t.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-1bwzbmc-3"})({display:"flex",flexWrap:"wrap",gap:"2.25rem"}),G=(0,t.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-1bwzbmc-4"})({display:"flex",width:"33.333333%",minWidth:"20rem",flex:"1 1 0%",flexDirection:"column",gap:"2.25rem"}),Y=(0,t.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-1bwzbmc-5"})({display:"flex",width:"33.333333%",minWidth:"20rem",flex:"1 1 0%",flexDirection:"column",gap:"2.25rem"}),V=(0,t.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-1bwzbmc-6"})({display:"flex",width:"33.333333%",minWidth:"20rem",flex:"1 1 0%",flexDirection:"column",gap:"2.25rem"}),B=(0,t.ZP)("div").withConfig({displayName:"cmp___StyledDiv7",componentId:"sc-1bwzbmc-7"})({display:"flex",alignItems:"center",gap:"0.75rem"}),F=(0,t.ZP)("div").withConfig({displayName:"cmp___StyledDiv8",componentId:"sc-1bwzbmc-8"})({height:"1.5rem",width:"1.5rem",borderRadius:"9999px",backgroundColor:"#C4C4C433"}),K=(0,t.ZP)("div").withConfig({displayName:"cmp___StyledDiv9",componentId:"sc-1bwzbmc-9"})({lineHeight:"1rem"}),J=(0,t.ZP)(x.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-1bwzbmc-10"})({height:"0.875rem",width:"0.875rem"}),X=(0,t.ZP)(x.tJ).withConfig({displayName:"cmp___StyledNodeName",componentId:"sc-1bwzbmc-11"})({marginRight:"auto",width:"auto",cursor:"pointer"}),$=R}},function(e){e.O(0,[7536,1505,5675,1335,9774,2888,179],function(){return e(e.s=63047)}),_N_E=e.O()}]);