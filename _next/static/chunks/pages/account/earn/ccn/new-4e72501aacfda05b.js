(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4332],{46352:function(e,r,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/earn/ccn/new",function(){return o(20950)}])},34517:function(e,r,o){"use strict";o.d(r,{Z:function(){return m}});var a=o(85893),l=o(67294),d=o(41664),c=o.n(d),u=o(31515);let ButtonLink=e=>{let{href:r,variant:o="secondary",color:l="main0",kind:d="default",size:m="md",disabled:h,children:p,...f}=e,g=(0,a.jsx)(u.zx,{as:h?void 0:"a",variant:o,color:l,kind:d,size:m,disabled:h,...f,children:p});return h?g:(0,a.jsx)(c(),{href:r,passHref:!0,legacyBehavior:!0,children:g})};ButtonLink.displayName="ButtonLink";var m=(0,l.memo)(ButtonLink)},72882:function(e,r,o){"use strict";o.d(r,{ZP:function(){return p}});var a=o(85893),l=o(67294),d=o(31515),c=o(43251),u=o(57833);let m=(0,u.ZP)(d.JO).attrs(e=>{let{buttonSize:r}=e;return{size:(()=>{switch(r){case"xs":return"xs";case"sm":return"sm";case"lg":return"md-lg";case"xl":return"lg";default:return"md"}})()}}).withConfig({displayName:"styles__InfoIcon",componentId:"sc-15zds0b-0"})(["opacity:0.8;"]),h=(0,l.forwardRef)((e,r)=>{let{tooltipContent:o,tooltipPosition:u,children:h,disabled:p,size:f,...g}=e,[v,x]=(0,l.useState)(!1);(0,l.useEffect)(()=>{x(!0)},[]);let y=(0,l.useRef)(null),w=r||y;return(0,a.jsxs)("div",{className:"inline-flex relative",children:[(0,a.jsx)(d.zx,{ref:w,disabled:p,size:f,...g,children:(0,a.jsxs)(a.Fragment,{children:[h,p&&o&&(0,a.jsx)(m,{name:"info-circle",buttonSize:f})]})}),v&&p&&o&&(0,a.jsx)(c.Z,{my:(null==u?void 0:u.my)||"bottom-center",at:(null==u?void 0:u.at)||"top-center",targetRef:w,content:o})]})});h.displayName="ButtonWithInfoTooltip";var p=h},99983:function(e,r,o){"use strict";o.d(r,{F:function(){return c}});var a=o(57833);let l={xl:90,lg:60.0625,md:44.6875},d=a.ZP.div.withConfig({displayName:"styles__StyledContainer",componentId:"sc-1bpjbi2-0"})(["",""],e=>{let{$variant:r="lg"}=e;return(0,a.iv)([""," max-width:","rem;"],{marginLeft:"auto",marginRight:"auto",width:"100%",paddingLeft:"1.5rem",paddingRight:"1.5rem","@media (min-width: 62rem)":{paddingLeft:"4rem",paddingRight:"4rem"}},l[r])});var c=d},87699:function(e,r,o){"use strict";o.d(r,{Z:function(){return m}});var a=o(85893),l=o(57833),d=o(67294),c=o(31515);let u=(0,l.ZP)(c.zx).attrs(e=>({...e,forwardedAs:"a",kind:"default",variant:"textOnly",color:"main0"})).withConfig({displayName:"styles__StyledExternalLinkButton",componentId:"sc-1fpmkx0-0"})([""]),ExternalLinkButton=e=>{let{children:r,href:o,size:l="md",forwardedAs:d,...c}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(u,{href:o,size:l,...c,target:"_blank",children:[r||o,(0,a.jsx)(h,{name:"square-up-right"})]})})};ExternalLinkButton.displayName="ExternalLinkButton";var m=(0,d.memo)(ExternalLinkButton),h=(0,l.ZP)(c.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-7jgrdd-0"})({marginLeft:"0.625rem"})},43251:function(e,r,o){"use strict";o.d(r,{Z:function(){return u}});var a=o(85893),l=o(57833),d=o(67294),c=o(31515);let ResponsiveTooltip=e=>{let{forwardedAs:r,as:o,...l}=e,d=(0,c._K)("md");return(0,a.jsx)(m,{...l,$_css:d?{position:"fixed !important",left:"0px !important",top:"0px !important",zIndex:"20 !important",margin:"1.5rem",height:"calc(100% - 3rem) !important",width:"calc(100% - 3rem) !important",maxWidth:"100% !important",transform:"none !important"}:""})};ResponsiveTooltip.displayName="ResponsiveTooltip";var u=(0,d.memo)(ResponsiveTooltip),m=(0,l.ZP)(c.u).withConfig({displayName:"cmp___StyledTooltip",componentId:"sc-vdmo8c-0"})(["",""],e=>e.$_css)},75650:function(e,r,o){"use strict";o.d(r,{l:function(){return cmp},Z:function(){return cmp}});var a=o(85893),l=o(57833);let d=l.ZP.form.withConfig({displayName:"styles__StyledForm",componentId:"sc-faebcb-0"})(["",""],{display:"flex",flex:"1 1 0%",flexDirection:"column"});var c=o(31515),u=o(99983),cmp=e=>{let{children:r,onSubmit:o,errors:l}=e;return(0,a.jsxs)(d,{onSubmit:o,noValidate:!0,children:[r,(null==l?void 0:l.root)&&(0,a.jsx)(u.F,{children:Object.values(l.root).map(e=>(0,a.jsx)(m,{error:e},e+""))})]})},m=(0,l.ZP)(c.Xq).withConfig({displayName:"cmp___StyledFormError",componentId:"sc-tai6p3-0"})({wordBreak:"break-all"})},81990:function(e,r,o){"use strict";o.d(r,{P:function(){return unsupportedNetworkDisabledMessage}});var a=o(85893);function unsupportedNetworkDisabledMessage(e){return function(e){let{title:r,description:o}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"tp-body3 fs-18 text-base2",children:r}),(0,a.jsx)("p",{className:"tp-body1 fs-14 text-base2",children:o})]})}({title:"Ethereum network required",description:(0,a.jsxs)(a.Fragment,{children:[e," doesn't support this action. Please switch to the"," ",(0,a.jsx)("strong",{children:"Ethereum"})," chain using the dropdown at the top of the page."]})})}o(67294)},37940:function(e,r,o){"use strict";o.d(r,{Y:function(){return useEthereumNetwork}});var a=o(67294),l=o(9754),d=o(72077),c=o(81990);function useEthereumNetwork(){let[e]=(0,l.mr)(),{blockchain:r}=e.connection,o=(0,a.useMemo)(()=>r===d.Ek.ETH,[r]),u=(0,a.useMemo)(()=>{var e;return r?null===(e=d.DR[r])||void 0===e?void 0:e.name:"Current network"},[r]),m=(0,a.useMemo)(()=>()=>o?void 0:(0,c.P)(u),[o,u]);return{isEthereumNetwork:o,blockchainName:u,getEthereumNetworkTooltip:m}}},24959:function(e,r,o){"use strict";o.d(r,{c:function(){return useForm}});var a=o(31515),l=o(67294),d=o(87536),c=o(79711),u=o(50586);function useForm(e){let{onSubmit:r,onSuccess:o,onError:m,readyDeps:h=[],...p}=e,f=(0,d.cI)(p);(0,l.useEffect)(()=>{"object"==typeof p.defaultValues&&f.reset(p.defaultValues)},[...h]);let[g,v]=(0,l.useState)({data:void 0,error:void 0,loading:!1}),[x,{onLoad:y,onSuccess:w,onError:j}]=(0,a.g7)({flushData:!0,state:g,setState:v,onSuccess:o,onError:m}),b=(0,l.useCallback)(async e=>{try{y();let o=await r(e);w(o)}catch(r){let e=r instanceof c.jm?u.Z.ValidationError:(null==r?void 0:r.cause)||r;f.setError("root.serverError",{...e,message:null==e?void 0:e.message}),j(e)}},[f,j,y,r,w]),N=(0,l.useCallback)(async e=>{let r;if(console.log(e),!r){let o=function getFirstError(e){let[r]=Object.entries(e);if(!r)return;let[o,a]=r;if(Array.isArray(a)){let e=a[a.length-1];return getFirstError(e)}return[o,a]}(e);if(o){let[e,a]=o,l="string"==typeof a?a:(null==a?void 0:a.message)?": ".concat(a.message):(null==a?void 0:a.type)?': "'.concat(null==a?void 0:a.type,'" validation not satisfied'):"";r=u.Z.FieldError(e,l)}}r||(r=u.Z.ValidationError),j(r)},[j]),_=(0,l.useMemo)(()=>f.handleSubmit(b,N),[f,b,N]);return{...f,requestState:x,handleSubmit:_}}},20950:function(e,r,o){"use strict";o.r(r),o.d(r,{default:function(){return V}});var a=o(85893),l=o(57833),d=o(67294),c=o(9008),u=o.n(c),m=o(75650),h=o(31515),p=o(72882),f=o(9754),g=o(11163),v=o(24959),x=o(87536),y=o(56312),w=o(68885),j=o(9324),b=o(37940),N=o(93787);let _={name:"",multiaddress:""};var C=o(87699),E=o(34517),k=o(99983);let NewCoreChannelNodePage=()=>{let{nameCtrl:e,multiaddressCtrl:r,errors:o,handleSubmit:l,isEthereumNetwork:c,getEthereumNetworkTooltip:m}=function(){let e=(0,g.useRouter)(),[r,o]=(0,f.mr)(),{connection:{account:a}}=r,l=(0,N.z)(),{isEthereumNetwork:c,getEthereumNetworkTooltip:u}=(0,b.Y)(),m=(0,h.lm)(),p=(0,d.useCallback)(async e=>{if(!l)throw Error("Manager not ready");if(!a)throw Error("Invalid account");let r=await l.newCoreChannelNode(e),o=function(e,r,o){let a={hash:r,owner:o,reward:o,locked:!1,authorized:[],resource_nodes:[],crnsData:[],time:Date.now(),stakers:{},total_staked:0,status:"waiting",score:0,score_updated:!1,decentralization:0,performance:0,has_bonus:!1,...e,virtual:Date.now()};return a}(e,r,a.address);return o},[a,l]),C=(0,d.useCallback)(async r=>{if(!m)throw Error("Notification not ready");m.add({variant:"success",title:"Success",text:'Your node "'.concat(r.hash,'" was created successfully.')}),o(new j.Wy({name:"ccns",entities:[r]})),e.replace("/account/earn/ccn/".concat(r.hash))},[o,m,e]),{control:E,handleSubmit:k,formState:{errors:P}}=(0,v.c)({defaultValues:_,onSubmit:p,onSuccess:C,resolver:(0,y.F)(w.B.newCCNSchema)}),Z=(0,x.qo)({control:E}),S=(0,x.bc)({control:E,name:"name"}),B=(0,x.bc)({control:E,name:"multiaddress"});return{values:Z,control:E,nameCtrl:S,multiaddressCtrl:B,errors:P,isEthereumNetwork:c,getEthereumNetworkTooltip:u,handleSubmit:k}}();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u(),{children:[(0,a.jsx)("title",{children:"Account | CreateCCN | Aleph Cloud"}),(0,a.jsx)("meta",{name:"description",content:"Aleph Cloud Create Core Channel Node"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,a.jsx)(k.F,{$variant:"xl",children:(0,a.jsxs)("section",{children:[(0,a.jsx)(Z,{type:"h5",forwardedAs:"h1",children:"Create core node"}),(0,a.jsxs)(S,{onSubmit:l,errors:o,children:[(0,a.jsxs)(B,{children:[(0,a.jsx)(h.NP,{as:"h2",number:"1",color:"main0",children:"Set a name"}),(0,a.jsx)(T,{children:"Your node name should be short and meaningful."}),(0,a.jsxs)(h.Jy,{children:[(0,a.jsx)(h.oi,{...e.field,...e.fieldState,required:!0,label:"Node name",placeholder:"Give it a name"}),(0,a.jsx)(F,{children:"You can change this later if you want, even add a picture and description."})]})]}),(0,a.jsxs)(I,{children:[(0,a.jsx)(h.NP,{as:"h2",number:"2",color:"main0",children:"Set multiaddress"}),(0,a.jsx)(L,{children:"The physical node has unique identifier called multiaddress. It links the physical node with the interface. Can be setup later on the info page of the node or here if the physical node is running. The link below explains in detail the install procedure and how to retrieve the multiaddress."}),(0,a.jsxs)(h.Jy,{children:[(0,a.jsx)(h.oi,{...r.field,...r.fieldState,required:!0,label:"Set multiaddress",placeholder:"/ip4/{ip-address}/tcp/4025/p2p/SmlS3hb..."}),(0,a.jsx)(z,{children:(0,a.jsx)(C.Z,{href:"https://docs.aleph.cloud/nodes/core/installation/",children:"How to create a node"})})]})]}),(0,a.jsxs)(R,{children:[(0,a.jsx)(p.ZP,{color:"main0",kind:"gradient",variant:"primary",size:"md",type:"submit",disabled:!c,tooltipContent:m(),tooltipPosition:{my:"bottom-center",at:"top-center"},children:"Create core node"}),(0,a.jsx)(E.Z,{size:"md",variant:"textOnly",href:"/account/earn/ccn",children:"Cancel"})]})]})]})})]})};NewCoreChannelNodePage.displayName="NewCoreChannelNodePage";var P=(0,d.memo)(NewCoreChannelNodePage),Z=(0,l.ZP)(h.DU)({marginBottom:"2rem"}),S=(0,l.ZP)(m.Z)({maxWidth:"44.6875rem"}),B=(0,l.ZP)("section")({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem","@media (min-width: 48rem)":{paddingBottom:"2.5rem"}}),T=(0,l.ZP)("p")({marginBottom:"1.5rem",marginTop:"0.25rem"}),F=(0,l.ZP)("p")({marginTop:"1rem"}),I=(0,l.ZP)("section")({paddingLeft:"0px",paddingRight:"0px",paddingTop:"1.5rem",paddingBottom:"1.5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),L=(0,l.ZP)("p")({marginBottom:"1.5rem",marginTop:"0.25rem"}),z=(0,l.ZP)("div")({marginTop:"0.5rem"}),R=(0,l.ZP)("section").withConfig({displayName:"cmp___StyledSection3",componentId:"sc-gxwynw-0"})({display:"flex",gap:"2.5rem"}),V=P},56312:function(e,r,o){"use strict";o.d(r,{F:function(){return t}});var a=o(87536);let s=(e,r,o)=>{if(e&&"reportValidity"in e){let l=(0,a.U2)(o,r);e.setCustomValidity(l&&l.message||""),e.reportValidity()}},resolvers_o=(e,r)=>{for(let o in r.fields){let a=r.fields[o];a&&a.ref&&"reportValidity"in a.ref?s(a.ref,o,e):a.refs&&a.refs.forEach(r=>s(r,o,e))}},resolvers_r=(e,r)=>{r.shouldUseNativeValidation&&resolvers_o(e,r);let o={};for(let l in e){let d=(0,a.U2)(r.fields,l),c=Object.assign(e[l]||{},{ref:d&&d.ref});if(i(r.names||Object.keys(e),l)){let e=Object.assign({},(0,a.U2)(o,l));(0,a.t8)(e,"root",c),(0,a.t8)(o,l,e)}else(0,a.t8)(o,l,c)}return o},i=(e,r)=>e.some(e=>e.startsWith(r+"."));var n=function(e,r){for(var o={};e.length;){var l=e[0],d=l.code,c=l.message,u=l.path.join(".");if(!o[u]){if("unionErrors"in l){var m=l.unionErrors[0].errors[0];o[u]={message:m.message,type:m.code}}else o[u]={message:c,type:d}}if("unionErrors"in l&&l.unionErrors.forEach(function(r){return r.errors.forEach(function(r){return e.push(r)})}),r){var h=o[u].types,p=h&&h[l.code];o[u]=(0,a.KN)(u,r,o,d,p?[].concat(p,l.message):l.message)}e.shift()}return o},t=function(e,r,o){return void 0===o&&(o={}),function(a,l,d){try{return Promise.resolve(function(l,c){try{var u=Promise.resolve(e["sync"===o.mode?"parse":"parseAsync"](a,r)).then(function(e){return d.shouldUseNativeValidation&&resolvers_o({},d),{errors:{},values:o.raw?a:e}})}catch(e){return c(e)}return u&&u.then?u.then(void 0,c):u}(0,function(e){if(Array.isArray(null==e?void 0:e.errors))return{values:{},errors:resolvers_r(n(e.errors,!d.shouldUseNativeValidation&&"all"===d.criteriaMode),d)};throw e}))}catch(e){return Promise.reject(e)}}}}},function(e){e.O(0,[7536,9774,2888,179],function(){return e(e.s=46352)}),_N_E=e.O()}]);