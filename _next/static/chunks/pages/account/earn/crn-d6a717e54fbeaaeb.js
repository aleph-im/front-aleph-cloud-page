(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6164],{3274:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/earn/crn",function(){return n(70719)}])},72882:function(e,t,n){"use strict";n.d(t,{ZP:function(){return c}});var r=n(85893),a=n(67294),i=n(73899),o=n(43251),s=n(57833);let l=(0,s.ZP)(i.JO).attrs(e=>{let{buttonSize:t}=e;return{size:(()=>{switch(t){case"xs":return"xs";case"sm":return"sm";case"lg":return"md-lg";case"xl":return"lg";default:return"md"}})()}}).withConfig({displayName:"styles__InfoIcon",componentId:"sc-15zds0b-0"})(["opacity:0.8;"]),d=(0,a.forwardRef)((e,t)=>{let{tooltipContent:n,tooltipPosition:s,children:d,disabled:c,size:u,...m}=e,[h,p]=(0,a.useState)(!1);(0,a.useEffect)(()=>{p(!0)},[]);let f=(0,a.useRef)(null),x=t||f;return(0,r.jsxs)("div",{className:"inline-flex relative",children:[(0,r.jsx)(i.zx,{ref:x,disabled:c,size:u,...m,children:(0,r.jsxs)(r.Fragment,{children:[d,c&&n&&(0,r.jsx)(l,{name:"info-circle",buttonSize:u})]})}),h&&c&&n&&(0,r.jsx)(o.Z,{my:(null==s?void 0:s.my)||"bottom-center",at:(null==s?void 0:s.at)||"top-center",targetRef:x,content:n})]})});d.displayName="ButtonWithInfoTooltip";var c=d},57740:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(85893),a=n(57833),i=n(67294),o=n(73899);let ExternalLinkButton=e=>{let{children:t,href:n,size:a="md",variant:i="textOnly",forwardedAs:s,...d}=e;return(0,r.jsxs)(o.zx,{as:"a",href:n,size:a,kind:"default",variant:i,color:"main0",target:"_blank",rel:"noopener noreferrer",...d,children:[t||n,(0,r.jsx)(l,{name:"square-up-right"})]})};ExternalLinkButton.displayName="ExternalLinkButton";var s=(0,i.memo)(ExternalLinkButton),l=(0,a.ZP)(o.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-7jgrdd-0"})({marginLeft:"0.625rem"})},65927:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(85893),a=n(57833),i=n(67294),o=n(34816),s=n(43815),l=n(32006),d=n(64139),c=n(73899),u=n(47432);let NetworkHealthChart=e=>{let{title:t,nodes:n,...l}=e,m=(0,a.Fg)(),C=(0,i.useMemo)(()=>{let e=n||[],t=e.length,r=e.reduce((e,t)=>e+Number(t.score>=.8),0),a=e.reduce((e,t)=>e+Number(t.score>=.5&&t.score<.8),0),i=e.reduce((e,t)=>e+Number(t.score<.5),0),o=t-r-a-i;return[{label:"active nodes",value:"".concat(r," nodes"),percentage:r/t,gradient:"main0"},{label:"50% < 80%",value:"".concat(a," nodes"),percentage:a/t,gradient:"main1"},{label:"< 50%",value:"".concat(i," nodes"),percentage:i/t,color:"error"},{label:"other",value:"".concat(o," nodes"),percentage:o/t,color:"transparent"}]},[n]),w=m.color.disabled2,N=[...C].reverse();return(0,r.jsxs)(d.Z,{loading:!n,...l,children:[(0,r.jsx)(h,{forwardedAs:"h3",type:"info",color:"main0",children:t}),(0,r.jsxs)(p,{children:[(0,r.jsxs)(f,{width:100,height:100,margin:{},children:[(0,r.jsx)("defs",{children:(0,r.jsx)(u._,{data:C})}),(0,r.jsx)(o.b,{data:[{v:1}],dataKey:"v",stroke:"transparent",innerRadius:"72%",outerRadius:"100%",startAngle:450,endAngle:90,isAnimationActive:!1,fill:w}),(0,r.jsx)(o.b,{data:N,dataKey:"percentage",stroke:"transparent",innerRadius:"72%",outerRadius:"100%",startAngle:450,endAngle:90,children:N.map(e=>{let t="gr-".concat(e.gradient),n=e.gradient?"url(#".concat(t,")"):e.color?m.color[e.color]||e.color:void 0;return(0,r.jsx)(s.b,{fill:n},e.label)})}),(0,r.jsx)("text",{x:"50%",y:"50%",dominantBaseline:"central",textAnchor:"middle",className:"tp-body3 fs-24",fill:m.color.text,children:(null==n?void 0:n.length)||0})]}),(0,r.jsx)(x,{children:Array.from({length:2},(e,t)=>(0,r.jsx)(v,{children:C.slice(2*t,2*t+2).map(e=>(0,r.jsxs)(g,{children:[(0,r.jsx)(c.cu,{$color:"transparent"===e.color?w:e.color,$gradient:e.gradient,$size:"1.25rem"}),(0,r.jsxs)(y,{className:"tp-body3",children:[(0,r.jsx)("div",{children:e.value}),(0,r.jsx)(j,{className:"fs-10",children:e.label})]})]},e.label))},t))})]})]})};NetworkHealthChart.displayName="NetworkHealthChart";var m=(0,i.memo)(NetworkHealthChart),h=(0,a.ZP)(c.DU)({margin:"0px",minHeight:"2rem"}),p=(0,a.ZP)("div")({display:"flex",flexDirection:"column",alignItems:"center"}),f=(0,a.ZP)(l.u)({marginTop:"0.75rem",marginBottom:"0.75rem",minHeight:"6.25rem"}),x=(0,a.ZP)("div")({marginTop:"0.25rem",display:"flex",width:"100%",alignItems:"stretch",justifyContent:"center",gap:"1.5rem"}),v=(0,a.ZP)("div")({display:"flex",flexDirection:"column",gap:"1rem"}),g=(0,a.ZP)("div")({display:"flex",alignItems:"center",gap:"0.75rem"}),y=(0,a.ZP)("div")({display:"flex",flexDirection:"column",justifyContent:"space-between",gap:"0.25rem",whiteSpace:"nowrap",fontStyle:"normal",lineHeight:"1rem !important"}),j=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-ilxfce-0"})({opacity:"0.6"})},36538:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(85893),a=n(57833),i=n(67294);let o=a.ZP.div.withConfig({displayName:"styles__StyledDotIcon",componentId:"sc-yqbriy-0"})(e=>{let{theme:t,$active:n}=e,r=n?t.color.success:t.color.disabled2;return[{height:"0.75rem",width:"0.5rem"},(0,a.iv)(["background-color:",";"],r)]}),NodeDecentralization=e=>{let{decentralization:t}=e,step=e=>(e+1)*.3;return(0,r.jsx)(l,{children:(0,r.jsx)(d,{children:Array.from({length:3},(e,n)=>(0,r.jsx)(o,{$active:t>=step(n)},n))})})};NodeDecentralization.displayName="NodeDecentralization";var s=(0,i.memo)(NodeDecentralization),l=(0,a.ZP)("div")({display:"inline-flex",alignItems:"center",gap:"0.75rem"}),d=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-4pdcek-0"})({display:"flex",alignItems:"stretch",gap:"0.125rem"})},43251:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(85893),a=n(57833),i=n(67294),o=n(73899);let ResponsiveTooltip=e=>{let{forwardedAs:t,as:n,...a}=e,i=(0,o._K)("md");return(0,r.jsx)(l,{...a,$_css:i?{position:"fixed !important",left:"0px !important",top:"0px !important",zIndex:"20 !important",margin:"1.5rem",height:"calc(100% - 3rem) !important",width:"calc(100% - 3rem) !important",maxWidth:"100% !important",transform:"none !important"}:""})};ResponsiveTooltip.displayName="ResponsiveTooltip";var s=(0,i.memo)(ResponsiveTooltip),l=(0,a.ZP)(o.u).withConfig({displayName:"cmp___StyledTooltip",componentId:"sc-vdmo8c-0"})(["",""],e=>e.$_css)},81990:function(e,t,n){"use strict";n.d(t,{P:function(){return unsupportedNetworkDisabledMessage}});var r=n(85893);function unsupportedNetworkDisabledMessage(e){return function(e){let{title:t,description:n}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"tp-body3 fs-18 text-base2",children:t}),(0,r.jsx)("p",{className:"tp-body1 fs-14 text-base2",children:n})]})}({title:"Ethereum network required",description:(0,r.jsxs)(r.Fragment,{children:[e," doesn't support this action. Please switch to the"," ",(0,r.jsx)("strong",{children:"Ethereum"})," chain using the dropdown at the top of the page."]})})}n(67294)},69325:function(e,t,n){"use strict";n.d(t,{d:function(){return useHostingProviderTop}});var r=n(67294);function useHostingProviderTop(e){let{nodes:t}=e,n=(0,r.useMemo)(()=>{let e=t||Array.from({length:4},(e,t)=>({metricsData:{as_name:"Provider ".concat(t)}}));return e.reduce((e,t)=>{var n;let r=(null===(n=t.metricsData)||void 0===n?void 0:n.as_name)||"others";return e[r]=(e[r]||0)+1,e},{others:0})},[t]),a=(0,r.useMemo)(()=>Object.values(n).reduce((e,t)=>e+t,0),[n]),i=(0,r.useMemo)(()=>{let e=Object.entries(n).filter(e=>{let[t]=e;return"others"!==t}).sort((e,t)=>{let[,n]=e,[,r]=t;return r-n}),t=e.slice(0,3),r=e.slice(3),i=["others",n.others+r.reduce((e,t)=>{let[,n]=t;return e+n},0)];return[...t,i].map((e,t)=>{let[n,r]=e,i=r/a;return{tier:t+1,name:n,count:r,percentage:i,color:0===t?"error":1===t?"main2":2===t?"main0":"main1"}})},[n,a]);return{total:a,buckets:n,top:i}}},68518:function(e,t,n){"use strict";n.d(t,{i:function(){return useLinking}});var r=n(25093),a=n(9324),i=n(73899),o=n(67294),s=n(93787),l=n(37940);function useLinking(){let[e,t]=(0,r.mr)(),{entities:n}=e.crns,{entities:d}=e.ccns,c=(0,s.z)(),{isEthereumNetwork:u,getEthereumNetworkTooltip:m}=(0,l.Y)(),h=(0,i.lm)(),p=(0,o.useCallback)(e=>"string"==typeof e?null==n?void 0:n.find(t=>t.hash===e):e,[n]),f=(0,o.useCallback)(e=>"string"==typeof e?null==d?void 0:d.find(t=>t.hash===e):e,[d]),x=(0,o.useCallback)(e=>{let t=p(e);return!!t&&c.isLinked(t)},[p,c]),v=(0,o.useCallback)((e,t)=>{let n=p(e),r=f(t);return!!n&&!!r&&c.isLinkableBy(n,r)[0]},[f,p,c]),g=(0,o.useCallback)(e=>{let t=p(e);if(!t)return!1;let n=f(t.parentData||t.parent||"");return!!n&&c.isUnlinkableBy(t,n)},[f,p,c]),y=(0,o.useCallback)(async(e,n)=>{try{if(!h)throw Error("Notification not ready");let r=p(e);if(!r)throw Error("Invalid CRN node");let i=f(n);if(!i)throw Error("Invalid CCN node");if(!v(r,i))throw Error("Not linkable node");await c.linkComputeResourceNode(r.hash),h.add({variant:"success",title:"Success",text:'Linked resource node "'.concat(r.hash,'" successfully.')});let[o,s]=function(e,t){let n={...t,virtual:Date.now()},r={...e,virtual:Date.now()};n.parent=r.hash,n.parentData=r;let a=r.crnsData.reduce((e,t)=>(e[t.hash]=t,e),{});return a[n.hash]=n,r.crnsData=Object.values(a),r.resource_nodes=Object.keys(a),[r,n]}(i,r);return t(new a.Wy({name:"ccns",entities:[o]})),t(new a.Wy({name:"crns",entities:[s]})),!0}catch(e){null==h||h.add({variant:"error",title:"Error",text:e.message})}return!1},[t,f,p,v,c,h]),j=(0,o.useCallback)(async e=>{try{if(!h)throw Error("Notification not ready");let n=p(e);if(!n)throw Error("Invalid CRN node");let r=f(n.parentData||n.parent||"");if(!r)throw Error("Invalid CCN node");if(!g(n))throw Error("Not unlinkable node");await c.unlinkComputeResourceNode(n.hash),h.add({variant:"success",title:"Success",text:'Unlinked resource node "'.concat(n.hash,'" successfully.')});let[i,o]=function(e,t){let n={...t,virtual:Date.now()},r={...e,virtual:Date.now()};n.parent="",n.parentData=void 0;let a=r.crnsData.filter(e=>e.hash!==n.hash);return r.crnsData=a,r.resource_nodes=a.map(e=>e.hash),[r,n]}(r,n);return t(new a.Wy({name:"ccns",entities:[i]})),t(new a.Wy({name:"crns",entities:[o]})),!0}catch(e){null==h||h.add({variant:"error",title:"Error",text:e.message})}return!1},[t,f,p,g,c,h]);return{isLinked:x,isLinkableByUser:v,isUnlinkableByUser:g,isEthereumNetwork:u,getEthereumNetworkTooltip:m,handleLink:y,handleUnlink:j}}},16112:function(e,t,n){"use strict";n.d(t,{h:function(){return useUserCoreChannelNode}});var r=n(25093),a=n(67294),i=n(5783);function useUserCoreChannelNode(){let{nodes:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t]=(0,r.mr)(),{entities:n}=t.ccns,{userNodes:o}=(0,i.M)({nodes:e||n}),s=(0,a.useMemo)(()=>null==o?void 0:o[0],[o]);return{userNode:s}}},37940:function(e,t,n){"use strict";n.d(t,{Y:function(){return useEthereumNetwork}});var r=n(67294),a=n(25093),i=n(72077),o=n(81990);function useEthereumNetwork(){let[e]=(0,a.mr)(),{blockchain:t}=e.connection,n=(0,r.useMemo)(()=>t===i.Ek.ETH,[t]),s=(0,r.useMemo)(()=>{var e;return t?null===(e=i.DR[t])||void 0===e?void 0:e.name:"Current network"},[t]),l=(0,r.useMemo)(()=>()=>n?void 0:(0,o.P)(s),[n,s]);return{isEthereumNetwork:n,blockchainName:s,getEthereumNetworkTooltip:l}}},60539:function(e,t,n){"use strict";n.d(t,{O:function(){return useRequestCRNSpecs}});var r=n(67294),a=n(93787);function useRequestCRNSpecs(e){let t=(0,a.z)(),{nodes:n}=e||{},[i,o]=(0,r.useState)({}),[s,l]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{if(n){let loadNodeSpecs=async()=>{await Promise.allSettled(n.map(async e=>{let n=await t.getCRNspecs(e);o(t=>({...t,[e.hash]:{data:n,loading:!1,error:void 0}}))})),l(!1)};loadNodeSpecs()}},[t,n]),(0,r.useEffect)(()=>{if(!n){let loadAllSpecs=async()=>{let e=await t.getAllCRNsSpecs();e.forEach(e=>{o(t=>({...t,[e.hash]:{data:e,loading:!1,error:void 0}}))}),l(!1)};loadAllSpecs()}},[t,n]),{specs:i,loading:s}}},70719:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eN}});var r=n(85893),a=n(57833),i=n(67294),o=n(9008),s=n.n(o),l=n(41664),d=n.n(l),c=n(73899),u=n(39674),m=n(36538),h=n(20109),p=n(29039);let CRNRewardsCell=e=>{let{node:t}=e,n=(0,i.useMemo)(()=>{let e=new h.S;return e.CRNRewardsPerDay(t)*(365/12)},[t]),a=(0,i.useMemo)(()=>!t.parent,[t]);return(0,r.jsx)(r.Fragment,{children:a?(0,r.jsx)(r.Fragment,{children:"-"}):(0,r.jsxs)(x,{children:["~ ",(0,r.jsx)(p.t,{value:n}),"/M"]})})};CRNRewardsCell.displayName="CRNRewardsCell";var f=(0,i.memo)(CRNRewardsCell),x=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-ymisl1-0"})({display:"inline-flex",alignItems:"center",gap:"0.5rem",whiteSpace:"nowrap"}),v=n(68518),g=n(72882);let LinkCRNButton=e=>{let{node:t,userNode:n,onLink:a,onUnlink:o}=e,{isLinkableByUser:s,isUnlinkableByUser:l,handleLink:d,handleUnlink:u,isEthereumNetwork:m,getEthereumNetworkTooltip:h}=(0,v.i)(),p=a||d,f=o||u,x=(0,i.useMemo)(()=>t&&n&&s(t,n),[s,t,n]),y=(0,i.useMemo)(()=>t&&l(t),[l,t]),j=(0,i.useCallback)(()=>{n&&(y?f(t.hash):p(t,n))},[p,f,y,t,n]),C=!x&&!y||!m,w=h();return m?(0,r.jsx)(r.Fragment,{children:y?(0,r.jsx)(c.zx,{kind:"gradient",size:"md",variant:"secondary",color:"main0",onClick:j,children:"Unlink"}):(0,r.jsx)(c.zx,{kind:"gradient",size:"md",variant:"secondary",color:"main0",onClick:j,disabled:!x,children:"Link"})}):(0,r.jsx)(g.ZP,{kind:"gradient",size:"md",variant:"secondary",color:y?"main1":"main0",onClick:j,disabled:C,tooltipContent:w,tooltipPosition:{my:"bottom-center",at:"top-center"},children:y?"Unlink":"Link"})};LinkCRNButton.displayName="LinkCRNButton";var y=(0,i.memo)(LinkCRNButton),j=n(34517),C=n(25675),w=n.n(C),N=n(16451);let ComputeResourceNodesTable=e=>{let{filteredNodes:t,userNode:n,account:a,lastVersion:o,nodesIssues:s,loadItemsDisabled:l,handleLoadItems:d,handleSortItems:h,handleLink:p,handleUnlink:x}=e,{apiServer:v}=(0,N.r)(),g=(0,i.useMemo)(()=>[{label:"",align:"center",render:e=>(null==s?void 0:s[e.hash])?(0,r.jsx)(k,{children:"\xa0"}):null},{label:"SCORE",sortable:!0,sortBy:e=>e.score,render:e=>(0,r.jsx)(c.WG,{score:e.score})},{label:"LINKED",sortable:!0,sortBy:e=>{var t;return null===(t=e.parentData)||void 0===t?void 0:t.name},render:e=>(0,r.jsx)(r.Fragment,{children:e.parentData?(0,r.jsx)(c.tJ,{hash:e.parentData.hash,name:e.parentData.name,picture:e.parentData.picture,apiServer:v,ImageCmp:w()}):"-"})},{label:"NAME",sortable:!0,sortBy:e=>e.name,render:e=>(0,r.jsx)(c.tJ,{hash:e.hash,name:e.name,picture:e.picture,apiServer:v,ImageCmp:w()})},{label:"DECENTRALIZED",sortable:!0,sortBy:e=>e.decentralization,render:e=>(0,r.jsx)(m.Z,{decentralization:e.decentralization})},{label:"EST. REWARDS",align:"right",render:e=>(0,r.jsx)(f,{node:e})},{label:"VERSION",sortable:!0,align:"right",width:"100%",sortBy:e=>{var t;return null===(t=e.metricsData)||void 0===t?void 0:t.version},render:e=>{var t;return(0,r.jsx)(c.pJ,{version:(null===(t=e.metricsData)||void 0===t?void 0:t.version)||"",lastVersion:o})}},{label:"",align:"right",render:e=>(0,r.jsxs)(P,{children:[(0,r.jsx)(y,{node:e,userNode:n,account:a,onLink:p,onUnlink:x}),(0,r.jsx)(j.Z,{kind:"gradient",size:"md",variant:"secondary",color:"main0",href:"/account/earn/crn/".concat(e.hash),children:"Info"})]})}],[a,v,o,s,p,x,n]);return(0,r.jsx)(u.Z,{columns:g,data:t,infiniteScroll:!l,onLoadMore:d,onSort:h})};ComputeResourceNodesTable.displayName="ComputeResourceNodesTable";var b=(0,i.memo)(ComputeResourceNodesTable),k=(0,a.ZP)(c.Cc)({marginLeft:"auto !important",marginRight:"auto !important",display:"flex !important"}),P=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-do92il-0"})({display:"flex",justifyContent:"flex-end",gap:"0.75rem"}),R=n(57740),Z=n(77091),D=n(45866),_=n(65927),S=n(64139),I=n(69325);let HostingProviderChart=e=>{let{title:t,nodes:n,...a}=e,{top:o}=(0,I.d)({nodes:n}),s=(0,i.useMemo)(()=>o.map(e=>{let{name:t,count:n,percentage:r,color:a}=e;return{label:"".concat(n," nodes (").concat((100*r).toFixed(0),"%)"),value:t,percentage:r,color:a}}),[o]);return(0,r.jsxs)(S.Z,{loading:!n,...a,children:[(0,r.jsx)(T,{forwardedAs:"h3",type:"info",color:"main0",children:t}),(0,r.jsx)(B,{children:s.map(e=>(0,r.jsxs)(L,{children:[(0,r.jsx)(c.cu,{$color:e.color,$size:"1.25rem"}),(0,r.jsxs)(M,{className:"tp-body3",children:[(0,r.jsx)("div",{children:e.value}),(0,r.jsx)(z,{className:"fs-10",children:e.label})]})]},e.value))})]})};HostingProviderChart.displayName="HostingProviderChart";var E=(0,i.memo)(HostingProviderChart),T=(0,a.ZP)(c.DU)({margin:"0px",minHeight:"2rem"}),B=(0,a.ZP)("div")({marginTop:"0.25rem",display:"flex",flexDirection:"column",gap:"1rem"}),L=(0,a.ZP)("div")({display:"flex",alignItems:"center",gap:"0.75rem"}),M=(0,a.ZP)("div")({display:"flex",flexDirection:"column",justifyContent:"space-between",gap:"0.25rem",whiteSpace:"nowrap",fontStyle:"normal",lineHeight:"1rem !important"}),z=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-20a3gd-0"})({opacity:"0.6"}),A=n(2064),O=n(14685);let TotalNetworkResourcesChart=e=>{let{title:t,resources:n,...a}=e,o=(0,i.useMemo)(()=>[{label:"CPU",value:(null==n?void 0:n.cpu)||"-",color:"main1"},{label:"RAM",value:(0,O.eB)(null==n?void 0:n.ram,"MiB"),color:"main1"},{label:"HDD",value:(0,O.eB)(null==n?void 0:n.hdd,"MiB"),color:"main1"}],[n]);return(0,r.jsxs)(S.Z,{loading:!n,...a,children:[(0,r.jsx)(W,{forwardedAs:"h3",type:"info",color:"main0",children:t}),(0,r.jsxs)(U,{children:[o.map(e=>(0,r.jsxs)(F,{children:[(0,r.jsx)(c.cu,{$color:e.color,$size:"1.25rem"}),(0,r.jsxs)($,{className:"tp-body3",children:[(0,r.jsx)("div",{children:e.value}),(0,r.jsx)(q,{className:"fs-10",children:e.label})]})]},e.label)),(0,r.jsxs)(J,{className:"fs-10 tp-body1",children:[(0,r.jsx)("div",{children:"Total amount of resources on the network."}),(null==n?void 0:n.nodes)&&(0,r.jsxs)("div",{children:["(Using ",null==n?void 0:n.nodes," active nodes of ",null==n?void 0:n.total,")"]})]})]})]})};TotalNetworkResourcesChart.displayName="TotalNetworkResourcesChart";var H=(0,i.memo)(TotalNetworkResourcesChart),W=(0,a.ZP)(c.DU)({margin:"0px",minHeight:"2rem"}),U=(0,a.ZP)("div")({marginTop:"0.25rem",display:"flex",flexDirection:"column",gap:"1rem"}),F=(0,a.ZP)("div")({display:"flex",alignItems:"center",gap:"0.75rem"}),$=(0,a.ZP)("div")({display:"flex",flexDirection:"column",justifyContent:"space-between",gap:"0.25rem",whiteSpace:"nowrap",fontStyle:"normal",lineHeight:"1rem !important"}),q=(0,a.ZP)("div")({opacity:"0.6"}),J=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-1tflrya-0"})({opacity:"0.6"}),K=n(25093),V=n(17675),X=n(41672),G=n(87740),Y=n(5783),Q=n(49879),ee=n(16112),et=n(11163),en=n(60539),er=n(93787),ea=n(99983),ei=n(9911);let ComputeResourceNodesPage=e=>{let{account:t,nodes:n,paginatedSortedFilteredNodes:a,userNodes:o,filteredUserNodes:l,userNodesIssues:u,userNode:m,tabs:h,selectedTab:p,filter:f,lastVersion:x,isLinkableOnly:g,isLinkableOnlyDisabled:y,totalResources:j,loadItemsDisabled:C,showInactive:w,handleShowInactiveChange:N,handleLoadItems:k,handleSortItems:P,handleLink:S,handleUnlink:I,handleTabChange:T,handleFilterChange:B,handleLinkableOnlyChange:L}=function(e){let{nodes:t,filteredNodes:n,showInactive:a,handleShowInactiveChange:o,...s}=function(e){let{nodes:t}=e,[n]=(0,K.mr)(),{account:r,balance:a=0}=n.connection,{data:o}=n.lastCRNVersion,{entities:s}=n.crns,l=(0,i.useMemo)(()=>{let e={};return Object.entries(n.filter||{}).forEach(t=>{let[n,r]=t;r&&(e[n]=r.value)}),e},[n.filter]),[d,c]=(0,X.L)({key:"crnq",debounced:200}),[u,m]=(0,i.useState)(),[h,p]=(0,i.useState)(!1),f=(0,i.useCallback)(e=>{let t=e.target.value;m(t),c(t)},[c]),x=(0,i.useCallback)(e=>{p(e.target.checked)},[]);(0,i.useEffect)(()=>{void 0===u&&d&&m(d)},[d,u]);let v=(0,i.useCallback)(e=>e?t=>{var n,r;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||((null===(r=t.parentData)||void 0===r?void 0:r.name)||"").toLowerCase().includes(e.toLowerCase())}:()=>!0,[]),g=(0,i.useCallback)(()=>e=>!!h||!e.inactive_since&&e.score>0,[h]),y=(0,i.useMemo)(()=>{let e=t||s;if(e)return e.sort((e,t)=>t.score-e.score)},[t,s]),j=(0,i.useMemo)(()=>{if(y)return y.filter(v(d)).filter(g())},[v,g,d,y]),{list:C,handleSortItems:w}=(0,V.g)({list:j});return{account:r,accountBalance:a,nodes:y,filteredNodes:C,filter:u,lastVersion:o,filters:l,showInactive:h,handleSortItems:w,handleFilterChange:f,handleShowInactiveChange:x}}(e),{account:l}=s,d=(0,er.z)(),{userNode:u}=(0,ee.h)(),[m,h]=(0,i.useState)(),p=(0,i.useCallback)(async e=>{let t=e.target.checked;h(t)},[]),{userNodes:f}=(0,Y.M)({nodes:t}),{userNodes:x}=(0,Y.M)({nodes:n}),{nodesIssues:g,warningFlag:y}=(0,G.i)({nodes:x}),{sortedNodes:j}=(0,Q.L)({nodesIssues:g,nodes:x}),[C,w]=(0,i.useState)(),N=C||((null==f?void 0:f.length)?"user":"nodes"),b=(0,i.useMemo)(()=>{let e=[{id:"nodes",name:"All compute nodes"},{id:"user",name:"My compute nodes",label:y?{label:(0,r.jsx)(c.Cc,{children:y}),position:"top"}:void 0}];return e},[y]),k=(0,i.useMemo)(()=>{if(n)return n.filter(e=>d.isLinkableBy(e,u)[0])},[n,d,u]),P=!(null==k?void 0:k.length)||"nodes"!==N,R=!P&&(void 0!==m?m:!!l),Z=(0,i.useMemo)(()=>R&&l?k:n,[l,n,k,R]),{list:D,loadItemsDisabled:_,handleLoadItems:S}=(0,c.fw)({list:Z,itemsPerPage:20,numberOfPages:2}),I=(0,et.useRouter)(),{handleLink:E,handleUnlink:T}=(0,v.i)(),B=(0,i.useCallback)(async e=>{if(!(null==u?void 0:u.hash))return!1;let t=await E(e,u.hash);return t&&I.replace("/account/earn/ccn/".concat(u.hash)),t},[E,I,u]),L=(0,i.useCallback)(async e=>{let t=await T(e);return t&&(null==u?void 0:u.hash)&&I.replace("/account/earn/ccn/".concat(u.hash)),t},[T,I,u]),{specs:M}=(0,en.O)({nodes:t}),z=(0,i.useMemo)(()=>{let e=Object.values(M);return e.reduce((e,t)=>{var n,r,a,i,o,s;return e.cpu+=(null===(r=t.data)||void 0===r?void 0:null===(n=r.cpu)||void 0===n?void 0:n.count)||0,e.ram+=((null===(i=t.data)||void 0===i?void 0:null===(a=i.mem)||void 0===a?void 0:a.total_kB)||0)/1024,e.hdd+=((null===(s=t.data)||void 0===s?void 0:null===(o=s.disk)||void 0===o?void 0:o.total_kB)||0)/1024,e.nodes+=t.data?1:0,e.total+=1,e},{cpu:0,ram:0,hdd:0,nodes:0,total:0})},[M]);return{nodes:t,userNodes:f,filteredUserNodes:j,userNodesIssues:g,userNode:u,selectedTab:N,tabs:b,isLinkableOnly:R,isLinkableOnlyDisabled:P,totalResources:z,paginatedSortedFilteredNodes:D,loadItemsDisabled:_,handleLoadItems:S,handleLink:B,handleUnlink:L,handleTabChange:w,handleLinkableOnlyChange:p,showInactive:a,handleShowInactiveChange:o,...s}}(e),{render:M}=(0,A.W)(),z=(0,r.jsx)(d(),{href:ei.cr.account.earn.crn.new,passHref:!0,legacyBehavior:!0,children:(0,r.jsxs)(es,{color:"main0",kind:"gradient",variant:"secondary",size:"md",disabled:!t,children:[(0,r.jsx)(c.JO,{name:"key"}),"Create compute node"]})});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{children:"Account | Aleph Cloud"}),(0,r.jsx)("meta",{name:"description",content:"Aleph Cloud Account Dashboard"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,r.jsx)(ea.F,{$variant:"xl",children:(0,r.jsxs)("section",{children:[(0,r.jsx)(el,{type:"h5",forwardedAs:"h1",children:"Compute nodes"}),(0,r.jsx)(Z.Z,{buttons:z,children:(0,r.jsxs)(ed,{children:[(0,r.jsxs)(ec,{children:[(0,r.jsx)(eu,{children:(0,r.jsx)(_.Z,{nodes:n,title:"CRN NETWORK HEALTH"})}),(0,r.jsxs)(em,{children:[(0,r.jsx)(eh,{children:(0,r.jsx)(E,{nodes:n,title:"TOP HOSTING PROVIDER"})}),(0,r.jsx)(ep,{children:(0,r.jsx)(H,{title:"TOTAL NETWORK RESOURCES",resources:j})})]})]}),(0,r.jsxs)(ef,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(ex,{className:"tp-h7",children:"What is a compute node?"}),(0,r.jsx)("p",{className:"fs-16",children:"Anyone can set up a Compute Resource Node (CRN) to contribute to our decentralized network. These nodes play a crucial role in our ecosystem, enabling various services. While no commitment is needed to establish a CRN, to unlock a minimum wage for your CRN, it needs the endorsement of a Core Channel Node (CCN). A CCN operator can vouch for up to five CRNs, ensuring fair and balanced participation."}),(0,r.jsx)(R.Z,{href:"https://docs.aleph.cloud/nodes/compute/installation/ubuntu-24.04/",children:"Node Setup Guide"})]}),(0,r.jsx)(ev,{children:z})]})]})}),(0,r.jsxs)(eg,{children:[(0,r.jsxs)(ey,{children:[(0,r.jsxs)(ej,{children:[(0,r.jsx)(c.mQ,{tabs:h,align:"left",selected:p,onTabChange:T}),(0,r.jsx)(c.XZ,{label:"Ready to link",checked:g,onChange:L,size:"xs",disabled:y}),(0,r.jsx)(c.XZ,{label:"Show inactive nodes",checked:w,onChange:N,size:"xs"})]}),(0,r.jsx)(c.oi,{value:f,name:"filter-ccn",placeholder:"Search me",onChange:B,icon:(0,r.jsx)(c.JO,{name:"search"})})]}),(0,r.jsxs)(eC,{children:[(0,r.jsx)(D.Z,{show:!M||!n}),M&&(0,r.jsx)(r.Fragment,{children:"user"===p?(0,r.jsx)(r.Fragment,{children:n&&l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b,{nodes:n,filteredNodes:l,nodesIssues:u,userNode:m,account:t,lastVersion:x,handleLink:S,handleUnlink:I}),(0,r.jsx)(ew,{children:t?(null==o?void 0:o.length)?"":"You have no compute node running.":"Connect your wallet to see your compute node running."})]})}):(0,r.jsx)(r.Fragment,{children:n&&(0,r.jsx)(b,{nodes:n,filteredNodes:a,loadItemsDisabled:C,handleLoadItems:k,handleSortItems:P,userNode:m,account:t,lastVersion:x,handleLink:S,handleUnlink:I})})})]})]})]})})]})};ComputeResourceNodesPage.displayName="ComputeResourceNodesPage";var eo=(0,i.memo)(ComputeResourceNodesPage),es=(0,a.ZP)(c.zx)({gap:"0.625rem"}),el=(0,a.ZP)(c.DU)({marginBottom:"2rem"}),ed=(0,a.ZP)("div")({display:"flex",flexWrap:"wrap",alignItems:"flex-start",gap:"1.5rem","@media (min-width: 87.5rem)":{flexWrap:"nowrap"}}),ec=(0,a.ZP)("div")({order:"2",display:"flex",maxWidth:"100%",flex:"1 1 auto",flexWrap:"wrap",alignItems:"stretch",gap:"1.5rem","@media (min-width: 87.5rem)":{order:"0",flex:"none",flexWrap:"nowrap"}}),eu=(0,a.ZP)("div")({maxWidth:"100%",flex:"1 1 auto","@media (min-width: 87.5rem)":{flex:"none"}}),em=(0,a.ZP)("div")({display:"flex",flex:"1 1 auto",flexWrap:"wrap",alignItems:"stretch",gap:"1.5rem","@media (min-width: 36rem)":{flexWrap:"nowrap"},"@media (min-width: 87.5rem)":{flex:"none"}}),eh=(0,a.ZP)("div")({flex:"1 1 0%"}),ep=(0,a.ZP)("div")({flex:"1 1 0%"}),ef=(0,a.ZP)("div")({display:"flex",flex:"1 1 auto",flexDirection:"column",justifyContent:"space-between",alignSelf:"stretch"}),ex=(0,a.ZP)("h1")({marginBottom:"0px"}),ev=(0,a.ZP)("div")({marginBottom:"1rem",marginTop:"1.5rem","@media (min-width: 87.5rem)":{marginBottom:"0px"}}),eg=(0,a.ZP)("div")({marginTop:"3.5rem"}),ey=(0,a.ZP)("div")({marginBottom:"2rem",display:"flex",flexDirection:"column",flexWrap:"wrap",alignItems:"stretch",justifyContent:"space-between",gap:"2.5rem","@media (min-width: 48rem)":{flexDirection:"row",alignItems:"flex-end"}}),ej=(0,a.ZP)("div")({display:"flex",flexDirection:"column",flexWrap:"wrap",alignItems:"flex-start",gap:"2.5rem","@media (min-width: 36rem)":{flexDirection:"row",alignItems:"center",gap:"1rem"}}),eC=(0,a.ZP)("div")({position:"relative"}),ew=(0,a.ZP)("div").withConfig({displayName:"cmp___StyledDiv11",componentId:"sc-1ot5hqp-0"})({marginLeft:"1rem",marginRight:"1rem",marginTop:"2.5rem",marginBottom:"2.5rem",textAlign:"center",opacity:"0.6"}),eN=eo}},function(e){e.O(0,[5675,4669,2583,9774,2888,179],function(){return e(e.s=3274)}),_N_E=e.O()}]);