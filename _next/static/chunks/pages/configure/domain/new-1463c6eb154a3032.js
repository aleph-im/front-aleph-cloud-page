(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[574],{52684:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/configure/domain/new",function(){return s(99817)}])},34517:function(e,r,s){"use strict";s.d(r,{Z:function(){return p}});var d=s(85893),l=s(67294),c=s(41664),m=s.n(c),u=s(72771);let ButtonLink=e=>{let{href:r,variant:s="secondary",color:l="main0",kind:c="default",size:p="md",disabled:f,children:g,...h}=e,y=(0,d.jsx)(u.zx,{as:f?void 0:"a",variant:s,color:l,kind:c,size:p,disabled:f,...h,children:g});return f?y:(0,d.jsx)(m(),{href:r,passHref:!0,legacyBehavior:!0,children:y})};ButtonLink.displayName="ButtonLink";var p=(0,l.memo)(ButtonLink)},93963:function(e,r,s){"use strict";s.d(r,{Z:function(){return m}});var d=s(19521);let l={xl:90,lg:60.0625,md:44.6875},c=d.ZP.div.withConfig({displayName:"styles__StyledContainer",componentId:"sc-1bpjbi2-0"})(["",""],e=>{let{$variant:r="lg"}=e;return(0,d.iv)([""," max-width:","rem;"],{marginLeft:"auto",marginRight:"auto",width:"100%",paddingLeft:"1.5rem",paddingRight:"1.5rem","@media (min-width: 62rem)":{paddingLeft:"4rem",paddingRight:"4rem"}},l[r])});var m=c},49531:function(e,r,s){"use strict";s.d(r,{N:function(){return m}});var d=s(85893),l=s(67294),c=s(72771);let SectionTitle=e=>(0,d.jsx)(c.NP,{as:"h2",color:"main0",numberColor:"main0",...e});SectionTitle.displayName="SectionTitle";var m=(0,l.memo)(SectionTitle)},87699:function(e,r,s){"use strict";s.d(r,{Z:function(){return p}});var d=s(85893),l=s(19521),c=s(67294),m=s(72771);let u=(0,l.ZP)(m.zx).attrs(e=>({...e,forwardedAs:"a",kind:"default",variant:"textOnly",color:"main0",size:"md"})).withConfig({displayName:"styles__StyledExternalLinkButton",componentId:"sc-1fpmkx0-0"})([""]),ExternalLinkButton=e=>{let{children:r,href:s,...l}=e;return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(f,{href:s,target:"_blank",...l,children:[r||s,(0,d.jsx)(m.JO,{name:"square-up-right"})]})})};ExternalLinkButton.displayName="ExternalLinkButton";var p=(0,c.memo)(ExternalLinkButton),f=(0,l.ZP)(u).withConfig({displayName:"cmp___StyledStyledExternalLinkButton",componentId:"sc-7jgrdd-0"})({display:"inline-flex",alignItems:"center",gap:"0.625rem"})},75650:function(e,r,s){"use strict";s.d(r,{l:function(){return cmp},Z:function(){return cmp}});var d=s(85893),l=s(19521);let c=l.ZP.form.withConfig({displayName:"styles__StyledForm",componentId:"sc-faebcb-0"})(["",""],{display:"flex",flex:"1 1 0%",flexDirection:"column"});var m=s(72771),u=s(93963),cmp=e=>{let{children:r,onSubmit:s,errors:l}=e;return(0,d.jsxs)(c,{onSubmit:s,noValidate:!0,children:[r,(null==l?void 0:l.root)&&(0,d.jsx)(u.Z,{children:Object.values(l.root).map(e=>(0,d.jsx)(p,{error:e},e+""))})]})},p=(0,l.ZP)(m.Xq).withConfig({displayName:"cmp___StyledFormError",componentId:"sc-tai6p3-0"})({wordBreak:"break-all"})},24959:function(e,r,s){"use strict";s.d(r,{c:function(){return useForm}});var d=s(72771),l=s(67294),c=s(87536),m=s(1604);function useForm(e){let{onSubmit:r,onSuccess:s,onError:u,readyDeps:p=[],...f}=e,g=(0,c.cI)(f);(0,l.useEffect)(()=>{"object"==typeof f.defaultValues&&g.reset(f.defaultValues)},[...p]);let[h,y]=(0,l.useState)({data:void 0,error:void 0,loading:!1}),[v,{onLoad:x,onSuccess:_,onError:b}]=(0,d.g7)({flushData:!0,state:h,setState:y,onSuccess:s,onError:u}),j=(0,l.useCallback)(async e=>{try{x();let s=await r(e);_(s)}catch(r){let e=r instanceof m.jm?Error("Validation error, check highlighted form fields"):(null==r?void 0:r.cause)||r;g.setError("root.serverError",{...e,message:null==e?void 0:e.message}),b(e)}},[g,b,x,r,_]),w=(0,l.useCallback)(async e=>{let r;if(console.log(e),!r){let s=function getFirstError(e){let[r]=Object.entries(e);if(!r)return;let[s,d]=r;if(Array.isArray(d)){let e=d[d.length-1];return getFirstError(e)}return[s,d]}(e);if(s){let[e,d]=s,l="string"==typeof d?d:(null==d?void 0:d.message)?": ".concat(d.message):(null==d?void 0:d.type)?': "'.concat(null==d?void 0:d.type,'" validation not satisfied'):"";r=Error('Error on field "'.concat(e,'"').concat(l))}}r||(r=Error("Validation error")),b(r)},[b]),S=(0,l.useMemo)(()=>g.handleSubmit(j,w),[g,j,w]);return{...g,requestState:v,handleSubmit:S}}},80380:function(e,r,s){"use strict";s.d(r,{A:function(){return useDomainManager}});var d=s(51079);function useDomainManager(){let[e]=(0,d.mr)(),{domainManager:r}=e;return r}},53424:function(e,r,s){"use strict";s.d(r,{Pg:function(){return m},Q1:function(){return useDomainItem},Qd:function(){return useAddDomains}});var d=s(9911),l=s(67294),c=s(87536);let m={name:"",ref:"",target:d.vs.Instance,programType:d.py.Instance};function useDomainItem(e){let{name:r="domains",index:s,control:d,defaultValue:m,onRemove:u}=e,p=(0,c.bc)({control:d,name:"".concat(r,".").concat(s,".name"),defaultValue:null==m?void 0:m.name}),f=(0,l.useCallback)(()=>{u(s)},[s,u]);return{nameCtrl:p,handleRemove:f}}function useAddDomains(e){let{name:r="domains",control:s,entityType:d}=e,u=(0,c.Dq)({control:s,name:r,shouldUnregister:!0}),{fields:p,remove:f,append:g}=u,h=(0,l.useCallback)(()=>{g({...m,programType:d})},[g,d]);return{name:r,control:s,fields:p,handleAdd:h,handleRemove:f}}},99817:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return NewDomain}});var d=s(85893),l=s(19521),c=s(67294),m=s(72771),u=s(34517),p=s(93963),f=s(87699),g=s(75650),h=s(9911),y=s(11163),v=s(24959),x=s(80380),_=s(51079),b=s(13731),j=s(11525),w=s(87536),S=s(56312),k=s(53424);let I={...k.Pg};var P=s(49531);function NewDomain(){let{entities:e,hasEntities:r,hasFunctions:s,hasInstances:l,nameCtrl:k,programTypeCtrl:V,refCtrl:O,ipfsRefCtrl:R,errors:q,handleSubmit:U}=function(){let e=(0,y.useRouter)(),r=(0,x.A)(),[{accountInstances:s,accountFunctions:d},l]=(0,_.mr)(),m=(0,c.useCallback)(async s=>{if(!r)throw Error("Manager not ready");let[d]=await r.add(s);l({type:b.MF.addAccountDomain,payload:{accountDomain:d}}),await e.replace("/")},[l,r,e]),{control:u,handleSubmit:p,setValue:f,formState:{errors:g}}=(0,v.c)({defaultValues:I,onSubmit:m,resolver:(0,S.F)(j.Y.addSchema)}),k=(0,w.bc)({control:u,name:"name"}),P=(0,w.bc)({control:u,name:"programType",rules:{onChange(e){f("ref",""),e.target.value===h.py.Program?f("target",h.vs.Program):e.target.value===h.py.Instance&&f("target",h.vs.Instance)}}}),C=(0,w.bc)({control:u,name:"ref"}),N=(0,w.bc)({control:u,name:"ref",rules:{onChange(){f("target",h.vs.IPFS)}}}),E=P.field.value,Z=(0,c.useMemo)(()=>{let e=E?E===h.py.Instance?s:d:[];return(e||[]).map(e=>{let{id:r,metadata:s,type:d}=e;return{label:(null==s?void 0:s.name)||r,value:r,type:d}})},[E,s,d]),T=(0,c.useMemo)(()=>!!(null==s?void 0:s.length),[s]),z=(0,c.useMemo)(()=>!!(null==d?void 0:d.length),[d]),B=(0,c.useMemo)(()=>T||z,[z,T]);return(0,c.useEffect)(()=>{(T||z)&&(E!==h.py.Instance||T||f("programType",h.py.Program),E!==h.py.Program||z||f("programType",h.py.Instance))},[E,z,T,f]),{entities:Z,hasInstances:T,hasFunctions:z,hasEntities:B,nameCtrl:k,programTypeCtrl:P,refCtrl:C,ipfsRefCtrl:N,errors:g,handleSubmit:p}}(),[J,Q]=(0,c.useState)("compute");return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(g.Z,{onSubmit:U,errors:q,children:r?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(E,{children:(0,d.jsxs)(p.Z,{children:[(0,d.jsx)(P.N,{number:"1",children:"Custom domain"}),(0,d.jsx)(Z,{children:"Assign a user-friendly domain to your instance or function to not only simplify access to your web3 application but also enhance its professional appearance. This is an effective way to elevate user experience, establish brand identity or streamline the navigation process within your application."}),(0,d.jsx)(m.Jy,{children:(0,d.jsx)(m.oi,{...k.field,...k.fieldState,required:!0,label:"Enter your desired custom domain in the field below",placeholder:"yourdomain.io"})}),(0,d.jsx)(T,{children:(0,d.jsx)(f.Z,{href:"https://docs.aleph.im/computing/custom%20domain/Adding%20a%20Custom%20Domain/",children:"Learn more"})})]})}),(0,d.jsx)(z,{children:(0,d.jsxs)(p.Z,{children:[(0,d.jsx)(P.N,{number:"2",children:"Select Resource"}),(0,d.jsx)(B,{children:"You'll need to specify the resource your custom domain will be associated with. This could either be an instance or a function, depending on what you want your custom domain to point to."}),(0,d.jsx)(D,{children:(0,d.jsx)(m.mQ,{align:"left",selected:J,onTabChange:Q,tabs:[{id:"compute",name:"Compute"},{id:"ipfs",name:"IPFS"}]})}),(0,d.jsx)("div",{role:"tabpanel",children:"compute"===J?(0,d.jsxs)(A,{children:[(0,d.jsxs)(m.Ee,{...V.field,...V.fieldState,required:!0,label:"Choose resource type",direction:"row",children:[(0,d.jsx)(m.Y8,{label:h.K_[h.py.Instance],value:h.py.Instance,disabled:!l}),(0,d.jsx)(m.Y8,{label:h.K_[h.py.Program],value:h.py.Program,disabled:!s})]}),e.length>0&&(0,d.jsx)(L,{children:(0,d.jsx)(m.Lt,{...O.field,...O.fieldState,required:!0,label:"Select the specific resource from the dropdown",children:e.map(e=>{let{label:r,value:s}=e;return(0,d.jsx)(m.Qr,{value:s,children:r},s)})})})]}):"ipfs"===J?(0,d.jsxs)("div",{children:[(0,d.jsx)(F,{children:"To get started, provide the corresponding IPFS content identifier (Message ID)."}),(0,d.jsx)(m.Jy,{children:(0,d.jsx)(m.oi,{...R.field,...R.fieldState,required:!0,label:"Link your custom domain to an Aleph Message ID",placeholder:"Paste your IPFS Aleph Message ID"})})]}):(0,d.jsx)(d.Fragment,{})}),(0,d.jsx)(M,{children:(0,d.jsx)(m.zx,{type:"submit",color:"main0",kind:"default",size:"md",variant:"primary",children:"Create domain"})})]})})]}):(0,d.jsx)(C,{children:(0,d.jsxs)(p.Z,{children:[(0,d.jsx)("p",{children:"A domain should be linked to an existing resource. Try to create an instance or function first"}),(0,d.jsx)(N,{children:(0,d.jsx)(u.Z,{variant:"primary",href:"/computing/instance/new",children:"Create your first instance"})})]})})})})}var C=(0,l.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-1s90kzb-0"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),N=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1s90kzb-1"})({marginTop:"2.5rem",textAlign:"center"}),E=(0,l.ZP)("section").withConfig({displayName:"cmp___StyledSection2",componentId:"sc-1s90kzb-2"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),Z=(0,l.ZP)("p").withConfig({displayName:"cmp___StyledP",componentId:"sc-1s90kzb-3"})({marginBottom:"1.5rem"}),T=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-1s90kzb-4"})({marginTop:"1.5rem",textAlign:"right"}),z=(0,l.ZP)("section").withConfig({displayName:"cmp___StyledSection3",componentId:"sc-1s90kzb-5"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),B=(0,l.ZP)("p").withConfig({displayName:"cmp___StyledP2",componentId:"sc-1s90kzb-6"})({marginBottom:"1.5rem"}),D=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-1s90kzb-7"})({marginTop:"2.5rem",marginBottom:"2.5rem"}),A=(0,l.ZP)(m.Jy).withConfig({displayName:"cmp___StyledNoisyContainer",componentId:"sc-1s90kzb-8"})({zIndex:"10 !important"}),L=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-1s90kzb-9"})({marginTop:"2.5rem"}),F=(0,l.ZP)("p").withConfig({displayName:"cmp___StyledP3",componentId:"sc-1s90kzb-10"})({marginBottom:"1.5rem"}),M=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-1s90kzb-11"})({zIndex:"0",marginTop:"2.5rem",textAlign:"center"})},56312:function(e,r,s){"use strict";s.d(r,{F:function(){return zod_t}});var d=s(87536),t=function(e,r,s){if(e&&"reportValidity"in e){var l=(0,d.U2)(s,r);e.setCustomValidity(l&&l.message||""),e.reportValidity()}},resolvers_i=function(e,r){var i=function(s){var d=r.fields[s];d&&d.ref&&"reportValidity"in d.ref?t(d.ref,s,e):d.refs&&d.refs.forEach(function(r){return t(r,s,e)})};for(var s in r.fields)i(s)},n=function(e,r){r.shouldUseNativeValidation&&resolvers_i(e,r);var s={};for(var l in e){var c=(0,d.U2)(r.fields,l),m=Object.assign(e[l]||{},{ref:c&&c.ref});if(a(r.names||Object.keys(e),l)){var u=Object.assign({},o((0,d.U2)(s,l)));(0,d.t8)(u,"root",m),(0,d.t8)(s,l,u)}else(0,d.t8)(s,l,m)}return s},o=function(e){return Array.isArray(e)?e.filter(Boolean):[]},a=function(e,r){return e.some(function(e){return e.startsWith(r+".")})},zod_n=function(e,r){for(var s={};e.length;){var l=e[0],c=l.code,m=l.message,u=l.path.join(".");if(!s[u]){if("unionErrors"in l){var p=l.unionErrors[0].errors[0];s[u]={message:p.message,type:p.code}}else s[u]={message:m,type:c}}if("unionErrors"in l&&l.unionErrors.forEach(function(r){return r.errors.forEach(function(r){return e.push(r)})}),r){var f=s[u].types,g=f&&f[l.code];s[u]=(0,d.KN)(u,r,s,c,g?[].concat(g,l.message):l.message)}e.shift()}return s},zod_t=function(e,r,s){return void 0===s&&(s={}),function(d,l,c){try{return Promise.resolve(function(l,m){try{var u=Promise.resolve(e["sync"===s.mode?"parse":"parseAsync"](d,r)).then(function(e){return c.shouldUseNativeValidation&&resolvers_i({},c),{errors:{},values:s.raw?d:e}})}catch(e){return m(e)}return u&&u.then?u.then(void 0,m):u}(0,function(e){if(null!=e.errors)return{values:{},errors:n(zod_n(e.errors,!c.shouldUseNativeValidation&&"all"===c.criteriaMode),c)};throw e}))}catch(e){return Promise.reject(e)}}}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=52684)}),_N_E=e.O()}]);