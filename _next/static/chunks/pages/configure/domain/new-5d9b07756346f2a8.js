(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[574],{52684:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/configure/domain/new",function(){return s(99817)}])},34517:function(e,r,s){"use strict";s.d(r,{Z:function(){return p}});var c=s(85893),l=s(67294),d=s(41664),u=s.n(d),m=s(79632);let ButtonLink=e=>{let{href:r,variant:s="secondary",color:l="main0",kind:d="default",size:p="md",disabled:f,children:g,...y}=e,h=(0,c.jsx)(m.zx,{as:f?void 0:"a",variant:s,color:l,kind:d,size:p,disabled:f,...y,children:g});return f?h:(0,c.jsx)(u(),{href:r,passHref:!0,legacyBehavior:!0,children:h})};ButtonLink.displayName="ButtonLink";var p=(0,l.memo)(ButtonLink)},93963:function(e,r,s){"use strict";s.d(r,{Z:function(){return u}});var c=s(19521);let l={xl:90,lg:60.0625,md:44.6875},d=c.ZP.div.withConfig({displayName:"styles__StyledContainer",componentId:"sc-1bpjbi2-0"})(["",""],e=>{let{$variant:r="lg"}=e;return(0,c.iv)([""," max-width:","rem;"],{marginLeft:"auto",marginRight:"auto",width:"100%",paddingLeft:"1.5rem",paddingRight:"1.5rem","@media (min-width: 62rem)":{paddingLeft:"4rem",paddingRight:"4rem"}},l[r])});var u=d},49531:function(e,r,s){"use strict";s.d(r,{N:function(){return u}});var c=s(85893),l=s(67294),d=s(79632);let SectionTitle=e=>(0,c.jsx)(d.NP,{as:"h2",color:"main0",numberColor:"main0",...e});SectionTitle.displayName="SectionTitle";var u=(0,l.memo)(SectionTitle)},87699:function(e,r,s){"use strict";s.d(r,{Z:function(){return p}});var c=s(85893),l=s(19521),d=s(67294),u=s(79632);let m=(0,l.ZP)(u.zx).attrs(e=>({...e,forwardedAs:"a",kind:"default",variant:"textOnly",color:"main0",size:"md"})).withConfig({displayName:"styles__StyledExternalLinkButton",componentId:"sc-1fpmkx0-0"})([""]),ExternalLinkButton=e=>{let{children:r,href:s,...l}=e;return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(f,{href:s,target:"_blank",...l,children:[r||s,(0,c.jsx)(u.JO,{name:"square-up-right"})]})})};ExternalLinkButton.displayName="ExternalLinkButton";var p=(0,d.memo)(ExternalLinkButton),f=(0,l.ZP)(m).withConfig({displayName:"cmp___StyledStyledExternalLinkButton",componentId:"sc-7jgrdd-0"})({display:"inline-flex",alignItems:"center",gap:"0.625rem"})},75650:function(e,r,s){"use strict";s.d(r,{l:function(){return cmp},Z:function(){return cmp}});var c=s(85893),l=s(19521);let d=l.ZP.form.withConfig({displayName:"styles__StyledForm",componentId:"sc-faebcb-0"})(["",""],{display:"flex",flex:"1 1 0%",flexDirection:"column"});var u=s(79632),m=s(93963),cmp=e=>{let{children:r,onSubmit:s,errors:l}=e;return(0,c.jsxs)(d,{onSubmit:s,noValidate:!0,children:[r,(null==l?void 0:l.root)&&(0,c.jsx)(m.Z,{children:Object.values(l.root).map(e=>(0,c.jsx)(p,{error:e},e+""))})]})},p=(0,l.ZP)(u.Xq).withConfig({displayName:"cmp___StyledFormError",componentId:"sc-tai6p3-0"})({wordBreak:"break-all"})},24959:function(e,r,s){"use strict";s.d(r,{c:function(){return useForm}});var c=s(79632),l=s(67294),d=s(87536),u=s(1604);function useForm(e){let{onSubmit:r,onSuccess:s,onError:m,readyDeps:p=[],...f}=e,g=(0,d.cI)(f);(0,l.useEffect)(()=>{"object"==typeof f.defaultValues&&g.reset(f.defaultValues)},[...p]);let[y,h]=(0,l.useState)({data:void 0,error:void 0,loading:!1}),[v,{onLoad:x,onSuccess:_,onError:w}]=(0,c.g7)({flushData:!0,state:y,setState:h,onSuccess:s,onError:m}),b=(0,l.useCallback)(async e=>{try{x();let s=await r(e);_(s)}catch(r){let e=r instanceof u.jm?Error("Validation error, check highlighted form fields"):(null==r?void 0:r.cause)||r;g.setError("root.serverError",{...e,message:null==e?void 0:e.message}),w(e)}},[g,w,x,r,_]),j=(0,l.useCallback)(async e=>{let r;if(console.log(e),!r){let s=function getFirstError(e){let[r]=Object.entries(e);if(!r)return;let[s,c]=r;if(Array.isArray(c)){let e=c[c.length-1];return getFirstError(e)}return[s,c]}(e);if(s){let[e,c]=s,l="string"==typeof c?c:(null==c?void 0:c.message)?": ".concat(c.message):(null==c?void 0:c.type)?': "'.concat(null==c?void 0:c.type,'" validation not satisfied'):"";r=Error('Error on field "'.concat(e,'"').concat(l))}}r||(r=Error("Validation error")),w(r)},[w]),S=(0,l.useMemo)(()=>g.handleSubmit(b,j),[g,b,j]);return{...g,requestState:v,handleSubmit:S}}},80380:function(e,r,s){"use strict";s.d(r,{A:function(){return useDomainManager}});var c=s(55640);function useDomainManager(){let[e]=(0,c.mr)(),{domainManager:r}=e.manager;return r}},53424:function(e,r,s){"use strict";s.d(r,{Pg:function(){return u},Q1:function(){return useDomainItem},Qd:function(){return useAddDomains}});var c=s(9911),l=s(67294),d=s(87536);let u={name:"",ref:"",target:c.vs.Instance,programType:c.py.Instance};function useDomainItem(e){let{name:r="domains",index:s,control:c,defaultValue:u,onRemove:m}=e,p=(0,d.bc)({control:c,name:"".concat(r,".").concat(s,".name"),defaultValue:null==u?void 0:u.name}),f=(0,l.useCallback)(()=>{m(s)},[s,m]);return{nameCtrl:p,handleRemove:f}}function useAddDomains(e){let{name:r="domains",control:s,entityType:c}=e,m=(0,d.Dq)({control:s,name:r,shouldUnregister:!0}),{fields:p,remove:f,append:g}=m,y=(0,l.useCallback)(()=>{g({...u,programType:c})},[g,c]);return{name:r,control:s,fields:p,handleAdd:y,handleRemove:f}}},86780:function(e,r,s){"use strict";s.d(r,{n:function(){return _},A:function(){return useCheckoutNotification}});var c=s(85893),l=s(19521),d=s(67294),u=s(79632);let m=(0,d.memo)(e=>{let{isActive:r,step:s,total:l,title:d,content:u}=e;return(0,c.jsxs)(f,{$_css:[!r&&{opacity:"0.3"}],children:[(0,c.jsxs)(g,{className:"tp-h7",children:[(0,c.jsxs)(y,{children:[d,r&&(0,c.jsx)(h,{name:"arrows-rotate",size:"0.8em"})]}),(0,c.jsxs)("div",{className:"tp-body2 fs-18",children:[s+1,"/",l]})]}),(0,c.jsx)("div",{className:"tp-body1",children:u})]})});var p=(0,d.memo)(e=>{let{steps:r,activeStep:s}=e;return(0,c.jsx)(v,{children:r.map((e,l)=>(0,c.jsx)(m,{step:l,total:r.length,isActive:l===s,...e},l))})}),f=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1ydaly9-0"})(["",""],e=>e.$_css),g=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-1ydaly9-1"})({marginBottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"space-between"}),y=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-1ydaly9-2"})({display:"flex",alignItems:"center",gap:"1rem"}),h=(0,l.ZP)(u.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-1ydaly9-3"})({"@keyframes spin":{to:{transform:"rotate(360deg)"}},animation:"spin 1s linear infinite"}),v=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-1ydaly9-4"})({display:"flex",flexDirection:"column",gap:"2rem"}),x=s(69060);function useCheckoutNotification(e){let{steps:r}=e,s=(0,u.lm)(),l=(0,d.useRef)(0),m="CHECKOUT-NOTI",f=(0,d.useCallback)(async e=>{if(!s)throw Error("Notifications not ready");let d=e||r||[];console.log("steps",d),s.del(m),await (0,x._v)(200),s.set(m,{id:m,timeout:0,variant:"warning",content:(0,c.jsx)(p,{activeStep:l.current,steps:d})}),l.current+=1},[s,r]),g=(0,d.useCallback)(async()=>{if(!s)throw Error("Notifications not ready");l.current=0,s.del(m),await (0,x._v)(2e3)},[s]);return{next:f,stop:g}}let _={stream:{title:"Sign PAYG",content:"By signing this, you authorise the initiation of a token stream for billing, ensuring a seamless and efficient payment process aligning costs directly with your usage."},volume:{title:"Sign Volume",content:"This step involves signing the volume configuration and is required if you've set up additional storage volume for your instance or function."},ssh:{title:"Sign SSH",content:"This step is crucial for securing remote access to your instance. By signing this, you confirm the SSH keys configuration, enabling encrypted communication with your server."},instance:{title:"Sign instance creation",content:"By signing this, you confirm the creation of your new instance on Twentysix.cloud. This step finalises the setup options you've chosen, including resources, configurations, and any additional features."},program:{title:"Sign function creation",content:"By signing this, you confirm the creation of your new function (and the volume containing the code if it were necessary) on Twentysix.cloud. This step finalises the setup options you've chosen, including resources, configurations, and any additional features."},domain:{title:"Sign custom domain",content:"This final step confirms your custom domain settings and integrates it with your instance."}}},99817:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return NewDomain}});var c=s(85893),l=s(19521),d=s(67294),u=s(79632),m=s(34517),p=s(93963),f=s(87699),g=s(75650),y=s(9911),h=s(11163),v=s(24959),x=s(80380),_=s(55640),w=s(11525),b=s(87536),j=s(56312),S=s(53424),k=s(86780),N=s(9324);let C={...S.Pg};var I=s(49531);function NewDomain(){let{entities:e,hasEntities:r,hasFunctions:s,hasInstances:l,nameCtrl:S,programTypeCtrl:O,refCtrl:R,ipfsRefCtrl:q,errors:U,handleSubmit:J}=function(){let e=(0,h.useRouter)(),[r,s]=(0,_.mr)(),{entities:c}=r.instance,{entities:l}=r.program,u=(0,x.A)(),{next:m,stop:p}=(0,k.A)({}),f=(0,d.useCallback)(async r=>{if(!u)throw Error("Manager not ready");let c=await u.getSteps(r),l=c.map(e=>k.n[e]),d=u.addSteps(r);try{let r;for(;!r;){let{value:e,done:s}=await d.next();if(s){r=e[0];break}await m(l)}s(new N.Wy({name:"domain",entities:r})),await e.replace("/")}finally{await p()}},[s,u,m,e,p]),{control:g,handleSubmit:S,setValue:I,formState:{errors:P}}=(0,v.c)({defaultValues:C,onSubmit:f,resolver:(0,j.F)(w.Y.addSchema)}),E=(0,b.bc)({control:g,name:"name"}),T=(0,b.bc)({control:g,name:"programType",rules:{onChange(e){I("ref",""),e.target.value===y.py.Program?I("target",y.vs.Program):e.target.value===y.py.Instance&&I("target",y.vs.Instance)}}}),Z=(0,b.bc)({control:g,name:"ref"}),B=(0,b.bc)({control:g,name:"ref",rules:{onChange(){I("target",y.vs.IPFS)}}}),z=T.field.value,D=(0,d.useMemo)(()=>{let e=z?z===y.py.Instance?c:l:[];return(e||[]).map(e=>{let{id:r,metadata:s,type:c}=e;return{label:(null==s?void 0:s.name)||r,value:r,type:c}})},[z,c,l]),A=(0,d.useMemo)(()=>!!(null==c?void 0:c.length),[c]),L=(0,d.useMemo)(()=>!!(null==l?void 0:l.length),[l]),F=(0,d.useMemo)(()=>A||L,[L,A]);return(0,d.useEffect)(()=>{(A||L)&&(z!==y.py.Instance||A||I("programType",y.py.Program),z!==y.py.Program||L||I("programType",y.py.Instance))},[z,L,A,I]),{entities:D,hasInstances:A,hasFunctions:L,hasEntities:F,nameCtrl:E,programTypeCtrl:T,refCtrl:Z,ipfsRefCtrl:B,errors:P,handleSubmit:S}}(),[Y,H]=(0,d.useState)("compute");return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(g.Z,{onSubmit:J,errors:U,children:r?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(T,{children:(0,c.jsxs)(p.Z,{children:[(0,c.jsx)(I.N,{number:"1",children:"Custom domain"}),(0,c.jsx)(Z,{children:"Assign a user-friendly domain to your instance or function to not only simplify access to your web3 application but also enhance its professional appearance. This is an effective way to elevate user experience, establish brand identity or streamline the navigation process within your application."}),(0,c.jsx)(u.Jy,{children:(0,c.jsx)(u.oi,{...S.field,...S.fieldState,required:!0,label:"Enter your desired custom domain in the field below",placeholder:"yourdomain.io"})}),(0,c.jsx)(B,{children:(0,c.jsx)(f.Z,{href:"https://docs.aleph.im/computing/custom_domain/setup/",children:"Learn more"})})]})}),(0,c.jsx)(z,{children:(0,c.jsxs)(p.Z,{children:[(0,c.jsx)(I.N,{number:"2",children:"Select Resource"}),(0,c.jsx)(D,{children:"You'll need to specify the resource your custom domain will be associated with. This could either be an instance or a function, depending on what you want your custom domain to point to."}),(0,c.jsx)(A,{children:(0,c.jsx)(u.mQ,{align:"left",selected:Y,onTabChange:H,tabs:[{id:"compute",name:"Compute"},{id:"ipfs",name:"IPFS"}]})}),(0,c.jsx)("div",{role:"tabpanel",children:"compute"===Y?(0,c.jsxs)(L,{children:[(0,c.jsxs)(u.Ee,{...O.field,...O.fieldState,required:!0,label:"Choose resource type",direction:"row",children:[(0,c.jsx)(u.Y8,{label:y.K_[y.py.Instance],value:y.py.Instance,disabled:!l}),(0,c.jsx)(u.Y8,{label:y.K_[y.py.Program],value:y.py.Program,disabled:!s})]}),e.length>0&&(0,c.jsx)(F,{children:(0,c.jsx)(u.Lt,{...R.field,...R.fieldState,required:!0,label:"Select the specific resource from the dropdown",children:e.map(e=>{let{label:r,value:s}=e;return(0,c.jsx)(u.Qr,{value:s,children:r},s)})})})]}):"ipfs"===Y?(0,c.jsxs)("div",{children:[(0,c.jsx)(V,{children:"To get started, provide the corresponding IPFS content identifier (Message ID)."}),(0,c.jsx)(u.Jy,{children:(0,c.jsx)(u.oi,{...q.field,...q.fieldState,required:!0,label:"Link your custom domain to an Aleph Message ID",placeholder:"Paste your IPFS Aleph Message ID"})})]}):(0,c.jsx)(c.Fragment,{})}),(0,c.jsx)(M,{children:(0,c.jsx)(u.zx,{type:"submit",color:"main0",kind:"default",size:"md",variant:"primary",children:"Create domain"})})]})})]}):(0,c.jsx)(P,{children:(0,c.jsxs)(p.Z,{children:[(0,c.jsx)("p",{children:"A domain should be linked to an existing resource. Try to create an instance or function first"}),(0,c.jsx)(E,{children:(0,c.jsx)(m.Z,{variant:"primary",href:"/computing/instance/new",children:"Create your first instance"})})]})})})})}var P=(0,l.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-1s90kzb-0"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),E=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-1s90kzb-1"})({marginTop:"2.5rem",textAlign:"center"}),T=(0,l.ZP)("section").withConfig({displayName:"cmp___StyledSection2",componentId:"sc-1s90kzb-2"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),Z=(0,l.ZP)("p").withConfig({displayName:"cmp___StyledP",componentId:"sc-1s90kzb-3"})({marginBottom:"1.5rem"}),B=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-1s90kzb-4"})({marginTop:"1.5rem",textAlign:"right"}),z=(0,l.ZP)("section").withConfig({displayName:"cmp___StyledSection3",componentId:"sc-1s90kzb-5"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),D=(0,l.ZP)("p").withConfig({displayName:"cmp___StyledP2",componentId:"sc-1s90kzb-6"})({marginBottom:"1.5rem"}),A=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv3",componentId:"sc-1s90kzb-7"})({marginTop:"2.5rem",marginBottom:"2.5rem"}),L=(0,l.ZP)(u.Jy).withConfig({displayName:"cmp___StyledNoisyContainer",componentId:"sc-1s90kzb-8"})({zIndex:"10 !important"}),F=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv4",componentId:"sc-1s90kzb-9"})({marginTop:"2.5rem"}),V=(0,l.ZP)("p").withConfig({displayName:"cmp___StyledP3",componentId:"sc-1s90kzb-10"})({marginBottom:"1.5rem"}),M=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv5",componentId:"sc-1s90kzb-11"})({zIndex:"0",marginTop:"2.5rem",textAlign:"center"})},56312:function(e,r,s){"use strict";s.d(r,{F:function(){return zod_t}});var c=s(87536),t=function(e,r,s){if(e&&"reportValidity"in e){var l=(0,c.U2)(s,r);e.setCustomValidity(l&&l.message||""),e.reportValidity()}},resolvers_i=function(e,r){var i=function(s){var c=r.fields[s];c&&c.ref&&"reportValidity"in c.ref?t(c.ref,s,e):c.refs&&c.refs.forEach(function(r){return t(r,s,e)})};for(var s in r.fields)i(s)},n=function(e,r){r.shouldUseNativeValidation&&resolvers_i(e,r);var s={};for(var l in e){var d=(0,c.U2)(r.fields,l),u=Object.assign(e[l]||{},{ref:d&&d.ref});if(a(r.names||Object.keys(e),l)){var m=Object.assign({},o((0,c.U2)(s,l)));(0,c.t8)(m,"root",u),(0,c.t8)(s,l,m)}else(0,c.t8)(s,l,u)}return s},o=function(e){return Array.isArray(e)?e.filter(Boolean):[]},a=function(e,r){return e.some(function(e){return e.startsWith(r+".")})},zod_n=function(e,r){for(var s={};e.length;){var l=e[0],d=l.code,u=l.message,m=l.path.join(".");if(!s[m]){if("unionErrors"in l){var p=l.unionErrors[0].errors[0];s[m]={message:p.message,type:p.code}}else s[m]={message:u,type:d}}if("unionErrors"in l&&l.unionErrors.forEach(function(r){return r.errors.forEach(function(r){return e.push(r)})}),r){var f=s[m].types,g=f&&f[l.code];s[m]=(0,c.KN)(m,r,s,d,g?[].concat(g,l.message):l.message)}e.shift()}return s},zod_t=function(e,r,s){return void 0===s&&(s={}),function(c,l,d){try{return Promise.resolve(function(l,u){try{var m=Promise.resolve(e["sync"===s.mode?"parse":"parseAsync"](c,r)).then(function(e){return d.shouldUseNativeValidation&&resolvers_i({},d),{errors:{},values:s.raw?c:e}})}catch(e){return u(e)}return m&&m.then?m.then(void 0,u):m}(0,function(e){if(null!=e.errors)return{values:{},errors:n(zod_n(e.errors,!d.shouldUseNativeValidation&&"all"===d.criteriaMode),d)};throw e}))}catch(e){return Promise.reject(e)}}}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=52684)}),_N_E=e.O()}]);