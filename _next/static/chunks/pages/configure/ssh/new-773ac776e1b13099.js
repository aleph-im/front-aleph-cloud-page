(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[589],{36330:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/configure/ssh/new",function(){return s(86855)}])},93963:function(e,r,s){"use strict";s.d(r,{Z:function(){return u}});var c=s(19521);let l={xl:90,lg:60.0625,md:44.6875},d=c.ZP.div.withConfig({displayName:"styles__StyledContainer",componentId:"sc-1bpjbi2-0"})(["",""],e=>{let{$variant:r="lg"}=e;return(0,c.iv)([""," max-width:","rem;"],{marginLeft:"auto",marginRight:"auto",width:"100%",paddingLeft:"1.5rem",paddingRight:"1.5rem","@media (min-width: 62rem)":{paddingLeft:"4rem",paddingRight:"4rem"}},l[r])});var u=d},49531:function(e,r,s){"use strict";s.d(r,{N:function(){return u}});var c=s(85893),l=s(67294),d=s(72771);let SectionTitle=e=>(0,c.jsx)(d.NP,{as:"h2",color:"main0",numberColor:"main0",...e});SectionTitle.displayName="SectionTitle";var u=(0,l.memo)(SectionTitle)},75650:function(e,r,s){"use strict";s.d(r,{l:function(){return cmp},Z:function(){return cmp}});var c=s(85893),l=s(19521);let d=l.ZP.form.withConfig({displayName:"styles__StyledForm",componentId:"sc-faebcb-0"})(["",""],{display:"flex",flex:"1 1 0%",flexDirection:"column"});var u=s(72771),f=s(93963),cmp=e=>{let{children:r,onSubmit:s,errors:l}=e;return(0,c.jsxs)(d,{onSubmit:s,noValidate:!0,children:[r,(null==l?void 0:l.root)&&(0,c.jsx)(f.Z,{children:Object.values(l.root).map(e=>(0,c.jsx)(m,{error:e},e+""))})]})},m=(0,l.ZP)(u.Xq).withConfig({displayName:"cmp___StyledFormError",componentId:"sc-tai6p3-0"})({wordBreak:"break-all"})},24959:function(e,r,s){"use strict";s.d(r,{c:function(){return useForm}});var c=s(72771),l=s(67294),d=s(87536),u=s(1604);function useForm(e){let{onSubmit:r,onSuccess:s,onError:f,readyDeps:m=[],...p}=e,y=(0,d.cI)(p);(0,l.useEffect)(()=>{"object"==typeof p.defaultValues&&y.reset(p.defaultValues)},[...m]);let[h,g]=(0,l.useState)({data:void 0,error:void 0,loading:!1}),[v,{onLoad:S,onSuccess:_,onError:b}]=(0,c.g7)({flushData:!0,state:h,setState:g,onSuccess:s,onError:f}),w=(0,l.useCallback)(async e=>{try{S();let s=await r(e);_(s)}catch(r){let e=r instanceof u.jm?Error("Validation error, check highlighted form fields"):(null==r?void 0:r.cause)||r;y.setError("root.serverError",{...e,message:null==e?void 0:e.message}),b(e)}},[y,b,S,r,_]),j=(0,l.useCallback)(async e=>{let r;if(console.log(e),!r){let s=function getFirstError(e){let[r]=Object.entries(e);if(!r)return;let[s,c]=r;if(Array.isArray(c)){let e=c[c.length-1];return getFirstError(e)}return[s,c]}(e);if(s){let[e,c]=s,l="string"==typeof c?c:(null==c?void 0:c.message)?": ".concat(c.message):(null==c?void 0:c.type)?': "'.concat(null==c?void 0:c.type,'" validation not satisfied'):"";r=Error('Error on field "'.concat(e,'"').concat(l))}}r||(r=Error("Validation error")),b(r)},[b]),x=(0,l.useMemo)(()=>y.handleSubmit(w,j),[y,w,j]);return{...y,requestState:v,handleSubmit:x}}},18395:function(e,r,s){"use strict";s.d(r,{p:function(){return useSSHKeyManager}});var c=s(51079);function useSSHKeyManager(){let[e]=(0,c.mr)(),{sshKeyManager:r}=e;return r}},86855:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return NewSSHKey}});var c=s(85893),l=s(19521),d=s(93963),u=s(72771),f=s(75650),m=s(67294),p=s(11163),y=s(87536),h=s(56312),g=s(24959),v=s(18395),S=s(51079),_=s(13731),b=s(98090);let w={key:"",label:""};var j=s(49531);function NewSSHKey(){let{keyCtrl:e,labelCtrl:r,handleSubmit:s,errors:l}=function(){let e=(0,p.useRouter)(),r=(0,v.p)(),[,s]=(0,S.mr)(),c=(0,m.useCallback)(async c=>{if(!r)throw Error("Manager not ready");let[l]=await r.add(c);s({type:_.MF.addAccountSSHKey,payload:{accountSSHKey:l}}),await e.replace("/")},[s,r,e]),{control:l,handleSubmit:d,formState:{errors:u}}=(0,g.c)({defaultValues:w,onSubmit:c,resolver:(0,h.F)(b.X.addSchema)}),f=(0,y.bc)({control:l,name:"key"}),j=(0,y.bc)({control:l,name:"label"});return{keyCtrl:f,labelCtrl:j,handleSubmit:d,errors:u}}();return(0,c.jsx)(f.Z,{onSubmit:s,errors:l,children:(0,c.jsx)(x,{children:(0,c.jsxs)(d.Z,{children:[(0,c.jsx)(j.N,{number:"1",children:"Configure SSH Key"}),(0,c.jsx)(E,{children:"Access your cloud instances securely. Give existing keyâ€™s below access to this instance or add new keys. Remember, storing private keys safely is crucial for security. If you need help, our support team is always ready to assist."}),(0,c.jsxs)(u.Jy,{children:[(0,c.jsx)("div",{children:(0,c.jsx)(N,{...e.field,...e.fieldState,required:!0,label:"SSH Public Key",placeholder:"SSH Key"})}),(0,c.jsx)(k,{children:(0,c.jsx)(u.oi,{...r.field,...r.fieldState,label:"Label",placeholder:"Label"})})]}),(0,c.jsx)(C,{children:(0,c.jsx)(u.zx,{type:"submit",color:"main0",kind:"default",size:"md",variant:"primary",children:"Save SSH Key"})})]})})})}var x=(0,l.ZP)("section").withConfig({displayName:"cmp___StyledSection",componentId:"sc-i5ij7p-0"})({paddingLeft:"0px",paddingRight:"0px",paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}),E=(0,l.ZP)("p").withConfig({displayName:"cmp___StyledP",componentId:"sc-i5ij7p-1"})({marginBottom:"1.5rem"}),N=(0,l.ZP)(u.Kx).withConfig({displayName:"cmp___StyledTextArea",componentId:"sc-i5ij7p-2"})({height:"10rem",wordBreak:"break-all"}),k=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv",componentId:"sc-i5ij7p-3"})({marginTop:"1rem"}),C=(0,l.ZP)("div").withConfig({displayName:"cmp___StyledDiv2",componentId:"sc-i5ij7p-4"})({marginTop:"2.5rem",textAlign:"center"})},56312:function(e,r,s){"use strict";s.d(r,{F:function(){return zod_t}});var c=s(87536),t=function(e,r,s){if(e&&"reportValidity"in e){var l=(0,c.U2)(s,r);e.setCustomValidity(l&&l.message||""),e.reportValidity()}},resolvers_i=function(e,r){var i=function(s){var c=r.fields[s];c&&c.ref&&"reportValidity"in c.ref?t(c.ref,s,e):c.refs&&c.refs.forEach(function(r){return t(r,s,e)})};for(var s in r.fields)i(s)},n=function(e,r){r.shouldUseNativeValidation&&resolvers_i(e,r);var s={};for(var l in e){var d=(0,c.U2)(r.fields,l),u=Object.assign(e[l]||{},{ref:d&&d.ref});if(a(r.names||Object.keys(e),l)){var f=Object.assign({},o((0,c.U2)(s,l)));(0,c.t8)(f,"root",u),(0,c.t8)(s,l,f)}else(0,c.t8)(s,l,u)}return s},o=function(e){return Array.isArray(e)?e.filter(Boolean):[]},a=function(e,r){return e.some(function(e){return e.startsWith(r+".")})},zod_n=function(e,r){for(var s={};e.length;){var l=e[0],d=l.code,u=l.message,f=l.path.join(".");if(!s[f]){if("unionErrors"in l){var m=l.unionErrors[0].errors[0];s[f]={message:m.message,type:m.code}}else s[f]={message:u,type:d}}if("unionErrors"in l&&l.unionErrors.forEach(function(r){return r.errors.forEach(function(r){return e.push(r)})}),r){var p=s[f].types,y=p&&p[l.code];s[f]=(0,c.KN)(f,r,s,d,y?[].concat(y,l.message):l.message)}e.shift()}return s},zod_t=function(e,r,s){return void 0===s&&(s={}),function(c,l,d){try{return Promise.resolve(function(l,u){try{var f=Promise.resolve(e["sync"===s.mode?"parse":"parseAsync"](c,r)).then(function(e){return d.shouldUseNativeValidation&&resolvers_i({},d),{errors:{},values:s.raw?c:e}})}catch(e){return u(e)}return f&&f.then?f.then(void 0,u):f}(0,function(e){if(null!=e.errors)return{values:{},errors:n(zod_n(e.errors,!d.shouldUseNativeValidation&&"all"===d.criteriaMode),d)};throw e}))}catch(e){return Promise.reject(e)}}}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=36330)}),_N_E=e.O()}]);