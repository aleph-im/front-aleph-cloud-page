"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4694],{34517:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(85893),r=n(67294),a=n(41664),s=n.n(a),l=n(31515);let ButtonLink=e=>{let{href:t,variant:n="secondary",color:r="main0",kind:a="default",size:o="md",disabled:c,children:d,...m}=e,u=(0,i.jsx)(l.zx,{as:c?void 0:"a",variant:n,color:r,kind:a,size:o,disabled:c,...m,children:d});return c?u:(0,i.jsx)(s(),{href:t,passHref:!0,legacyBehavior:!0,children:u})};ButtonLink.displayName="ButtonLink";var o=(0,r.memo)(ButtonLink)},14215:function(e,t,n){n.d(t,{Z:function(){return Z}});var i=n(85893),r=n(57833),a=n(67294),s=n(31515),l=n(76696),o=n(77541),c=n(14685),d=n(11163),m=n(80380),u=n(9754),h=n(36924),f=n(36541),g=n(50586),p=n(86780),x=n(64688),v=n(9911),y=n(47104),j=n(41664),w=n.n(j);let DomainDetail=e=>{let{domainId:t,showDelete:n=!1}=e,{domain:r,status:j,refEntity:Z,account:Q,handleDelete:X,disabledDelete:ee,handleUpdate:et,disabledUpdate:en,handleRetry:ei,handleCopyHash:er,handleCopyRef:ea}=function(e){let{domainId:t}=e,n=(0,d.useRouter)(),[{connection:{account:i}}]=(0,u.mr)(),{dispatchDeleteEntity:r}=(0,f.w)({entityName:"domain"}),{entities:l}=(0,h.d)({ids:t}),[o]=l||[],c=(0,x.S)(null==o?void 0:o.ref),y=function(e){let[t,n]=(0,a.useState)(void 0),i=(0,m.A)();return(0,a.useEffect)(()=>{if(!i||!e)return;async function request(){if(!i||!e)return;let t=await i.checkStatus(e);n(t)}request();let t=setInterval(request,1e4);return()=>clearInterval(t)},[e,i]),t}(o),j=(0,m.A)(),{next:w,stop:Z,noti:N}=(0,p.A)({}),k=(0,a.useMemo)(()=>!o,[o]),P=(0,a.useCallback)(async()=>{if(!j)throw g.Z.ConnectYourWallet;if(!o)throw g.Z.DomainNotFound;let e=await j.getDelSteps(),t=e.map(e=>p.n[e]),i=j.delSteps(o);try{for(;;){let{done:e}=await i.next();if(e)break;await w(t)}r(o.id),await n.replace(v.cr.console.home)}catch(i){console.error(i);let e=i.message,t=null==i?void 0:i.cause,n="string"==typeof t?t:null==t?void 0:t.message;null==N||N.add({variant:"error",title:"Error",text:e,detail:n})}finally{await Z()}},[r,j,o,w,n,Z,N]),S=(0,a.useMemo)(()=>!o,[o]),D=(0,a.useCallback)(()=>{if(!o)throw g.Z.DomainNotFound;let e=new URLSearchParams({name:o.id,target:o.target,ref:o.ref});n.push("".concat(v.cr.console.settings.domain.new,"/?").concat(e.toString()))},[n,o]),T=(0,a.useCallback)(async()=>{if(!j)throw g.Z.ConnectYourWallet;if(!o)throw g.Z.DomainNotFound;try{await j.retry(o),await n.replace("/")}catch(e){}},[o,j,n]),C=(0,s.vx)((null==c?void 0:c.id)||""),b=(0,s.vx)((null==o?void 0:o.ref)||"");return{domain:o,status:y,refEntity:c,account:i,handleDelete:P,disabledDelete:k,handleUpdate:D,disabledUpdate:S,handleRetry:T,handleCopyHash:C,handleCopyRef:b}}({domainId:t});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(N,{children:[(0,i.jsxs)(k,{children:[(0,i.jsx)(P,{name:"input-text",className:"text-main0"}),(0,i.jsx)("div",{className:"tp-body2",children:r?r.name||(0,c.zN)(r.id):(0,i.jsx)(y.Z,{width:"10rem"})}),(0,i.jsx)(S,{kind:"secondary",variant:(null==j?void 0:j.status)?"success":"error",children:(null==j?void 0:j.status)?"DOMAIN RECORDS CONFIGURED":"DOMAIN RECORDS NOT CONFIGURED"})]}),(0,i.jsxs)(D,{children:[(0,i.jsx)(s.zx,{kind:"default",variant:"tertiary",size:"md",onClick:()=>et(),disabled:en,children:"Update"}),n&&(0,i.jsx)(s.zx,{kind:"functional",variant:"error",size:"md",onClick:X,disabled:ee,children:(0,i.jsx)(s.JO,{name:"trash"})})]})]}),(0,i.jsxs)(s.Jy,{children:[(0,i.jsxs)(T,{children:[(0,i.jsx)(C,{variant:"accent",children:r?v.K_[r.type]:(0,i.jsx)(y.Z,{width:"5rem",height:"1.3rem"})}),(0,i.jsxs)(b,{children:[(0,i.jsx)("div",{className:"tp-info text-main0",children:"NAME"}),r?(0,i.jsx)("a",{className:"tp-body1 fs-16",href:"https://".concat(r.name),target:"_blank",referrerPolicy:"no-referrer",children:(0,i.jsx)(l.Z,{iconName:"square-up-right",children:(0,i.jsx)(o.xv,{children:r.name})})}):(0,i.jsx)(o.xv,{children:(0,i.jsx)(y.Z,{width:"12rem"})})]})]}),(0,i.jsx)(o.Z0,{}),(0,i.jsxs)(_,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"tp-info text-main0",children:"TARGET"}),(0,i.jsx)("div",{children:(0,i.jsx)(o.xv,{children:r?r.target&&v.Ni[r.target]||"-":(0,i.jsx)(y.Z,{width:"5rem"})})})]}),(0,i.jsxs)(E,{children:[(0,i.jsx)("div",{className:"tp-info text-main0",children:"UPDATED ON"}),(0,i.jsx)("div",{children:r?(0,i.jsx)(o.xv,{className:"fs-10 tp-body1",children:r.date}):(0,i.jsx)(y.Z,{width:"5rem"})})]})]}),(0,i.jsxs)(R,{children:[(0,i.jsx)("div",{className:"tp-info text-main0",children:"REF"}),(0,i.jsx)("div",{children:(0,i.jsx)(l.Z,{iconName:"copy",onClick:ea,children:(0,i.jsx)(o.xv,{children:r?r.ref:(0,i.jsx)(y.Z,{width:"12rem"})})})})]}),j&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z0,{}),(0,i.jsx)(s.DU,{type:"h7",as:"h2",color:"main0",children:"Status"}),(0,i.jsxs)(I,{children:[(0,i.jsx)("div",{className:"tp-info text-main0",children:"STATUS"}),(0,i.jsx)(o.xv,{children:(0,i.jsxs)(A,{children:[(0,i.jsx)(s.vo,{kind:j.status?"success":"warning",title:""}),j.status?"Properly configured":"Manual configuration is required"]})})]}),r&&(!j.tasks_status.cname||!j.tasks_status.owner_proof)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(M,{children:[(0,i.jsx)("div",{className:"tp-info text-main0",children:"PENDING STEPS"}),(0,i.jsx)(o.xv,{children:(0,i.jsxs)(L,{children:[(0,i.jsx)(s.vo,{kind:j.tasks_status.cname?"success":"warning",title:""}),(0,i.jsxs)("div",{children:["Create a CNAME record",(0,i.jsx)(q,{className:"text-main0",children:r.name}),"with value",r.target==v.sY.Program&&(0,i.jsxs)(B,{className:"text-main0",children:[r.name,".program.public.aleph.sh."]}),[v.sY.Instance,v.sY.Confidential].includes(r.target)&&(0,i.jsxs)(F,{className:"text-main0",children:[r.name,".instance.public.aleph.sh."]}),r.target==v.sY.IPFS&&(0,i.jsx)(O,{className:"text-main0",children:"ipfs.public.aleph.sh."})]})]})}),r.target==v.sY.IPFS&&(0,i.jsx)(o.xv,{children:(0,i.jsxs)(z,{children:[(0,i.jsx)(s.vo,{kind:j.tasks_status.delegation?"success":"warning",title:""}),(0,i.jsxs)("div",{children:["Create a CNAME record",(0,i.jsxs)(U,{className:"text-main0",children:["_dnslink.",r.name]}),"with value",(0,i.jsxs)(Y,{className:"text-main0",children:["_dnslink.",r.name,".static.public.aleph.sh."]})]})]})}),(0,i.jsx)(o.xv,{children:(0,i.jsxs)(G,{children:[(0,i.jsx)(s.vo,{kind:j.tasks_status.owner_proof?"success":"warning",title:""}),(0,i.jsxs)("div",{children:["Create a TXT owner proof record",(0,i.jsxs)(H,{className:"text-main0",children:["_control.",r.name]}),"with value",(0,i.jsx)(W,{className:"text-main0",children:null==Q?void 0:Q.address})]})]})})]}),(0,i.jsxs)(J,{children:[(0,i.jsx)("div",{className:"tp-info text-main0",children:"FINAL STEP"}),(0,i.jsx)(o.xv,{children:"After configuring the domain records you can retry to link them again here"})]}),(0,i.jsx)(K,{children:(0,i.jsx)(s.zx,{onClick:ei,size:"md",variant:"secondary",color:"main0",kind:"default",children:"Retry"})})]})]}),r&&Z?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z0,{}),(0,i.jsxs)(s.DU,{type:"h7",as:"h2",color:"main0",children:["Linked ",v.Ni[r.target]]}),(0,i.jsxs)(V,{children:[(0,i.jsx)("div",{className:"tp-info text-main0",children:"Target Resource"}),(0,i.jsx)(w(),{className:"tp-body1 fs-16",href:("instance"===r.target?v.cr.console.computing.instances.home:"confidential"===r.target?v.cr.console.computing.confidentials.home:"program"===r.target?v.cr.console.computing.functions.home:v.cr.console.storage.volumes.home)+"/".concat(Z.id),children:(0,i.jsx)(l.Z,{iconName:"square-up-right",children:"Details"})})]}),(0,i.jsxs)($,{children:[(0,i.jsx)("div",{className:"tp-info text-main0",children:"ITEM HASH"}),(0,i.jsx)(l.Z,{iconName:"copy",onClick:er,children:Z.id})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z0,{}),(0,i.jsx)(s.DU,{type:"h7",as:"h2",color:"main0",children:"Linked Resource"}),(0,i.jsx)(o.xv,{children:"The target resource is missing or has been deleted. "})]})]})]})};DomainDetail.displayName="DomainDetail";var Z=(0,a.memo)(DomainDetail),N=(0,r.ZP)("div")({display:"flex",justifyContent:"space-between",paddingBottom:"1.25rem"}),k=(0,r.ZP)("div")({display:"flex",flexWrap:"wrap",alignItems:"center"}),P=(0,r.ZP)(s.JO)({marginRight:"1rem"}),S=(0,r.ZP)(s.__)({marginLeft:"1rem",marginTop:"0.25rem"}),D=(0,r.ZP)("div")({marginLeft:"0.5rem",display:"flex",flexWrap:"wrap",justifyContent:"flex-end",gap:"0.5rem","@media (min-width: 36rem)":{gap:"1rem"}}),T=(0,r.ZP)("div")({display:"flex",alignItems:"center",justifyContent:"flex-start",overflow:"hidden"}),C=(0,r.ZP)(s.Vp)({marginRight:"1rem",whiteSpace:"nowrap"}),b=(0,r.ZP)("div")({flex:"1 1 auto"}),_=(0,r.ZP)("div")({marginTop:"1.25rem",marginBottom:"1.25rem",display:"flex",flexDirection:"row"}),E=(0,r.ZP)("div")({paddingLeft:"3rem"}),R=(0,r.ZP)("div")({marginTop:"1.25rem",marginBottom:"1.25rem"}),I=(0,r.ZP)("div")({marginTop:"1.25rem",marginBottom:"1.25rem"}),A=(0,r.ZP)("div")({marginTop:"0.5rem",display:"flex"}),M=(0,r.ZP)("div")({marginTop:"1.25rem",marginBottom:"1.25rem"}),L=(0,r.ZP)("div")({marginTop:"0.5rem",display:"flex"}),q=(0,r.ZP)("span")({marginLeft:"0.5rem",marginRight:"0.5rem"}),B=(0,r.ZP)("span")({marginLeft:"0.5rem",marginRight:"0.5rem"}),F=(0,r.ZP)("span")({marginLeft:"0.5rem",marginRight:"0.5rem"}),O=(0,r.ZP)("span")({marginLeft:"0.5rem",marginRight:"0.5rem"}),z=(0,r.ZP)("div")({marginTop:"0.5rem",display:"flex"}),U=(0,r.ZP)("span")({marginLeft:"0.5rem",marginRight:"0.5rem"}),Y=(0,r.ZP)("span")({marginLeft:"0.5rem",marginRight:"0.5rem"}),G=(0,r.ZP)("div")({marginTop:"0.5rem",display:"flex"}),H=(0,r.ZP)("span")({marginLeft:"0.5rem",marginRight:"0.5rem"}),W=(0,r.ZP)("span")({marginLeft:"0.5rem",marginRight:"0.5rem"}),J=(0,r.ZP)("div")({marginTop:"1.25rem",marginBottom:"1.25rem"}),K=(0,r.ZP)("div")({marginTop:"1.25rem",marginBottom:"1.25rem"}),V=(0,r.ZP)("div")({marginTop:"1.25rem",marginBottom:"1.25rem"}),$=(0,r.ZP)("div").withConfig({displayName:"cmp___StyledDiv16",componentId:"sc-1nvdr5g-0"})({marginTop:"1.25rem",marginBottom:"1.25rem"})},76696:function(e,t,n){n.d(t,{Z:function(){return d}});var i=n(85893),r=n(57833),a=n(67294),s=n(77541),l=n(31515);let o=r.ZP.div.withConfig({displayName:"styles__StyledContainer",componentId:"sc-hdgoyh-0"})(["",""],e=>{let{theme:t}=e;return(0,r.iv)([""," ","{color:",";}&:hover ","{color:",";}"],{display:"flex",cursor:"pointer",alignItems:"center"},c,t.color.purple4,c,t.color.main0)}),c=(0,r.ZP)(l.JO).withConfig({displayName:"styles__StyledIcon",componentId:"sc-hdgoyh-1"})(["",""],e=>{let{theme:t}=e;return(0,r.iv)([""," transition-property:color;transition-duration:","ms;transition-timing-function:",";"],{marginLeft:"0.5rem",cursor:"pointer"},t.transition.duration.fast,t.transition.timing)}),IconText=e=>{let{children:t,onClick:n,iconName:r}=e;return(0,i.jsxs)(o,{onClick:n,children:[(0,i.jsx)(m,{children:t}),(0,i.jsx)(u,{name:r,className:"text-purple4"})]})};IconText.displayName="IconText";var d=(0,a.memo)(IconText),m=(0,r.ZP)(s.xv)({wordBreak:"break-all"}),u=(0,r.ZP)(c).withConfig({displayName:"cmp___StyledStyledIcon",componentId:"sc-3gm8x3-0"})({marginLeft:"0.5rem",cursor:"pointer"})},47104:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(85893),r=n(67294),a=n(57833);let s=a.ZP.div.withConfig({displayName:"styles__StyledSkeleton",componentId:"sc-1mb8lh3-0"})([""," ",""],{"@keyframes pulse":{"50%":{opacity:".5"}},animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite",borderRadius:"0.375rem"},e=>{let{theme:t,$width:n,$height:i}=e;return(0,a.iv)(["background:",";width:",";height:",";"],t.color.purple3,n,i)}),Skeleton=e=>{let{width:t,height:n="1.1em"}=e;return(0,i.jsx)(s,{$width:t,$height:n})};Skeleton.displayName="Skeleton";var l=(0,r.memo)(Skeleton)},77541:function(e,t,n){n.d(t,{J3:function(){return l},Z0:function(){return a},xv:function(){return s}});var i=n(57833),r=n(31515);let a=i.ZP.hr.withConfig({displayName:"common__Separator",componentId:"sc-4t26wy-0"})([""," border:0;border-top:1px solid ",";opacity:0.3;"],{marginTop:"1.25rem",marginBottom:"1.25rem"},e=>{let{theme:t}=e;return t.color.main0}),s=i.ZP.span.attrs((0,r.PT)("tp-body1 text-text")).withConfig({displayName:"common__Text",componentId:"sc-4t26wy-1"})([""]),l=i.ZP.span.attrs((0,r.PT)("tp-body1 text-disabled")).withConfig({displayName:"common__DisabledText",componentId:"sc-4t26wy-2"})([""])},36541:function(e,t,n){n.d(t,{w:function(){return useDispatchDeleteEntityAction}});var i=n(67294),r=n(9754),a=n(9324);function useDispatchDeleteEntityAction(e){let{entityName:t}=e,[,n]=(0,r.mr)(),s=(0,i.useCallback)(e=>{n(new a.gg({name:t,keys:e}));let i=(0,a.zG)(t);i.forEach(e=>n(e))},[n,t]);return{dispatchDeleteEntity:s}}},64688:function(e,t,n){n.d(t,{S:function(){return useHashToEntity}});var i=n(67294),r=n(9754),a=n(9911),s=n(14685),l=n(1801);function useHashToEntity(e){let[t,n]=(0,i.useState)(void 0),o=function(e){let[t,n]=(0,i.useState)(void 0),r=(0,l.c)();return(0,i.useEffect)(()=>{if(!e){n(void 0);return}async function fetchMessage(e){if(!r)return;let t=await r.get(e),i=(0,s.gE)(t);n(i)}(async function(e){!function(e){let[,t,i]=e.split("/");return!!("string"==typeof t&&"string"==typeof i&&Object.values(a.py).includes(t))&&(n(t),!0)}(e)&&fetchMessage(e)})(e)},[e,r]),t}(e),c=function(e){let[t]=(0,r.mr)(),{domainManager:n,sshKeyManager:s,volumeManager:l,programManager:o,instanceManager:c,gpuInstanceManager:d,websiteManager:m,confidentialManager:u}=t.manager,h=(0,i.useMemo)(()=>({[a.py.Domain]:n,[a.py.SSHKey]:s,[a.py.Volume]:l,[a.py.Instance]:c,[a.py.GpuInstance]:d,[a.py.Program]:o,[a.py.Website]:m,[a.py.Confidential]:u}),[n,s,l,c,d,o,m,u]);if(e)return h[e]}(o);return(0,i.useEffect)(()=>{if(!e){n(void 0);return}(async function(e){if(!c)return;let t=await c.get(e);n(t)})(e)},[e,c]),t}},80380:function(e,t,n){n.d(t,{A:function(){return useDomainManager}});var i=n(9754);function useDomainManager(){let[e]=(0,i.mr)(),{domainManager:t}=e.manager;return t}},1801:function(e,t,n){n.d(t,{c:function(){return useMessageManager}});var i=n(9754);function useMessageManager(){let[e]=(0,i.mr)(),{messageManager:t}=e.manager;return t}},36924:function(e,t,n){n.d(t,{d:function(){return useRequestDomains}});var i=n(80380),r=n(77205);function useRequestDomains(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.A)();return(0,r.F)({...e,manager:t,name:"domain"})}},77205:function(e,t,n){n.d(t,{F:function(){return useRequestEntities}});var i=n(67294),r=n(9754),a=n(9324),s=n(31515);let handleSingleEntityRequest=async(e,t,n)=>{var i;if(null==n?void 0:null===(i=n.entities)||void 0===i?void 0:i.length){let e=n.entities.find(e=>e.id===t);if(e)return[e]}let r=await e.get(t);return r?[r]:[]},handleMultipleEntitiesRequest=async(e,t,n)=>{var i;if(!t.length)return[];if(null==n?void 0:null===(i=n.entities)||void 0===i?void 0:i.length){let e=n.entities.map(e=>e.id),i=t.every(t=>e.includes(t));if(i)return n.entities.filter(e=>t.includes(e.id))}return e.getAll({ids:t})},handleAllEntitiesRequest=async(e,t)=>{var n;return(null==t?void 0:null===(n=t.entities)||void 0===n?void 0:n.length)?t.entities:e.getAll({})};function useRequestEntities(e){let{name:t,manager:n,ids:l,triggerDeps:o=[],triggerOnMount:c=!0}=e,[d]=(0,r.mr)(),{account:m}=d.connection;o=[m,l,...o];let u=(0,i.useMemo)(()=>"string"==typeof l?"single":Array.isArray(l)?"multiple":"all",[l]),h=(0,i.useMemo)(()=>{switch(u){case"single":case"multiple":return"merge";case"all":return"overwrite"}},[u]),{data:f,loading:g,request:p}=function(e){let[t,n]=(0,r.mr)();return function(e){let{state:t,dispatch:n,name:r,cacheStrategy:l="overwrite",...o}=e,c=t[r],d=(0,i.useMemo)(()=>{let{entities:e,keys:t,...n}=c;return{data:e,...n}},[c]);return(0,s.QT)({state:d,setState:e=>{switch(l){case"none":break;case"overwrite":n(new a.B9({name:r,state:e}));break;case"merge":n(new a.Wy({name:r,entities:e.data||[]}))}},...o})}({state:t,dispatch:n,...e})}({name:t,doRequest:async()=>{if(!n)return[];let e=d[t];switch(u){case"single":return handleSingleEntityRequest(n,l,e);case"multiple":return handleMultipleEntitiesRequest(n,l,e);case"all":return handleAllEntitiesRequest(n,e)}},onSuccess:()=>null,flushData:!0,triggerOnMount:c,triggerDeps:o,cacheStrategy:h}),x=(0,i.useMemo)(()=>{if(!f)return f;switch(u){case"single":return f.filter(e=>e.id===l);case"multiple":return f.filter(e=>l.includes(e.id));default:return f}},[f,u,l]);return!function(e){let{entities:t=[],request:n,triggerOnMount:r}=e;(0,i.useEffect)(()=>{if(!r)return;let e=(Array.isArray(t)?t:[t]).filter(e=>!e.confirmed);if(!e.length)return;let i=setInterval(n,1e4);return()=>clearInterval(i)},[t,n,r])}({entities:x,request:p,triggerOnMount:c}),{entities:x,loading:g}}}}]);