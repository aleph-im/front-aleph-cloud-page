"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1424],{87699:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(85893),r=n(57833),a=n(67294),o=n(73899);let s=(0,r.ZP)(o.zx).attrs(e=>({...e,forwardedAs:"a",kind:"default",variant:"textOnly",color:"main0"})).withConfig({displayName:"styles__StyledExternalLinkButton",componentId:"sc-1fpmkx0-0"})([""]),ExternalLinkButton=e=>{let{children:t,href:n,size:r="md",forwardedAs:a,...o}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s,{href:n,size:r,...o,target:"_blank",children:[t||n,(0,i.jsx)(d,{name:"square-up-right"})]})})};ExternalLinkButton.displayName="ExternalLinkButton";var l=(0,a.memo)(ExternalLinkButton),d=(0,r.ZP)(o.JO).withConfig({displayName:"cmp___StyledIcon",componentId:"sc-7jgrdd-0"})({marginLeft:"0.625rem"})},61424:function(e,t,n){n.d(t,{I3:function(){return NewDomainForm},ZP:function(){return N}});var i=n(85893),r=n(57833),a=n(67294),o=n(73899),s=n(75650),l=n(11163),d=n(24959),u=n(80380),c=n(57966),m=n(96370),f=n(16368),p=n(30716),g=n(75899),h=n(9754),x=n(11525),y=n(9911),w=n(87536),b=n(56312),v=n(53424),j=n(86780),P=n(9324),I=n(50586);let Y={...v.Pg};var C=n(99983),S=n(49531),F=n(87699),k=n(34517),T=n(77541);let Z=r.ZP.section.withConfig({displayName:"styles__StyledSection",componentId:"sc-byjtw6-0"})([""," ",""],{padding:"0px"},e=>{let{$isEmbedded:t}=e;return!t&&{paddingBottom:"1.5rem",paddingTop:"5rem","@media (min-width: 48rem)":{paddingTop:"2.5rem",paddingBottom:"2.5rem"}}}),NewDomainForm=e=>{let{name:t,entityId:n,entityType:r,onSuccess:v,variant:N="embedded",showResourceSelection:G=!1}=e,{entities:Q,nameCtrl:$,targetCtrl:H,refCtrl:V,rules:K,errors:X,handleSubmit:ee,setTarget:et,setRef:en,initialTarget:ei}=function(e){let{name:t,entityId:n,entityType:i,onSuccess:r}=e,o=(0,l.useRouter)(),[,s]=(0,h.mr)(),{entities:v}=(0,m.u)(),{entities:C}=(0,f.n)(),{entities:S}=(0,p.p)(),{entities:F}=(0,g.x)(),k=(0,u.A)(),{next:T,stop:Z}=(0,j.A)({}),N=(0,a.useMemo)(()=>({...Y,...t?{name:t}:{},...i?{target:i}:{},...n?{ref:n}:{}}),[t,i,n]),q=(0,a.useCallback)(async e=>{if(!k)throw I.Z.ConnectYourWallet;let t=await k.getAddSteps(e,"override"),n=t.map(e=>j.n[e]),i=k.addSteps(e,"override");try{let e;for(;!e;){let{value:t,done:r}=await i.next();if(r){e=t[0];break}await T(n)}s(new P.Wy({name:"domain",entities:e})),console.log("accountDomain",e),null==r||r(e)}finally{await Z()}},[s,k,T,r,Z]),{control:E,handleSubmit:R,setValue:_,reset:B,formState:{errors:z}}=(0,d.c)({defaultValues:N,onSubmit:q,resolver:(0,b.F)(x.Y.addSchema)}),D=(0,a.useRef)(!1);(0,a.useEffect)(()=>{!D.current&&(i||n)&&(D.current=!0,B({name:t||"",target:i||Y.target,ref:n||""}))},[i,n,t,B]);let M=(0,a.useRef)(!1);(0,a.useEffect)(()=>{if(M.current)return;M.current=!0;let e=window.location.pathname+window.location.hash;window.history.replaceState(window.history.state,"",e)},[o.isReady,o.asPath]);let A=(0,w.bc)({control:E,name:"name"}),L=(0,w.bc)({control:E,name:"target",rules:{onChange(e){_("ref","")}}}),J=(0,w.bc)({control:E,name:"ref"}),W=L.field.value,O=(0,a.useMemo)(()=>{if(!W)return[];if(W!==y.sY.IPFS){let e=W===y.sY.Instance?v:W===y.sY.Confidential?F:C;return(e||[]).map(e=>{let{id:t,metadata:n}=e;return{label:(null==n?void 0:n.name)||t,value:t,type:W}})}return(S||[]).map(e=>{let{id:t,volume_id:n}=e;return{label:t,value:n,type:W}})},[W,v,C,S,F]),U=(0,a.useMemo)(()=>!!(null==v?void 0:v.length),[v]),G=(0,a.useMemo)(()=>!!(null==C?void 0:C.length),[C]),Q=(0,a.useMemo)(()=>!!(null==S?void 0:S.length),[S]),$=(0,a.useMemo)(()=>!!(null==F?void 0:F.length),[F]);(0,a.useEffect)(()=>{W===y.sY.Instance&&U?_("target",y.sY.Instance):W===y.sY.Confidential&&$?_("target",y.sY.Confidential):W===y.sY.Program&&G?_("target",y.sY.Program):W===y.sY.IPFS&&_("target",y.sY.IPFS)},[W,G,U,$,Q,_]);let H=A.field.value,V=L.field.value,K=(0,a.useMemo)(()=>H&&V?{name:H,target:V}:void 0,[H,V]),X=(0,c.w)(K);return{entities:O,nameCtrl:A,targetCtrl:L,refCtrl:J,rules:X,errors:z,handleSubmit:R,setTarget:e=>{_("target",e)},setRef:e=>{_("ref",e)},initialTarget:i}}({name:t,entityId:n,entityType:r,onSuccess:v}),getTabIdFromTarget=e=>{switch(e){case y.sY.Instance:case y.sY.Program:case y.sY.Confidential:return"compute";case y.sY.IPFS:return"ipfs";default:return"website"}},[er,ea]=(0,a.useState)(()=>getTabIdFromTarget(ei));(0,a.useEffect)(()=>{ei&&ea(getTabIdFromTarget(ei))},[ei]);let eo=(0,a.useMemo)(()=>{switch(H.field.value){case y.sY.Instance:return"instance";case y.sY.Confidential:return"confidential";default:return"function"}},[H.field.value]),es=!!t,el="embedded"===N,ed=el?a.Fragment:C.F;return(0,i.jsx)(ed,{children:(0,i.jsxs)(s.Z,{onSubmit:ee,errors:X,children:[(0,i.jsxs)(Z,{$isEmbedded:el,children:[(0,i.jsx)(S.N,{number:1,children:"Custom domain"}),(0,i.jsx)(q,{children:"Assign a user-friendly domain to your website, instance or function to not only simplify access to your web3 application but also enhance its professional appearance. This is an effective way to elevate user experience, establish brand identity or streamline the navigation process within your application."}),(0,i.jsx)(o.Jy,{children:(0,i.jsx)(o.oi,{...$.field,...$.fieldState,required:!0,label:"Enter your desired custom domain in the field below",placeholder:"yourdomain.io"})}),(0,i.jsx)(E,{children:(0,i.jsx)(F.Z,{href:y.cr.docs.customDomains,children:"Learn more"})}),!G&&(0,i.jsx)(R,{children:(0,i.jsx)(o.zx,{type:"submit",color:"main0",kind:"default",size:"md",variant:"primary",children:es?"Update domain":"Create domain"})})]}),G&&(0,i.jsxs)(Z,{$isEmbedded:el,children:[(0,i.jsx)(S.N,{number:2,children:"Select Resource"}),(0,i.jsx)(_,{children:"You'll need to specify the resource your custom domain will be associated with. This could either be a website, an instance or a function, depending on what you want your custom domain to point to."}),(0,i.jsx)(B,{children:(0,i.jsx)(o.mQ,{align:"left",selected:er,onTabChange:e=>{en(""),ea(e),["website","ipfs"].includes(e)?et(y.sY.IPFS):et(y.sY.Program)},tabs:[{id:"website",name:"Website"},{id:"compute",name:"Compute"},{id:"ipfs",name:"IPFS"}]})}),(0,i.jsx)("div",{role:"tabpanel",children:"website"===er?(0,i.jsx)(z,{children:Q.length>0?(0,i.jsx)(o.Lt,{...V.field,...V.fieldState,required:!0,label:"Link your custom domain to a specific website",children:Q.map(e=>{let{label:t,value:n}=e;return(0,i.jsx)(o.Qr,{value:n,children:t},n)})}):(0,i.jsxs)("div",{children:[(0,i.jsx)(D,{children:"If you want to link a domain to a website, you need to deploy one first *"}),(0,i.jsx)(k.Z,{type:"button",kind:"functional",size:"md",variant:"warning",href:y.cr.console.web3Hosting.website.new,children:"Create your first website"})]})}):"compute"===er?(0,i.jsxs)(M,{children:[(0,i.jsxs)(o.Ee,{...H.field,...H.fieldState,required:!0,label:"Choose resource type",direction:"row",children:[(0,i.jsx)(o.Y8,{label:y.Ni[y.sY.Program],value:y.sY.Program}),(0,i.jsx)(o.Y8,{label:y.Ni[y.sY.Instance],value:y.sY.Instance}),(0,i.jsx)(o.Y8,{label:y.Ni[y.sY.Confidential],value:y.sY.Confidential})]}),Q.length>0?(0,i.jsx)(A,{children:(0,i.jsx)(o.Lt,{...V.field,...V.fieldState,required:!0,label:"Select the specific resource",children:Q.map(e=>{let{label:t,value:n}=e;return(0,i.jsx)(o.Qr,{value:n,children:t},n)})})}):(0,i.jsxs)("div",{children:[(0,i.jsxs)(L,{children:["If you want to link a domain to a ",eo,", you need to deploy one first *"]}),(0,i.jsx)(k.Z,{type:"button",kind:"functional",size:"md",variant:"warning",href:"/console/computing/".concat(eo,"/new"),children:"Create your first ".concat(eo)})]})]}):"ipfs"===er?(0,i.jsx)(o.Jy,{children:(0,i.jsx)(o.oi,{...V.field,...V.fieldState,required:!0,label:"Link your custom domain to an Aleph Message ID",placeholder:"Paste your IPFS Aleph Message ID"})}):(0,i.jsx)(i.Fragment,{})}),K&&K.length>0&&(0,i.jsxs)(J,{children:[(0,i.jsx)("div",{className:"tp-info text-main0",children:"DNS CONFIGURATION"}),(0,i.jsx)(W,{children:"Configure these DNS records before creating the domain for instant detection:"}),K.map(e=>(0,i.jsx)(T.xv,{children:(0,i.jsxs)(O,{children:[(0,i.jsx)(o.vo,{kind:"warning",title:""}),(0,i.jsx)("div",{children:e.info})]})},e.name))]}),(0,i.jsx)(U,{children:(0,i.jsx)(o.zx,{type:"submit",color:"main0",kind:"default",size:"md",variant:"primary",children:es?"Update domain":"Create domain"})})]})]})})};NewDomainForm.displayName="NewDomainForm";var N=(0,a.memo)(NewDomainForm),q=(0,r.ZP)("p")({marginBottom:"1.5rem"}),E=(0,r.ZP)("div")({marginTop:"1.5rem",textAlign:"right"}),R=(0,r.ZP)("div")({zIndex:"0",marginTop:"2.5rem",textAlign:"center"}),_=(0,r.ZP)("p")({marginBottom:"1.5rem"}),B=(0,r.ZP)("div")({marginTop:"2.5rem",marginBottom:"2.5rem"}),z=(0,r.ZP)(o.Jy)({zIndex:"10 !important"}),D=(0,r.ZP)("p")({marginBottom:"0.75rem",marginTop:"0.125rem","--tw-text-opacity":"1",color:"rgb(0 0 0 / var(--tw-text-opacity, 1))"}),M=(0,r.ZP)(o.Jy)({zIndex:"10 !important"}),A=(0,r.ZP)("div")({marginTop:"2.5rem"}),L=(0,r.ZP)("p")({marginBottom:"0.75rem",marginTop:"1.5rem","--tw-text-opacity":"1",color:"rgb(0 0 0 / var(--tw-text-opacity, 1))"}),J=(0,r.ZP)(o.Jy)({marginTop:"1.5rem"}),W=(0,r.ZP)("p")({marginBottom:"1rem",marginTop:"0.5rem"}),O=(0,r.ZP)("div")({marginTop:"0.5rem",display:"flex"}),U=(0,r.ZP)("div").withConfig({displayName:"cmp___StyledDiv6",componentId:"sc-iaqpgs-0"})({zIndex:"0",marginTop:"2.5rem",textAlign:"center"})},57261:function(e,t,n){n.d(t,{G:function(){return useConfidentialManager}});var i=n(9754);function useConfidentialManager(){let[e]=(0,i.mr)(),{confidentialManager:t}=e.manager;return t}},75899:function(e,t,n){n.d(t,{x:function(){return useRequestConfidentials}});var i=n(77205),r=n(57261);function useRequestConfidentials(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.G)();return(0,i.F)({...e,manager:t,name:"confidential"})}},96370:function(e,t,n){n.d(t,{u:function(){return useRequestInstances}});var i=n(99978),r=n(77205);function useRequestInstances(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.U)();return(0,r.F)({...e,manager:t,name:"instance"})}},16368:function(e,t,n){n.d(t,{n:function(){return useRequestPrograms}});var i=n(33223),r=n(77205);function useRequestPrograms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.k)();return(0,r.F)({...e,manager:t,name:"program"})}},30716:function(e,t,n){n.d(t,{p:function(){return useRequestWebsites}});var i=n(8758),r=n(77205);function useRequestWebsites(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.e)();return(0,r.F)({...e,manager:t,name:"website"})}}}]);